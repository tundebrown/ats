exports.id=1783,exports.ids=[1783],exports.modules={95011:(e,t)=>{"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.Q=parse,t.q=serialize;var r=Object.prototype.toString,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function parse(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},n=(t||{}).decode||decode,o=0;o<e.length;){var i=e.indexOf("=",o);if(-1===i)break;var u=e.indexOf(";",o);if(-1===u)u=e.length;else if(u<i){o=e.lastIndexOf(";",i-1)+1;continue}var h=e.slice(o,i).trim();if(void 0===r[h]){var y=e.slice(i+1,u).trim();34===y.charCodeAt(0)&&(y=y.slice(1,-1)),r[h]=tryDecode(y,n)}o=u+1}return r}function serialize(e,t,r){var o=r||{},i=o.encode||encode;if("function"!=typeof i)throw TypeError("option encode is invalid");if(!n.test(e))throw TypeError("argument name is invalid");var u=i(t);if(u&&!n.test(u))throw TypeError("argument val is invalid");var h=e+"="+u;if(null!=o.maxAge){var y=o.maxAge-0;if(isNaN(y)||!isFinite(y))throw TypeError("option maxAge is invalid");h+="; Max-Age="+Math.floor(y)}if(o.domain){if(!n.test(o.domain))throw TypeError("option domain is invalid");h+="; Domain="+o.domain}if(o.path){if(!n.test(o.path))throw TypeError("option path is invalid");h+="; Path="+o.path}if(o.expires){var S=o.expires;if(!isDate(S)||isNaN(S.valueOf()))throw TypeError("option expires is invalid");h+="; Expires="+S.toUTCString()}if(o.httpOnly&&(h+="; HttpOnly"),o.secure&&(h+="; Secure"),o.priority)switch("string"==typeof o.priority?o.priority.toLowerCase():o.priority){case"low":h+="; Priority=Low";break;case"medium":h+="; Priority=Medium";break;case"high":h+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":h+="; SameSite=Strict";break;case"lax":h+="; SameSite=Lax";break;case"none":h+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return h}function decode(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}function encode(e){return encodeURIComponent(e)}function isDate(e){return"[object Date]"===r.call(e)||e instanceof Date}function tryDecode(e,t){try{return t(e)}catch(t){return e}}},34600:(e,t)=>{"use strict";Object.defineProperty(t,"U",{enumerable:!0,get:function(){return createActionProxy}});let r=Symbol.for("react.server.reference");function createActionProxy(e,t,n,o){function bindImpl(e,...t){let r=this,newAction=async function(...e){return o?o(newAction.$$bound.concat(e)):r(...newAction.$$bound,...e)};for(let e of["$$typeof","$$id","$$FORM_ACTION"])newAction[e]=r[e];return newAction.$$bound=(r.$$bound||[]).concat(t),newAction.bind=bindImpl.bind(newAction),newAction}Object.defineProperties(n,{$$typeof:{value:r},$$id:{value:e},$$bound:{value:t},bind:{value:bindImpl}})}},45183:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"bailoutToClientRendering",{enumerable:!0,get:function(){return bailoutToClientRendering}});let n=r(21334),o=r(25319);function bailoutToClientRendering(){let e=o.staticGenerationAsyncStorage.getStore();return null!=e&&!!e.forceStatic||((null==e?void 0:e.isStaticGeneration)&&(0,n.throwWithNoSSR)(),!1)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},62918:(e,t,r)=>{"use strict";function clientHookInServerComponentError(e){}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"clientHookInServerComponentError",{enumerable:!0,get:function(){return clientHookInServerComponentError}}),r(95196),r(3542),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1099:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraftMode",{enumerable:!0,get:function(){return DraftMode}});let n=r(3657);let DraftMode=class DraftMode{get isEnabled(){return this._provider.isEnabled}enable(){if(!(0,n.staticGenerationBailout)("draftMode().enable()"))return this._provider.enable()}disable(){if(!(0,n.staticGenerationBailout)("draftMode().disable()"))return this._provider.disable()}constructor(e){this._provider=e}};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},92491:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{headers:function(){return headers},cookies:function(){return cookies},draftMode:function(){return draftMode}});let n=r(96888),o=r(21306),i=r(76449),u=r(91877),h=r(25528),y=r(3657),S=r(1099);function headers(){if((0,y.staticGenerationBailout)("headers",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return o.HeadersAdapter.seal(new Headers({}));let e=u.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: headers() expects to have requestAsyncStorage, none available.");return e.headers}function cookies(){if((0,y.staticGenerationBailout)("cookies",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return n.RequestCookiesAdapter.seal(new i.RequestCookies(new Headers({})));let e=u.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: cookies() expects to have requestAsyncStorage, none available.");let t=h.actionAsyncStorage.getStore();return t&&(t.isAction||t.isAppRoute)?e.mutableCookies:e.cookies}function draftMode(){let e=u.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: draftMode() expects to have requestAsyncStorage, none available.");return new S.DraftMode(e.draftMode)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},33859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return ReadonlyURLSearchParams},useSearchParams:function(){return useSearchParams},usePathname:function(){return usePathname},ServerInsertedHTMLContext:function(){return y.ServerInsertedHTMLContext},useServerInsertedHTML:function(){return y.useServerInsertedHTML},useRouter:function(){return useRouter},useParams:function(){return useParams},useSelectedLayoutSegments:function(){return useSelectedLayoutSegments},useSelectedLayoutSegment:function(){return useSelectedLayoutSegment},redirect:function(){return S.redirect},permanentRedirect:function(){return S.permanentRedirect},RedirectType:function(){return S.RedirectType},notFound:function(){return E.notFound}});let n=r(3542),o=r(25781),i=r(18170),u=r(62918),h=r(38204),y=r(41626),S=r(18461),E=r(57082),R=Symbol("internal for urlsearchparams readonly");function readonlyURLSearchParamsError(){return Error("ReadonlyURLSearchParams cannot be modified")}let ReadonlyURLSearchParams=class ReadonlyURLSearchParams{[Symbol.iterator](){return this[R][Symbol.iterator]()}append(){throw readonlyURLSearchParamsError()}delete(){throw readonlyURLSearchParamsError()}set(){throw readonlyURLSearchParamsError()}sort(){throw readonlyURLSearchParamsError()}constructor(e){this[R]=e,this.entries=e.entries.bind(e),this.forEach=e.forEach.bind(e),this.get=e.get.bind(e),this.getAll=e.getAll.bind(e),this.has=e.has.bind(e),this.keys=e.keys.bind(e),this.values=e.values.bind(e),this.toString=e.toString.bind(e),this.size=e.size}};function useSearchParams(){(0,u.clientHookInServerComponentError)("useSearchParams");let e=(0,n.useContext)(i.SearchParamsContext),t=(0,n.useMemo)(()=>e?new ReadonlyURLSearchParams(e):null,[e]);{let{bailoutToClientRendering:e}=r(45183);e()}return t}function usePathname(){return(0,u.clientHookInServerComponentError)("usePathname"),(0,n.useContext)(i.PathnameContext)}function useRouter(){(0,u.clientHookInServerComponentError)("useRouter");let e=(0,n.useContext)(o.AppRouterContext);if(null===e)throw Error("invariant expected app router to be mounted");return e}function getSelectedParams(e,t){void 0===t&&(t={});let r=e[1];for(let e of Object.values(r)){let r=e[0],n=Array.isArray(r),o=n?r[1]:r;if(!o||o.startsWith("__PAGE__"))continue;let i=n&&("c"===r[2]||"oc"===r[2]);i?t[r[0]]=r[1].split("/"):n&&(t[r[0]]=r[1]),t=getSelectedParams(e,t)}return t}function useParams(){(0,u.clientHookInServerComponentError)("useParams");let e=(0,n.useContext)(o.GlobalLayoutRouterContext),t=(0,n.useContext)(i.PathParamsContext);return(0,n.useMemo)(()=>(null==e?void 0:e.tree)?getSelectedParams(e.tree):t,[null==e?void 0:e.tree,t])}function getSelectedLayoutSegmentPath(e,t,r,n){let o;if(void 0===r&&(r=!0),void 0===n&&(n=[]),r)o=e[1][t];else{var i;let t=e[1];o=null!=(i=t.children)?i:Object.values(t)[0]}if(!o)return n;let u=o[0],y=(0,h.getSegmentValue)(u);return!y||y.startsWith("__PAGE__")?n:(n.push(y),getSelectedLayoutSegmentPath(o,t,!1,n))}function useSelectedLayoutSegments(e){void 0===e&&(e="children"),(0,u.clientHookInServerComponentError)("useSelectedLayoutSegments");let{tree:t}=(0,n.useContext)(o.LayoutRouterContext);return getSelectedLayoutSegmentPath(t,e)}function useSelectedLayoutSegment(e){void 0===e&&(e="children"),(0,u.clientHookInServerComponentError)("useSelectedLayoutSegment");let t=useSelectedLayoutSegments(e);return 0===t.length?null:t[0]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},57082:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{notFound:function(){return notFound},isNotFoundError:function(){return isNotFoundError}});let r="NEXT_NOT_FOUND";function notFound(){let e=Error(r);throw e.digest=r,e}function isNotFoundError(e){return(null==e?void 0:e.digest)===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},18461:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return getRedirectError},redirect:function(){return redirect},permanentRedirect:function(){return permanentRedirect},isRedirectError:function(){return isRedirectError},getURLFromRedirectError:function(){return getURLFromRedirectError},getRedirectTypeFromError:function(){return getRedirectTypeFromError}});let o=r(91877),i="NEXT_REDIRECT";function getRedirectError(e,t,r){void 0===r&&(r=!1);let n=Error(i);n.digest=i+";"+t+";"+e+";"+r;let u=o.requestAsyncStorage.getStore();return u&&(n.mutableCookies=u.mutableCookies),n}function redirect(e,t){throw void 0===t&&(t="replace"),getRedirectError(e,t,!1)}function permanentRedirect(e,t){throw void 0===t&&(t="replace"),getRedirectError(e,t,!0)}function isRedirectError(e){if("string"!=typeof(null==e?void 0:e.digest))return!1;let[t,r,n,o]=e.digest.split(";",4);return t===i&&("replace"===r||"push"===r)&&"string"==typeof n&&("true"===o||"false"===o)}function getURLFromRedirectError(e){return isRedirectError(e)?e.digest.split(";",3)[2]:null}function getRedirectTypeFromError(e){if(!isRedirectError(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}(function(e){e.push="push",e.replace="replace"})(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},38204:(e,t)=>{"use strict";function getSegmentValue(e){return Array.isArray(e)?e[1]:e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentValue",{enumerable:!0,get:function(){return getSegmentValue}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},30989:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};function stringifyCookie(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean);return`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}; ${r.join("; ")}`}function parseCookie(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,o]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=o?o:"true"))}catch{}}return t}function parseSetCookie(e){if(!e)return;let[[t,r],...n]=parseCookie(e),{domain:o,expires:i,httponly:u,maxage:h,path:y,samesite:S,secure:E,priority:R}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase(),t])),D={name:t,value:decodeURIComponent(r),domain:o,...i&&{expires:new Date(i)},...u&&{httpOnly:!0},..."string"==typeof h&&{maxAge:Number(h)},path:y,...S&&{sameSite:parseSameSite(S)},...E&&{secure:!0},...R&&{priority:parsePriority(R)}};return compact(D)}function compact(e){let t={};for(let r in e)e[r]&&(t[r]=e[r]);return t}((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{RequestCookies:()=>y,ResponseCookies:()=>S,parseCookie:()=>parseCookie,parseSetCookie:()=>parseSetCookie,stringifyCookie:()=>stringifyCookie}),e.exports=((e,i,u,h)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let u of n(i))o.call(e,u)||void 0===u||t(e,u,{get:()=>i[u],enumerable:!(h=r(i,u))||h.enumerable});return e})(t({},"__esModule",{value:!0}),i);var u=["strict","lax","none"];function parseSameSite(e){return e=e.toLowerCase(),u.includes(e)?e:void 0}var h=["low","medium","high"];function parsePriority(e){return e=e.toLowerCase(),h.includes(e)?e:void 0}function splitCookiesString(e){if(!e)return[];var t,r,n,o,i,u=[],h=0;function skipWhitespace(){for(;h<e.length&&/\s/.test(e.charAt(h));)h+=1;return h<e.length}function notSpecialChar(){return"="!==(r=e.charAt(h))&&";"!==r&&","!==r}for(;h<e.length;){for(t=h,i=!1;skipWhitespace();)if(","===(r=e.charAt(h))){for(n=h,h+=1,skipWhitespace(),o=h;h<e.length&&notSpecialChar();)h+=1;h<e.length&&"="===e.charAt(h)?(i=!0,h=o,u.push(e.substring(t,n)),t=h):h=n+1}else h+=1;(!i||h>=e.length)&&u.push(e.substring(t,e.length))}return u}var y=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t){let e=parseCookie(t);for(let[t,r]of e)this._parsed.set(t,{name:t,value:r})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>stringifyCookie(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>stringifyCookie(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},S=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;let o=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[],i=Array.isArray(o)?o:splitCookiesString(o);for(let e of i){let t=parseSetCookie(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,o=this._parsed;return o.set(t,normalizeCookie({name:t,value:r,...n})),replace(o,this._headers),this}delete(...e){let[t,r,n]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:r,domain:n,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(stringifyCookie).join("; ")}};function replace(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=stringifyCookie(r);t.append("set-cookie",e)}}function normalizeCookie(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}},54389:e=>{"use strict";(()=>{var t={339:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let n=r(44),o=r(38),i=r(741),u="context",h=new n.NoopContextManager;let ContextAPI=class ContextAPI{constructor(){}static getInstance(){return this._instance||(this._instance=new ContextAPI),this._instance}setGlobalContextManager(e){return(0,o.registerGlobal)(u,e,i.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,o.getGlobal)(u)||h}disable(){this._getContextManager().disable(),(0,o.unregisterGlobal)(u,i.DiagAPI.instance())}};t.ContextAPI=ContextAPI},741:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let n=r(144),o=r(871),i=r(133),u=r(38);let DiagAPI=class DiagAPI{constructor(){function _logProxy(e){return function(...t){let r=(0,u.getGlobal)("diag");if(r)return r[e](...t)}}let e=this;e.setLogger=(t,r={logLevel:i.DiagLogLevel.INFO})=>{var n,h,y;if(t===e){let t=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return e.error(null!==(n=t.stack)&&void 0!==n?n:t.message),!1}"number"==typeof r&&(r={logLevel:r});let S=(0,u.getGlobal)("diag"),E=(0,o.createLogLevelDiagLogger)(null!==(h=r.logLevel)&&void 0!==h?h:i.DiagLogLevel.INFO,t);if(S&&!r.suppressOverrideMessage){let e=null!==(y=Error().stack)&&void 0!==y?y:"<failed to generate stacktrace>";S.warn(`Current logger will be overwritten from ${e}`),E.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,u.registerGlobal)("diag",E,e,!0)},e.disable=()=>{(0,u.unregisterGlobal)("diag",e)},e.createComponentLogger=e=>new n.DiagComponentLogger(e),e.verbose=_logProxy("verbose"),e.debug=_logProxy("debug"),e.info=_logProxy("info"),e.warn=_logProxy("warn"),e.error=_logProxy("error")}static instance(){return this._instance||(this._instance=new DiagAPI),this._instance}};t.DiagAPI=DiagAPI},128:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let n=r(333),o=r(38),i=r(741),u="metrics";let MetricsAPI=class MetricsAPI{constructor(){}static getInstance(){return this._instance||(this._instance=new MetricsAPI),this._instance}setGlobalMeterProvider(e){return(0,o.registerGlobal)(u,e,i.DiagAPI.instance())}getMeterProvider(){return(0,o.getGlobal)(u)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,o.unregisterGlobal)(u,i.DiagAPI.instance())}};t.MetricsAPI=MetricsAPI},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let n=r(38),o=r(600),i=r(625),u=r(377),h=r(701),y=r(741),S="propagation",E=new o.NoopTextMapPropagator;let PropagationAPI=class PropagationAPI{constructor(){this.createBaggage=h.createBaggage,this.getBaggage=u.getBaggage,this.getActiveBaggage=u.getActiveBaggage,this.setBaggage=u.setBaggage,this.deleteBaggage=u.deleteBaggage}static getInstance(){return this._instance||(this._instance=new PropagationAPI),this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(S,e,y.DiagAPI.instance())}inject(e,t,r=i.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=i.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(S,y.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(S)||E}};t.PropagationAPI=PropagationAPI},967:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let n=r(38),o=r(414),i=r(994),u=r(542),h=r(741),y="trace";let TraceAPI=class TraceAPI{constructor(){this._proxyTracerProvider=new o.ProxyTracerProvider,this.wrapSpanContext=i.wrapSpanContext,this.isSpanContextValid=i.isSpanContextValid,this.deleteSpan=u.deleteSpan,this.getSpan=u.getSpan,this.getActiveSpan=u.getActiveSpan,this.getSpanContext=u.getSpanContext,this.setSpan=u.setSpan,this.setSpanContext=u.setSpanContext}static getInstance(){return this._instance||(this._instance=new TraceAPI),this._instance}setGlobalTracerProvider(e){let t=(0,n.registerGlobal)(y,this._proxyTracerProvider,h.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,n.getGlobal)(y)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(y,h.DiagAPI.instance()),this._proxyTracerProvider=new o.ProxyTracerProvider}};t.TraceAPI=TraceAPI},377:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let n=r(339),o=r(421),i=(0,o.createContextKey)("OpenTelemetry Baggage Key");function getBaggage(e){return e.getValue(i)||void 0}function getActiveBaggage(){return getBaggage(n.ContextAPI.getInstance().active())}function setBaggage(e,t){return e.setValue(i,t)}function deleteBaggage(e){return e.deleteValue(i)}t.getBaggage=getBaggage,t.getActiveBaggage=getActiveBaggage,t.setBaggage=setBaggage,t.deleteBaggage=deleteBaggage},496:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;let BaggageImpl=class BaggageImpl{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let r=new BaggageImpl(this._entries);return r._entries.set(e,t),r}removeEntry(e){let t=new BaggageImpl(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new BaggageImpl(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new BaggageImpl}};t.BaggageImpl=BaggageImpl},817:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},701:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let n=r(741),o=r(496),i=r(817),u=n.DiagAPI.instance();function createBaggage(e={}){return new o.BaggageImpl(new Map(Object.entries(e)))}function baggageEntryMetadataFromString(e){return"string"!=typeof e&&(u.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:i.baggageEntryMetadataSymbol,toString:()=>e}}t.createBaggage=createBaggage,t.baggageEntryMetadataFromString=baggageEntryMetadataFromString},388:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0;let n=r(339);t.context=n.ContextAPI.getInstance()},44:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let n=r(421);let NoopContextManager=class NoopContextManager{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}};t.NoopContextManager=NoopContextManager},421:(e,t)=>{function createContextKey(e){return Symbol.for(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=createContextKey;let BaseContext=class BaseContext{constructor(e){let t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,r)=>{let n=new BaseContext(t._currentContext);return n._currentContext.set(e,r),n},t.deleteValue=e=>{let r=new BaseContext(t._currentContext);return r._currentContext.delete(e),r}}};t.ROOT_CONTEXT=new BaseContext},920:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0;let n=r(741);t.diag=n.DiagAPI.instance()},144:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let n=r(38);let DiagComponentLogger=class DiagComponentLogger{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return logProxy("debug",this._namespace,e)}error(...e){return logProxy("error",this._namespace,e)}info(...e){return logProxy("info",this._namespace,e)}warn(...e){return logProxy("warn",this._namespace,e)}verbose(...e){return logProxy("verbose",this._namespace,e)}};function logProxy(e,t,r){let o=(0,n.getGlobal)("diag");if(o)return r.unshift(t),o[e](...r)}t.DiagComponentLogger=DiagComponentLogger},689:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];let DiagConsoleLogger=class DiagConsoleLogger{constructor(){function _consoleFunc(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}for(let e=0;e<r.length;e++)this[r[e].n]=_consoleFunc(r[e].c)}};t.DiagConsoleLogger=DiagConsoleLogger},871:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let n=r(133);function createLogLevelDiagLogger(e,t){function _filterFunc(r,n){let o=t[r];return"function"==typeof o&&e>=n?o.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:_filterFunc("error",n.DiagLogLevel.ERROR),warn:_filterFunc("warn",n.DiagLogLevel.WARN),info:_filterFunc("info",n.DiagLogLevel.INFO),debug:_filterFunc("debug",n.DiagLogLevel.DEBUG),verbose:_filterFunc("verbose",n.DiagLogLevel.VERBOSE)}}t.createLogLevelDiagLogger=createLogLevelDiagLogger},133:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(t.DiagLogLevel||(t.DiagLogLevel={}))},38:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let n=r(966),o=r(520),i=r(565),u=o.VERSION.split(".")[0],h=Symbol.for(`opentelemetry.js.api.${u}`),y=n._globalThis;function registerGlobal(e,t,r,n=!1){var i;let u=y[h]=null!==(i=y[h])&&void 0!==i?i:{version:o.VERSION};if(!n&&u[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(u.version!==o.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${u.version} for ${e} does not match previously registered API v${o.VERSION}`);return r.error(t.stack||t.message),!1}return u[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${o.VERSION}.`),!0}function getGlobal(e){var t,r;let n=null===(t=y[h])||void 0===t?void 0:t.version;if(n&&(0,i.isCompatible)(n))return null===(r=y[h])||void 0===r?void 0:r[e]}function unregisterGlobal(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${o.VERSION}.`);let r=y[h];r&&delete r[e]}t.registerGlobal=registerGlobal,t.getGlobal=getGlobal,t.unregisterGlobal=unregisterGlobal},565:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let n=r(520),o=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function _makeCompatibilityCheck(e){let t=new Set([e]),r=new Set,n=e.match(o);if(!n)return()=>!1;let i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=i.prerelease)return function(t){return t===e};function _reject(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let n=e.match(o);if(!n)return _reject(e);let u={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};return null!=u.prerelease||i.major!==u.major?_reject(e):0===i.major?i.minor===u.minor&&i.patch<=u.patch?(t.add(e),!0):_reject(e):i.minor<=u.minor?(t.add(e),!0):_reject(e)}}t._makeCompatibilityCheck=_makeCompatibilityCheck,t.isCompatible=_makeCompatibilityCheck(n.VERSION)},934:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0;let n=r(128);t.metrics=n.MetricsAPI.getInstance()},28:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(t.ValueType||(t.ValueType={}))},962:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;let NoopMeter=class NoopMeter{constructor(){}createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}};t.NoopMeter=NoopMeter;let NoopMetric=class NoopMetric{};t.NoopMetric=NoopMetric;let NoopCounterMetric=class NoopCounterMetric extends NoopMetric{add(e,t){}};t.NoopCounterMetric=NoopCounterMetric;let NoopUpDownCounterMetric=class NoopUpDownCounterMetric extends NoopMetric{add(e,t){}};t.NoopUpDownCounterMetric=NoopUpDownCounterMetric;let NoopHistogramMetric=class NoopHistogramMetric extends NoopMetric{record(e,t){}};t.NoopHistogramMetric=NoopHistogramMetric;let NoopObservableMetric=class NoopObservableMetric{addCallback(e){}removeCallback(e){}};t.NoopObservableMetric=NoopObservableMetric;let NoopObservableCounterMetric=class NoopObservableCounterMetric extends NoopObservableMetric{};t.NoopObservableCounterMetric=NoopObservableCounterMetric;let NoopObservableGaugeMetric=class NoopObservableGaugeMetric extends NoopObservableMetric{};t.NoopObservableGaugeMetric=NoopObservableGaugeMetric;let NoopObservableUpDownCounterMetric=class NoopObservableUpDownCounterMetric extends NoopObservableMetric{};function createNoopMeter(){return t.NOOP_METER}t.NoopObservableUpDownCounterMetric=NoopObservableUpDownCounterMetric,t.NOOP_METER=new NoopMeter,t.NOOP_COUNTER_METRIC=new NoopCounterMetric,t.NOOP_HISTOGRAM_METRIC=new NoopHistogramMetric,t.NOOP_UP_DOWN_COUNTER_METRIC=new NoopUpDownCounterMetric,t.NOOP_OBSERVABLE_COUNTER_METRIC=new NoopObservableCounterMetric,t.NOOP_OBSERVABLE_GAUGE_METRIC=new NoopObservableGaugeMetric,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new NoopObservableUpDownCounterMetric,t.createNoopMeter=createNoopMeter},333:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let n=r(962);let NoopMeterProvider=class NoopMeterProvider{getMeter(e,t,r){return n.NOOP_METER}};t.NoopMeterProvider=NoopMeterProvider,t.NOOP_METER_PROVIDER=new NoopMeterProvider},966:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(652),t)},385:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis="object"==typeof globalThis?globalThis:global},652:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(385),t)},251:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0;let n=r(930);t.propagation=n.PropagationAPI.getInstance()},600:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;let NoopTextMapPropagator=class NoopTextMapPropagator{inject(e,t){}extract(e,t){return e}fields(){return[]}};t.NoopTextMapPropagator=NoopTextMapPropagator},625:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},978:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0;let n=r(967);t.trace=n.TraceAPI.getInstance()},76:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let n=r(304);let NonRecordingSpan=class NonRecordingSpan{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}};t.NonRecordingSpan=NonRecordingSpan},527:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let n=r(339),o=r(542),i=r(76),u=r(994),h=n.ContextAPI.getInstance();let NoopTracer=class NoopTracer{startSpan(e,t,r=h.active()){let n=!!(null==t?void 0:t.root);if(n)return new i.NonRecordingSpan;let y=r&&(0,o.getSpanContext)(r);return isSpanContext(y)&&(0,u.isSpanContextValid)(y)?new i.NonRecordingSpan(y):new i.NonRecordingSpan}startActiveSpan(e,t,r,n){let i,u,y;if(arguments.length<2)return;2==arguments.length?y=t:3==arguments.length?(i=t,y=r):(i=t,u=r,y=n);let S=null!=u?u:h.active(),E=this.startSpan(e,i,S),R=(0,o.setSpan)(S,E);return h.with(R,y,void 0,E)}};function isSpanContext(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}t.NoopTracer=NoopTracer},228:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let n=r(527);let NoopTracerProvider=class NoopTracerProvider{getTracer(e,t,r){return new n.NoopTracer}};t.NoopTracerProvider=NoopTracerProvider},387:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let n=r(527),o=new n.NoopTracer;let ProxyTracer=class ProxyTracer{constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){let o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):o}};t.ProxyTracer=ProxyTracer},414:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let n=r(387),o=r(228),i=new o.NoopTracerProvider;let ProxyTracerProvider=class ProxyTracerProvider{getTracer(e,t,r){var o;return null!==(o=this.getDelegateTracer(e,t,r))&&void 0!==o?o:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!==(e=this._delegate)&&void 0!==e?e:i}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t,r)}};t.ProxyTracerProvider=ProxyTracerProvider},505:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(t.SamplingDecision||(t.SamplingDecision={}))},542:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let n=r(421),o=r(76),i=r(339),u=(0,n.createContextKey)("OpenTelemetry Context Key SPAN");function getSpan(e){return e.getValue(u)||void 0}function getActiveSpan(){return getSpan(i.ContextAPI.getInstance().active())}function setSpan(e,t){return e.setValue(u,t)}function deleteSpan(e){return e.deleteValue(u)}function setSpanContext(e,t){return setSpan(e,new o.NonRecordingSpan(t))}function getSpanContext(e){var t;return null===(t=getSpan(e))||void 0===t?void 0:t.spanContext()}t.getSpan=getSpan,t.getActiveSpan=getActiveSpan,t.setSpan=setSpan,t.deleteSpan=deleteSpan,t.setSpanContext=setSpanContext,t.getSpanContext=getSpanContext},430:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let n=r(450);let TraceStateImpl=class TraceStateImpl{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let r=t.trim(),o=r.indexOf("=");if(-1!==o){let i=r.slice(0,o),u=r.slice(o+1,t.length);(0,n.validateKey)(i)&&(0,n.validateValue)(u)&&e.set(i,u)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new TraceStateImpl;return e._internalState=new Map(this._internalState),e}};t.TraceStateImpl=TraceStateImpl},450:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",n=`[a-z]${r}{0,255}`,o=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,i=RegExp(`^(?:${n}|${o})$`),u=/^[ -~]{0,255}[!-~]$/,h=/,|=/;function validateKey(e){return i.test(e)}function validateValue(e){return u.test(e)&&!h.test(e)}t.validateKey=validateKey,t.validateValue=validateValue},757:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let n=r(430);function createTraceState(e){return new n.TraceStateImpl(e)}t.createTraceState=createTraceState},304:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let n=r(762);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},902:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(t.SpanKind||(t.SpanKind={}))},994:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let n=r(304),o=r(76),i=/^([0-9a-f]{32})$/i,u=/^[0-9a-f]{16}$/i;function isValidTraceId(e){return i.test(e)&&e!==n.INVALID_TRACEID}function isValidSpanId(e){return u.test(e)&&e!==n.INVALID_SPANID}function isSpanContextValid(e){return isValidTraceId(e.traceId)&&isValidSpanId(e.spanId)}function wrapSpanContext(e){return new o.NonRecordingSpan(e)}t.isValidTraceId=isValidTraceId,t.isValidSpanId=isValidSpanId,t.isSpanContextValid=isSpanContextValid,t.wrapSpanContext=wrapSpanContext},832:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(t.SpanStatusCode||(t.SpanStatusCode={}))},762:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(t.TraceFlags||(t.TraceFlags={}))},520:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.4.1"}},r={};function __nccwpck_require__(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}},i=!0;try{t[e].call(o.exports,o,o.exports,__nccwpck_require__),i=!1}finally{i&&delete r[e]}return o.exports}__nccwpck_require__.ab=__dirname+"/";var n={};(()=>{Object.defineProperty(n,"__esModule",{value:!0}),n.trace=n.propagation=n.metrics=n.diag=n.context=n.INVALID_SPAN_CONTEXT=n.INVALID_TRACEID=n.INVALID_SPANID=n.isValidSpanId=n.isValidTraceId=n.isSpanContextValid=n.createTraceState=n.TraceFlags=n.SpanStatusCode=n.SpanKind=n.SamplingDecision=n.ProxyTracerProvider=n.ProxyTracer=n.defaultTextMapSetter=n.defaultTextMapGetter=n.ValueType=n.createNoopMeter=n.DiagLogLevel=n.DiagConsoleLogger=n.ROOT_CONTEXT=n.createContextKey=n.baggageEntryMetadataFromString=void 0;var e=__nccwpck_require__(701);Object.defineProperty(n,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return e.baggageEntryMetadataFromString}});var t=__nccwpck_require__(421);Object.defineProperty(n,"createContextKey",{enumerable:!0,get:function(){return t.createContextKey}}),Object.defineProperty(n,"ROOT_CONTEXT",{enumerable:!0,get:function(){return t.ROOT_CONTEXT}});var r=__nccwpck_require__(689);Object.defineProperty(n,"DiagConsoleLogger",{enumerable:!0,get:function(){return r.DiagConsoleLogger}});var o=__nccwpck_require__(133);Object.defineProperty(n,"DiagLogLevel",{enumerable:!0,get:function(){return o.DiagLogLevel}});var i=__nccwpck_require__(962);Object.defineProperty(n,"createNoopMeter",{enumerable:!0,get:function(){return i.createNoopMeter}});var u=__nccwpck_require__(28);Object.defineProperty(n,"ValueType",{enumerable:!0,get:function(){return u.ValueType}});var h=__nccwpck_require__(625);Object.defineProperty(n,"defaultTextMapGetter",{enumerable:!0,get:function(){return h.defaultTextMapGetter}}),Object.defineProperty(n,"defaultTextMapSetter",{enumerable:!0,get:function(){return h.defaultTextMapSetter}});var y=__nccwpck_require__(387);Object.defineProperty(n,"ProxyTracer",{enumerable:!0,get:function(){return y.ProxyTracer}});var S=__nccwpck_require__(414);Object.defineProperty(n,"ProxyTracerProvider",{enumerable:!0,get:function(){return S.ProxyTracerProvider}});var E=__nccwpck_require__(505);Object.defineProperty(n,"SamplingDecision",{enumerable:!0,get:function(){return E.SamplingDecision}});var R=__nccwpck_require__(902);Object.defineProperty(n,"SpanKind",{enumerable:!0,get:function(){return R.SpanKind}});var D=__nccwpck_require__(832);Object.defineProperty(n,"SpanStatusCode",{enumerable:!0,get:function(){return D.SpanStatusCode}});var K=__nccwpck_require__(762);Object.defineProperty(n,"TraceFlags",{enumerable:!0,get:function(){return K.TraceFlags}});var B=__nccwpck_require__(757);Object.defineProperty(n,"createTraceState",{enumerable:!0,get:function(){return B.createTraceState}});var V=__nccwpck_require__(994);Object.defineProperty(n,"isSpanContextValid",{enumerable:!0,get:function(){return V.isSpanContextValid}}),Object.defineProperty(n,"isValidTraceId",{enumerable:!0,get:function(){return V.isValidTraceId}}),Object.defineProperty(n,"isValidSpanId",{enumerable:!0,get:function(){return V.isValidSpanId}});var q=__nccwpck_require__(304);Object.defineProperty(n,"INVALID_SPANID",{enumerable:!0,get:function(){return q.INVALID_SPANID}}),Object.defineProperty(n,"INVALID_TRACEID",{enumerable:!0,get:function(){return q.INVALID_TRACEID}}),Object.defineProperty(n,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return q.INVALID_SPAN_CONTEXT}});let G=__nccwpck_require__(388);Object.defineProperty(n,"context",{enumerable:!0,get:function(){return G.context}});let ee=__nccwpck_require__(920);Object.defineProperty(n,"diag",{enumerable:!0,get:function(){return ee.diag}});let et=__nccwpck_require__(934);Object.defineProperty(n,"metrics",{enumerable:!0,get:function(){return et.metrics}});let er=__nccwpck_require__(251);Object.defineProperty(n,"propagation",{enumerable:!0,get:function(){return er.propagation}});let en=__nccwpck_require__(978);Object.defineProperty(n,"trace",{enumerable:!0,get:function(){return en.trace}}),n.default={context:G.context,diag:ee.diag,metrics:et.metrics,propagation:er.propagation,trace:en.trace}})(),e.exports=n})()},87349:(e,t,r)=>{"use strict";/**
 * @license React
 * react-server-dom-webpack-client.edge.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(58337),o=r(3542),i={stream:!0};function v(e,t){if(e){var r=e[t[0]];if(e=r[t[2]])r=e.name;else{if(!(e=r["*"]))throw Error('Could not find the module "'+t[0]+'" in the React SSR Manifest. This is probably a bug in the React Server Components bundler.');r=t[2]}return 4===t.length?[e.id,e.chunks,r,1]:[e.id,e.chunks,r]}return t}var u=new Map;function x(e){var t=globalThis.__next_require__(e);return"function"!=typeof t.then||"fulfilled"===t.status?null:(t.then(function(e){t.status="fulfilled",t.value=e},function(e){t.status="rejected",t.reason=e}),t)}function aa(){}function ba(e){for(var t=e[1],n=[],o=0;o<t.length;){var i=t[o++];t[o++];var h=u.get(i);if(void 0===h){h=r.e(i),n.push(h);var y=u.set.bind(u,i,null);h.then(y,aa),u.set(i,h)}else null!==h&&n.push(h)}return 4===e.length?0===n.length?x(e[0]):Promise.all(n).then(function(){return x(e[0])}):0<n.length?Promise.all(n):null}function ca(e,t,r){if(null!==e)for(var n=1;n<t.length;n+=2){var o=h.current;if(o){var i=o.preinitScript,u=e.prefix+t[n],y=e.crossOrigin;y="string"==typeof y?"use-credentials"===y?y:"":void 0,i.call(o,u,{crossOrigin:y,nonce:r})}}}var h=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Dispatcher,y=Symbol.for("react.element"),S=Symbol.for("react.provider"),E=Symbol.for("react.server_context"),R=Symbol.for("react.lazy"),D=Symbol.for("react.default_value"),K=Symbol.iterator;function ha(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=K&&e[K]||e["@@iterator"])?e:null}var B=Array.isArray,V=Object.getPrototypeOf,q=Object.prototype,G=new WeakMap;function ka(e){return Number.isFinite(e)?0===e&&-1/0==1/e?"$-0":e:1/0===e?"$Infinity":-1/0===e?"$-Infinity":"$NaN"}function F(e,t,r,n){function f(e,h){if(null===h)return null;if("object"==typeof h){if("function"==typeof h.then){null===u&&(u=new FormData),i++;var y=o++;return h.then(function(e){e=JSON.stringify(e,f);var n=u;n.append(t+y,e),0==--i&&r(n)},function(e){n(e)}),"$@"+y.toString(16)}if(B(h))return h;if(h instanceof FormData){null===u&&(u=new FormData);var S=u,E=t+(e=o++)+"_";return h.forEach(function(e,t){S.append(E+t,e)}),"$K"+e.toString(16)}if(h instanceof Map)return h=JSON.stringify(Array.from(h),f),null===u&&(u=new FormData),e=o++,u.append(t+e,h),"$Q"+e.toString(16);if(h instanceof Set)return h=JSON.stringify(Array.from(h),f),null===u&&(u=new FormData),e=o++,u.append(t+e,h),"$W"+e.toString(16);if(ha(h))return Array.from(h);if((e=V(h))!==q&&(null===e||null!==V(e)))throw Error("Only plain objects, and a few built-ins, can be passed to Server Actions. Classes or null prototypes are not supported.");return h}if("string"==typeof h)return"Z"===h[h.length-1]&&this[e]instanceof Date?"$D"+h:h="$"===h[0]?"$"+h:h;if("boolean"==typeof h)return h;if("number"==typeof h)return ka(h);if(void 0===h)return"$undefined";if("function"==typeof h){if(void 0!==(h=G.get(h)))return h=JSON.stringify(h,f),null===u&&(u=new FormData),e=o++,u.set(t+e,h),"$F"+e.toString(16);throw Error("Client Functions cannot be passed directly to Server Functions. Only Functions passed from the Server can be passed back again.")}if("symbol"==typeof h){if(Symbol.for(e=h.description)!==h)throw Error("Only global symbols received from Symbol.for(...) can be passed to Server Functions. The symbol Symbol.for("+h.description+") cannot be found among global symbols.");return"$S"+e}if("bigint"==typeof h)return"$n"+h.toString(10);throw Error("Type "+typeof h+" is not supported as an argument to a Server Function.")}var o=1,i=0,u=null;e=JSON.stringify(e,f),null===u?r(e):(u.set(t+"0",e),0===i&&r(u))}var ee=new WeakMap;function la(e){var t,r,n=new Promise(function(e,n){t=e,r=n});return F(e,"",function(e){if("string"==typeof e){var r=new FormData;r.append("0",e),e=r}n.status="fulfilled",n.value=e,t(e)},function(e){n.status="rejected",n.reason=e,r(e)}),n}function ma(e){var t=G.get(this);if(!t)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var r=null;if(null!==t.bound){if((r=ee.get(t))||(r=la(t),ee.set(t,r)),"rejected"===r.status)throw r.reason;if("fulfilled"!==r.status)throw r;t=r.value;var n=new FormData;t.forEach(function(t,r){n.append("$ACTION_"+e+":"+r,t)}),r=n,t="$ACTION_REF_"+e}else t="$ACTION_ID_"+t.id;return{name:t,method:"POST",encType:"multipart/form-data",data:r}}function na(e,t){var r=G.get(this);if(!r)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");if(r.id!==e)return!1;var n=r.bound;if(null===n)return 0===t;switch(n.status){case"fulfilled":return n.value.length===t;case"pending":throw n;case"rejected":throw n.reason;default:throw"string"!=typeof n.status&&(n.status="pending",n.then(function(e){n.status="fulfilled",n.value=e},function(e){n.status="rejected",n.reason=e})),n}}function H(e,t){Object.defineProperties(e,{$$FORM_ACTION:{value:ma},$$IS_SIGNATURE_EQUAL:{value:na},bind:{value:oa}}),G.set(e,t)}var et=Function.prototype.bind,er=Array.prototype.slice;function oa(){var e=et.apply(this,arguments),t=G.get(this);if(t){var r=er.call(arguments,1),n=null;n=null!==t.bound?Promise.resolve(t.bound).then(function(e){return e.concat(r)}):Promise.resolve(r),H(e,{id:t.id,bound:n})}return e}function ra(e,t){function c(){var r=Array.prototype.slice.call(arguments);return t(e,r)}return H(c,{id:e,bound:null}),c}var en=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ContextRegistry;function J(e,t,r,n){this.status=e,this.value=t,this.reason=r,this._response=n}function sa(e){switch(e.status){case"resolved_model":L(e);break;case"resolved_module":M(e)}switch(e.status){case"fulfilled":return e.value;case"pending":case"blocked":case"cyclic":throw e;default:throw e.reason}}function N(e,t){for(var r=0;r<e.length;r++)(0,e[r])(t)}function O(e,t,r){switch(e.status){case"fulfilled":N(t,e.value);break;case"pending":case"blocked":case"cyclic":e.value=t,e.reason=r;break;case"rejected":r&&N(r,e.reason)}}function P(e,t){if("pending"===e.status||"blocked"===e.status){var r=e.reason;e.status="rejected",e.reason=t,null!==r&&N(r,t)}}function Q(e,t){if("pending"===e.status||"blocked"===e.status){var r=e.value,n=e.reason;e.status="resolved_module",e.value=t,null!==r&&(M(e),O(e,r,n))}}J.prototype=Object.create(Promise.prototype),J.prototype.then=function(e,t){switch(this.status){case"resolved_model":L(this);break;case"resolved_module":M(this)}switch(this.status){case"fulfilled":e(this.value);break;case"pending":case"blocked":case"cyclic":e&&(null===this.value&&(this.value=[]),this.value.push(e)),t&&(null===this.reason&&(this.reason=[]),this.reason.push(t));break;default:t(this.reason)}};var eo=null,ei=null;function L(e){var t=eo,r=ei;eo=e,ei=null;var n=e.value;e.status="cyclic",e.value=null,e.reason=null;try{var o=JSON.parse(n,e._response._fromJSON);if(null!==ei&&0<ei.deps)ei.value=o,e.status="blocked",e.value=null,e.reason=null;else{var i=e.value;e.status="fulfilled",e.value=o,null!==i&&N(i,o)}}catch(t){e.status="rejected",e.reason=t}finally{eo=t,ei=r}}function M(e){try{var t=e.value,r=globalThis.__next_require__(t[0]);if(4===t.length&&"function"==typeof r.then){if("fulfilled"===r.status)r=r.value;else throw r.reason}var n="*"===t[2]?r:""===t[2]?r.__esModule?r.default:r:r[t[2]];e.status="fulfilled",e.value=n}catch(t){e.status="rejected",e.reason=t}}function T(e,t){e._chunks.forEach(function(e){"pending"===e.status&&P(e,t)})}function U(e,t){var r=e._chunks,n=r.get(t);return n||(n=new J("pending",null,null,e),r.set(t,n)),n}function ta(e,t,r,n){if(ei){var o=ei;n||o.deps++}else o=ei={deps:n?0:1,value:null};return function(n){t[r]=n,o.deps--,0===o.deps&&"blocked"===e.status&&(n=e.value,e.status="fulfilled",e.value=o.value,null!==n&&N(n,o.value))}}function ua(e){return function(t){return P(e,t)}}function va(e,t){function c(){var e=Array.prototype.slice.call(arguments),n=t.bound;return n?"fulfilled"===n.status?r(t.id,n.value.concat(e)):Promise.resolve(n).then(function(n){return r(t.id,n.concat(e))}):r(t.id,e)}var r=e._callServer;return H(c,t),c}function W(e,t){if("resolved_model"===(e=U(e,t)).status&&L(e),"fulfilled"===e.status)return e.value;throw e.reason}function wa(e,t,r,n){if("$"===n[0]){if("$"===n)return y;switch(n[1]){case"$":return n.slice(1);case"L":return{$$typeof:R,_payload:e=U(e,t=parseInt(n.slice(2),16)),_init:sa};case"@":return U(e,t=parseInt(n.slice(2),16));case"S":return Symbol.for(n.slice(2));case"P":return en[e=n.slice(2)]||((t={$$typeof:E,_currentValue:D,_currentValue2:D,_defaultValue:D,_threadCount:0,Provider:null,Consumer:null,_globalName:e}).Provider={$$typeof:S,_context:t},en[e]=t),en[e].Provider;case"F":return t=W(e,t=parseInt(n.slice(2),16)),va(e,t);case"Q":return e=W(e,t=parseInt(n.slice(2),16)),new Map(e);case"W":return e=W(e,t=parseInt(n.slice(2),16)),new Set(e);case"I":return 1/0;case"-":return"$-0"===n?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(n.slice(2)));case"n":return BigInt(n.slice(2));default:switch((e=U(e,n=parseInt(n.slice(1),16))).status){case"resolved_model":L(e);break;case"resolved_module":M(e)}switch(e.status){case"fulfilled":return e.value;case"pending":case"blocked":case"cyclic":return n=eo,e.then(ta(n,t,r,"cyclic"===e.status),ua(n)),null;default:throw e.reason}}}return n}function xa(){throw Error('Trying to call a function from "use server" but the callServer option was not implemented in your router runtime.')}function ya(e,t,r){var n=e._chunks,o=n.get(t);r=JSON.parse(r,e._fromJSON);var i=v(e._bundlerConfig,r);if(ca(e._moduleLoading,r[1],e._nonce),r=ba(i)){if(o){var u=o;u.status="blocked"}else u=new J("blocked",null,null,e),n.set(t,u);r.then(function(){return Q(u,i)},function(e){return P(u,e)})}else o?Q(o,i):n.set(t,new J("resolved_module",i,null,e))}function za(e){return function(t,r){return"string"==typeof r?wa(e,this,t,r):"object"==typeof r&&null!==r?t=r[0]===y?{$$typeof:y,type:r[1],key:r[2],ref:null,props:r[3],_owner:null}:r:r}}function X(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}function Y(e){var t=e.ssrManifest.moduleMap;return(t={_bundlerConfig:t,_moduleLoading:e.ssrManifest.moduleLoading,_callServer:void 0!==X?X:xa,_nonce:e="string"==typeof e.nonce?e.nonce:void 0,_chunks:new Map,_stringDecoder:new TextDecoder,_fromJSON:null,_rowState:0,_rowID:0,_rowTag:0,_rowLength:0,_buffer:[]})._fromJSON=za(t),t}function Z(e,t){function c(t){var n=t.value;if(t.done)T(e,Error("Connection closed."));else{var o=0,u=e._rowState,y=e._rowID,S=e._rowTag,E=e._rowLength;t=e._buffer;for(var R=n.length;o<R;){var D=-1;switch(u){case 0:58===(D=n[o++])?u=1:y=y<<4|(96<D?D-87:D-48);continue;case 1:84===(u=n[o])?(S=u,u=2,o++):64<u&&91>u?(S=u,u=3,o++):(S=0,u=3);continue;case 2:44===(D=n[o++])?u=4:E=E<<4|(96<D?D-87:D-48);continue;case 3:D=n.indexOf(10,o);break;case 4:(D=o+E)>n.length&&(D=-1)}var K=n.byteOffset+o;if(-1<D){o=new Uint8Array(n.buffer,K,D-o),E=e,K=S;var B=E._stringDecoder;S="";for(var V=0;V<t.length;V++)S+=B.decode(t[V],i);switch(S+=B.decode(o),K){case 73:ya(E,y,S);break;case 72:if(y=S[0],E=JSON.parse(S=S.slice(1),E._fromJSON),S=h.current)switch(y){case"D":S.prefetchDNS(E);break;case"C":"string"==typeof E?S.preconnect(E):S.preconnect(E[0],E[1]);break;case"L":y=E[0],o=E[1],3===E.length?S.preload(y,o,E[2]):S.preload(y,o);break;case"m":"string"==typeof E?S.preloadModule(E):S.preloadModule(E[0],E[1]);break;case"S":"string"==typeof E?S.preinitStyle(E):S.preinitStyle(E[0],0===E[1]?void 0:E[1],3===E.length?E[2]:void 0);break;case"X":"string"==typeof E?S.preinitScript(E):S.preinitScript(E[0],E[1]);break;case"M":"string"==typeof E?S.preinitModuleScript(E):S.preinitModuleScript(E[0],E[1])}break;case 69:o=(S=JSON.parse(S)).digest,(S=Error("An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.")).stack="Error: "+S.message,S.digest=o,(K=(o=E._chunks).get(y))?P(K,S):o.set(y,new J("rejected",null,S,E));break;case 84:E._chunks.set(y,new J("fulfilled",S,null,E));break;default:(K=(o=E._chunks).get(y))?(E=K,y=S,"pending"===E.status&&(S=E.value,o=E.reason,E.status="resolved_model",E.value=y,null!==S&&(L(E),O(E,S,o)))):o.set(y,new J("resolved_model",S,null,E))}o=D,3===u&&o++,E=y=S=u=0,t.length=0}else{n=new Uint8Array(n.buffer,K,n.byteLength-o),t.push(n),E-=n.byteLength;break}}return e._rowState=u,e._rowID=y,e._rowTag=S,e._rowLength=E,r.read().then(c).catch(d)}}function d(t){T(e,t)}var r=t.getReader();r.read().then(c).catch(d)}t.createFromFetch=function(e,t){var r=Y(t);return e.then(function(e){Z(r,e.body)},function(e){T(r,e)}),U(r,0)},t.createFromReadableStream=function(e,t){return Z(t=Y(t),e),U(t,0)},t.createServerReference=function(e){return ra(e,X)},t.encodeReply=function(e){return new Promise(function(t,r){F(e,"",t,r)})}},73696:(e,t,r)=>{"use strict";e.exports=r(87349)},41214:()=>{},53912:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DetachedPromise",{enumerable:!0,get:function(){return DetachedPromise}});let DetachedPromise=class DetachedPromise{constructor(){let e,t;this.promise=new Promise((r,n)=>{e=r,t=n}),this.resolve=e,this.reject=t}}},89564:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{scheduleOnNextTick:function(){return scheduleOnNextTick},scheduleImmediate:function(){return scheduleImmediate}});let scheduleOnNextTick=e=>{Promise.resolve().then(()=>{process.nextTick(e)})},scheduleImmediate=e=>{setImmediate(e)}},22271:(e,t)=>{"use strict";let r,n;function arrayBufferToString(e){let t=new Uint8Array(e),r=t.byteLength;if(r<65535)return String.fromCharCode.apply(null,t);let n="";for(let e=0;e<r;e++)n+=String.fromCharCode(t[e]);return n}function stringToUint8Array(e){let t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function encrypt(e,t,r){return crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,r)}function decrypt(e,t,r){return crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r)}async function generateRandomActionKeyRaw(e){if(e&&void 0!==n)return n;let t=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),o=await crypto.subtle.exportKey("raw",t),i=btoa(arrayBufferToString(o));return r=t,e&&(n=i),i}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{arrayBufferToString:function(){return arrayBufferToString},stringToUint8Array:function(){return stringToUint8Array},encrypt:function(){return encrypt},decrypt:function(){return decrypt},generateRandomActionKeyRaw:function(){return generateRandomActionKeyRaw},setReferenceManifestsSingleton:function(){return setReferenceManifestsSingleton},getServerModuleMap:function(){return getServerModuleMap},getClientReferenceManifestSingleton:function(){return getClientReferenceManifestSingleton},getActionEncryptionKey:function(){return getActionEncryptionKey}});let o=Symbol.for("next.server.action-manifests");function setReferenceManifestsSingleton({clientReferenceManifest:e,serverActionsManifest:t,serverModuleMap:r}){globalThis[o]={clientReferenceManifest:e,serverActionsManifest:t,serverModuleMap:r}}function getServerModuleMap(){let e=globalThis[o];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");return e.serverModuleMap}function getClientReferenceManifestSingleton(){let e=globalThis[o];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");return e.clientReferenceManifest}async function getActionEncryptionKey(){if(r)return r;let e=globalThis[o];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");let t=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===t)throw Error("Missing encryption key for Server Actions");return r=await crypto.subtle.importKey("raw",stringToUint8Array(atob(t)),"AES-GCM",!0,["encrypt","decrypt"])}},99195:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{encryptActionBoundArgs:function(){return encryptActionBoundArgs},decryptActionBoundArgs:function(){return decryptActionBoundArgs}}),r(41214);let n=r(55951),o=r(73696),i=r(8323),u=r(22271);async function decodeActionBoundArg(e,t){let r=await (0,u.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=atob(t),o=n.slice(0,16),i=n.slice(16);if(void 0===i)throw Error("Invalid Server Action payload.");let h=(0,u.arrayBufferToString)(await (0,u.decrypt)(r,(0,u.stringToUint8Array)(o),(0,u.stringToUint8Array)(i)));if(!h.startsWith(e))throw Error("Invalid Server Action payload: failed to decrypt.");return h.slice(e.length)}async function encodeActionBoundArg(e,t){let r=await (0,u.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=new Uint8Array(16);crypto.getRandomValues(n);let o=(0,u.arrayBufferToString)(n.buffer),i=await (0,u.encrypt)(r,n,(0,u.stringToUint8Array)(e+t));return btoa(o+(0,u.arrayBufferToString)(i))}async function encryptActionBoundArgs(e,t){let r=(0,u.getClientReferenceManifestSingleton)(),o=await (0,i.streamToString)((0,n.renderToReadableStream)(t,r.clientModules)),h=await encodeActionBoundArg(e,o);return h}async function decryptActionBoundArgs(e,t){let r=await decodeActionBoundArg(e,await t),i=await (0,o.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(new TextEncoder().encode(r)),e.close()}}),{ssrManifest:{moduleLoading:{},moduleMap:{}}}),h=(0,u.getServerModuleMap)(),y=await (0,n.decodeReply)(await (0,o.encodeReply)(i),h);return y}},25781:(e,t,r)=>{"use strict";e.exports=r(67096).vendored.contexts.AppRouterContext},18170:(e,t,r)=>{"use strict";e.exports=r(67096).vendored.contexts.HooksClientContext},41626:(e,t,r)=>{"use strict";e.exports=r(67096).vendored.contexts.ServerInsertedHtml},44875:(e,t)=>{"use strict";var r,n,o,i,u,h,y,S,E,R,D;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{NextVanillaSpanAllowlist:function(){return K},BaseServerSpan:function(){return r},LoadComponentsSpan:function(){return n},NextServerSpan:function(){return o},NextNodeServerSpan:function(){return i},StartServerSpan:function(){return u},RenderSpan:function(){return h},RouterSpan:function(){return S},AppRenderSpan:function(){return y},NodeSpan:function(){return E},AppRouteRouteHandlersSpan:function(){return R},ResolveMetadataSpan:function(){return D}}),function(e){e.handleRequest="BaseServer.handleRequest",e.run="BaseServer.run",e.pipe="BaseServer.pipe",e.getStaticHTML="BaseServer.getStaticHTML",e.render="BaseServer.render",e.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",e.renderToResponse="BaseServer.renderToResponse",e.renderToHTML="BaseServer.renderToHTML",e.renderError="BaseServer.renderError",e.renderErrorToResponse="BaseServer.renderErrorToResponse",e.renderErrorToHTML="BaseServer.renderErrorToHTML",e.render404="BaseServer.render404"}(r||(r={})),function(e){e.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents"}(n||(n={})),function(e){e.getRequestHandler="NextServer.getRequestHandler",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer"}(o||(o={})),function(e){e.compression="NextNodeServer.compression",e.getBuildId="NextNodeServer.getBuildId",e.generateStaticRoutes="NextNodeServer.generateStaticRoutes",e.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",e.generatePublicRoutes="NextNodeServer.generatePublicRoutes",e.generateImageRoutes="NextNodeServer.generateImageRoutes.route",e.sendRenderResult="NextNodeServer.sendRenderResult",e.proxyRequest="NextNodeServer.proxyRequest",e.runApi="NextNodeServer.runApi",e.render="NextNodeServer.render",e.renderHTML="NextNodeServer.renderHTML",e.imageOptimizer="NextNodeServer.imageOptimizer",e.getPagePath="NextNodeServer.getPagePath",e.getRoutesManifest="NextNodeServer.getRoutesManifest",e.findPageComponents="NextNodeServer.findPageComponents",e.getFontManifest="NextNodeServer.getFontManifest",e.getServerComponentManifest="NextNodeServer.getServerComponentManifest",e.getRequestHandler="NextNodeServer.getRequestHandler",e.renderToHTML="NextNodeServer.renderToHTML",e.renderError="NextNodeServer.renderError",e.renderErrorToHTML="NextNodeServer.renderErrorToHTML",e.render404="NextNodeServer.render404",e.route="route",e.onProxyReq="onProxyReq",e.apiResolver="apiResolver",e.internalFetch="internalFetch"}(i||(i={})),(u||(u={})).startServer="startServer.startServer",function(e){e.getServerSideProps="Render.getServerSideProps",e.getStaticProps="Render.getStaticProps",e.renderToString="Render.renderToString",e.renderDocument="Render.renderDocument",e.createBodyResult="Render.createBodyResult"}(h||(h={})),function(e){e.renderToString="AppRender.renderToString",e.renderToReadableStream="AppRender.renderToReadableStream",e.getBodyResult="AppRender.getBodyResult",e.fetch="AppRender.fetch"}(y||(y={})),(S||(S={})).executeRoute="Router.executeRoute",(E||(E={})).runHandler="Node.runHandler",(R||(R={})).runHandler="AppRouteRouteHandlers.runHandler",function(e){e.generateMetadata="ResolveMetadata.generateMetadata",e.generateViewport="ResolveMetadata.generateViewport"}(D||(D={}));let K=["BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport"]},14640:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getTracer:function(){return B},SpanStatusCode:function(){return y},SpanKind:function(){return S}});let o=r(44875);try{n=r(54389)}catch(e){n=r(54389)}let{context:i,propagation:u,trace:h,SpanStatusCode:y,SpanKind:S,ROOT_CONTEXT:E}=n,isPromise=e=>null!==e&&"object"==typeof e&&"function"==typeof e.then,closeSpanWithError=(e,t)=>{(null==t?void 0:t.bubble)===!0?e.setAttribute("next.bubble",!0):(t&&e.recordException(t),e.setStatus({code:y.ERROR,message:null==t?void 0:t.message})),e.end()},R=new Map,D=n.createContextKey("next.rootSpanId"),K=0,getSpanId=()=>K++;let NextTracerImpl=class NextTracerImpl{getTracerInstance(){return h.getTracer("next.js","0.0.1")}getContext(){return i}getActiveScopeSpan(){return h.getSpan(null==i?void 0:i.active())}withPropagatedContext(e,t){if(i.active()!==E)return t();let r=u.extract(E,e.headers);return i.with(r,t)}trace(...e){var t;let[r,n,u]=e,{fn:y,options:S}="function"==typeof n?{fn:n,options:{}}:{fn:u,options:{...n}};if(!o.NextVanillaSpanAllowlist.includes(r)&&"1"!==process.env.NEXT_OTEL_VERBOSE||S.hideSpan)return y();let K=S.spanName??r,B=this.getSpanContext((null==S?void 0:S.parentSpan)??this.getActiveScopeSpan()),V=!1;B?(null==(t=h.getSpanContext(B))?void 0:t.isRemote)&&(V=!0):(B=E,V=!0);let q=getSpanId();return S.attributes={"next.span_name":K,"next.span_type":r,...S.attributes},i.with(B.setValue(D,q),()=>this.getTracerInstance().startActiveSpan(K,S,e=>{let onCleanup=()=>{R.delete(q)};V&&R.set(q,new Map(Object.entries(S.attributes??{})));try{if(y.length>1)return y(e,t=>closeSpanWithError(e,t));let t=y(e);return isPromise(t)?t.then(()=>e.end(),t=>closeSpanWithError(e,t)).finally(onCleanup):(e.end(),onCleanup()),t}catch(t){throw closeSpanWithError(e,t),onCleanup(),t}}))}wrap(...e){let t=this,[r,n,u]=3===e.length?e:[e[0],{},e[1]];return o.NextVanillaSpanAllowlist.includes(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof u&&(e=e.apply(this,arguments));let o=arguments.length-1,h=arguments[o];if("function"!=typeof h)return t.trace(r,e,()=>u.apply(this,arguments));{let n=t.getContext().bind(i.active(),h);return t.trace(r,e,(e,t)=>(arguments[o]=function(e){return null==t||t(e),n.apply(this,arguments)},u.apply(this,arguments)))}}:u}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){let t=e?h.setSpan(i.active(),e):void 0;return t}getRootSpanAttributes(){let e=i.active().getValue(D);return R.get(e)}};let B=(()=>{let e=new NextTracerImpl;return()=>e})()},32015:(e,t)=>{"use strict";function createDecodeTransformStream(e=new TextDecoder){return new TransformStream({transform:(t,r)=>r.enqueue(e.decode(t,{stream:!0})),flush:t=>t.enqueue(e.decode())})}function createEncodeTransformStream(e=new TextEncoder){return new TransformStream({transform:(t,r)=>r.enqueue(e.encode(t))})}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{createDecodeTransformStream:function(){return createDecodeTransformStream},createEncodeTransformStream:function(){return createEncodeTransformStream}})},8323:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{cloneTransformStream:function(){return cloneTransformStream},chainStreams:function(){return chainStreams},streamFromString:function(){return streamFromString},streamToString:function(){return streamToString},createBufferedTransformStream:function(){return createBufferedTransformStream},renderToInitialFizzStream:function(){return renderToInitialFizzStream},createRootLayoutValidatorStream:function(){return createRootLayoutValidatorStream},continueFizzStream:function(){return continueFizzStream},continuePostponedFizzStream:function(){return continuePostponedFizzStream}});let n=r(14640),o=r(44875),i=r(32015),u=r(53912),h=r(89564);function cloneTransformStream(e){let t=e.readable.getReader(),r=new TransformStream({async start(e){for(;;){let{done:r,value:n}=await t.read();if(r)break;e.enqueue(n)}},transform(){}});return r}function chainStreams(...e){let{readable:t,writable:r}=new TransformStream,n=Promise.resolve();for(let t=0;t<e.length;++t)n=n.then(()=>e[t].pipeTo(r,{preventClose:t+1<e.length}));return n.catch(()=>{}),t}function streamFromString(e){let t=new TextEncoder;return new ReadableStream({start(r){r.enqueue(t.encode(e)),r.close()}})}async function streamToString(e){let t="";return await e.pipeThrough((0,i.createDecodeTransformStream)()).pipeTo(new WritableStream({write(e){t+=e}})),t}function createBufferedTransformStream(){let e,t=new Uint8Array,flush=r=>{if(e)return;let n=new u.DetachedPromise;e=n,(0,h.scheduleImmediate)(()=>{try{r.enqueue(t),t=new Uint8Array}catch{}finally{e=void 0,n.resolve()}})};return new TransformStream({transform(e,r){let n=new Uint8Array(t.length+e.byteLength);n.set(t),n.set(e,t.length),t=n,flush(r)},flush(){if(e)return e.promise}})}function createInsertedHTMLStream(e){let t=new TextEncoder;return new TransformStream({transform:async(r,n)=>{let o=await e();o&&n.enqueue(t.encode(o)),n.enqueue(r)}})}function renderToInitialFizzStream({ReactDOMServer:e,element:t,streamOptions:r}){return(0,n.getTracer)().trace(o.AppRenderSpan.renderToReadableStream,async()=>e.renderToReadableStream(t,r))}function createHeadInsertionTransformStream(e){let t=!1,r=!1,n=new TextEncoder,o=new TextDecoder;return new TransformStream({async transform(i,u){if(r){u.enqueue(i);return}let y=await e();if(t)u.enqueue(n.encode(y)),u.enqueue(i),r=!0;else{let e=o.decode(i),h=e.indexOf("</head>");if(-1!==h){let o=e.slice(0,h)+y+e.slice(h);u.enqueue(n.encode(o)),r=!0,t=!0}}t?(0,h.scheduleImmediate)(()=>{r=!1}):u.enqueue(i)},async flush(t){let r=await e();r&&t.enqueue(n.encode(r))}})}function createDeferredSuffixStream(e){let t,r=!1,n=new TextEncoder,flush=r=>{let o=new u.DetachedPromise;t=o,(0,h.scheduleImmediate)(()=>{try{r.enqueue(n.encode(e))}catch{}finally{t=void 0,o.resolve()}})};return new TransformStream({transform(e,t){t.enqueue(e),r||(r=!0,flush(t))},flush(o){if(t)return t.promise;r||o.enqueue(n.encode(e))}})}function createMergedTransformStream(e){let t=!1,r=null,start=t=>{let n=e.getReader(),o=new u.DetachedPromise;r=o,(0,h.scheduleImmediate)(async()=>{try{for(;;){let{done:e,value:r}=await n.read();if(e)return;t.enqueue(r)}}catch(e){t.error(e)}finally{o.resolve()}})};return new TransformStream({transform(e,r){r.enqueue(e),t||(t=!0,start(r))},flush(){if(r&&t)return r.promise}})}function createMoveSuffixStream(e){let t=!1,r=new TextEncoder,n=new TextDecoder;return new TransformStream({transform(o,i){if(t)return i.enqueue(o);let u=n.decode(o),h=u.indexOf(e);if(h>-1){if(t=!0,u.length===e.length)return;let n=u.slice(0,h);if(o=r.encode(n),i.enqueue(o),u.length>e.length+h){let t=u.slice(h+e.length);o=r.encode(t),i.enqueue(o)}}else i.enqueue(o)},flush(t){t.enqueue(r.encode(e))}})}function createRootLayoutValidatorStream(e="",t){let r=!1,n=!1,o=new TextEncoder,i=new TextDecoder,u="";return new TransformStream({async transform(e,t){(!r||!n)&&(u+=i.decode(e,{stream:!0}),!r&&u.includes("<html")&&(r=!0),!n&&u.includes("<body")&&(n=!0)),t.enqueue(e)},flush(h){(!r||!n)&&(u+=i.decode(),!r&&u.includes("<html")&&(r=!0),!n&&u.includes("<body")&&(n=!0));let y=[];r||y.push("html"),n||y.push("body"),y.length>0&&h.enqueue(o.encode(`<script>self.__next_root_layout_missing_tags_error=${JSON.stringify({missingTags:y,assetPrefix:e??"",tree:t()})}</script>`))}})}function chainTransformers(e,t){let r=e;for(let e of t)e&&(r=r.pipeThrough(e));return r}async function continueFizzStream(e,{suffix:t,inlinedDataStream:r,generateStaticHTML:n,getServerInsertedHTML:o,serverInsertedHTMLToHead:i,validateRootLayout:u}){let h="</body></html>",y=t?t.split(h,1)[0]:null;return n&&"allReady"in e&&await e.allReady,chainTransformers(e,[createBufferedTransformStream(),o&&!i?createInsertedHTMLStream(o):null,null!=y&&y.length>0?createDeferredSuffixStream(y):null,r?createMergedTransformStream(r):null,createMoveSuffixStream(h),o&&i?createHeadInsertionTransformStream(o):null,u?createRootLayoutValidatorStream(u.assetPrefix,u.getTree):null])}async function continuePostponedFizzStream(e,{inlinedDataStream:t,generateStaticHTML:r,getServerInsertedHTML:n,serverInsertedHTMLToHead:o}){return r&&"allReady"in e&&await e.allReady,chainTransformers(e,[createBufferedTransformStream(),n&&!o?createInsertedHTMLStream(n):null,t?createMergedTransformStream(t):null,createMoveSuffixStream("</body></html>")])}},95798:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.NextResponse}});let n=r(63172)},56863:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NextURL",{enumerable:!0,get:function(){return NextURL}});let n=r(95331),o=r(29387),i=r(53490),u=r(50470),h=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function parseURL(e,t){return new URL(String(e).replace(h,"localhost"),t&&String(t).replace(h,"localhost"))}let y=Symbol("NextURLInternal");let NextURL=class NextURL{constructor(e,t,r){let n,o;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,o=r||{}):o=r||t||{},this[y]={url:parseURL(e,n??o.base),options:o,basePath:""},this.analyze()}analyze(){var e,t,r,o,h;let S=(0,u.getNextPathnameInfo)(this[y].url.pathname,{nextConfig:this[y].options.nextConfig,parseData:!0,i18nProvider:this[y].options.i18nProvider}),E=(0,i.getHostname)(this[y].url,this[y].options.headers);this[y].domainLocale=this[y].options.i18nProvider?this[y].options.i18nProvider.detectDomainLocale(E):(0,n.detectDomainLocale)(null==(t=this[y].options.nextConfig)?void 0:null==(e=t.i18n)?void 0:e.domains,E);let R=(null==(r=this[y].domainLocale)?void 0:r.defaultLocale)||(null==(h=this[y].options.nextConfig)?void 0:null==(o=h.i18n)?void 0:o.defaultLocale);this[y].url.pathname=S.pathname,this[y].defaultLocale=R,this[y].basePath=S.basePath??"",this[y].buildId=S.buildId,this[y].locale=S.locale??R,this[y].trailingSlash=S.trailingSlash}formatPathname(){return(0,o.formatNextPathnameInfo)({basePath:this[y].basePath,buildId:this[y].buildId,defaultLocale:this[y].options.forceLocale?void 0:this[y].defaultLocale,locale:this[y].locale,pathname:this[y].url.pathname,trailingSlash:this[y].trailingSlash})}formatSearch(){return this[y].url.search}get buildId(){return this[y].buildId}set buildId(e){this[y].buildId=e}get locale(){return this[y].locale??""}set locale(e){var t,r;if(!this[y].locale||!(null==(r=this[y].options.nextConfig)?void 0:null==(t=r.i18n)?void 0:t.locales.includes(e)))throw TypeError(`The NextURL configuration includes no locale "${e}"`);this[y].locale=e}get defaultLocale(){return this[y].defaultLocale}get domainLocale(){return this[y].domainLocale}get searchParams(){return this[y].url.searchParams}get host(){return this[y].url.host}set host(e){this[y].url.host=e}get hostname(){return this[y].url.hostname}set hostname(e){this[y].url.hostname=e}get port(){return this[y].url.port}set port(e){this[y].url.port=e}get protocol(){return this[y].url.protocol}set protocol(e){this[y].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[y].url=parseURL(e),this.analyze()}get origin(){return this[y].url.origin}get pathname(){return this[y].url.pathname}set pathname(e){this[y].url.pathname=e}get hash(){return this[y].url.hash}set hash(e){this[y].url.hash=e}get search(){return this[y].url.search}set search(e){this[y].url.search=e}get password(){return this[y].url.password}set password(e){this[y].url.password=e}get username(){return this[y].url.username}set username(e){this[y].url.username=e}get basePath(){return this[y].basePath}set basePath(e){this[y].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new NextURL(String(this),this[y].options)}}},21306:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyHeadersError:function(){return ReadonlyHeadersError},HeadersAdapter:function(){return HeadersAdapter}});let n=r(49165);let ReadonlyHeadersError=class ReadonlyHeadersError extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new ReadonlyHeadersError}};let HeadersAdapter=class HeadersAdapter extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,o){if("symbol"==typeof r)return n.ReflectAdapter.get(t,r,o);let i=r.toLowerCase(),u=Object.keys(e).find(e=>e.toLowerCase()===i);if(void 0!==u)return n.ReflectAdapter.get(t,u,o)},set(t,r,o,i){if("symbol"==typeof r)return n.ReflectAdapter.set(t,r,o,i);let u=r.toLowerCase(),h=Object.keys(e).find(e=>e.toLowerCase()===u);return n.ReflectAdapter.set(t,h??r,o,i)},has(t,r){if("symbol"==typeof r)return n.ReflectAdapter.has(t,r);let o=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===o);return void 0!==i&&n.ReflectAdapter.has(t,i)},deleteProperty(t,r){if("symbol"==typeof r)return n.ReflectAdapter.deleteProperty(t,r);let o=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===o);return void 0===i||n.ReflectAdapter.deleteProperty(t,i)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return ReadonlyHeadersError.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new HeadersAdapter(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},49165:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return ReflectAdapter}});let ReflectAdapter=class ReflectAdapter{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},96888:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyRequestCookiesError:function(){return ReadonlyRequestCookiesError},RequestCookiesAdapter:function(){return RequestCookiesAdapter},getModifiedCookieValues:function(){return getModifiedCookieValues},appendMutableCookies:function(){return appendMutableCookies},MutableRequestCookiesAdapter:function(){return MutableRequestCookiesAdapter}});let n=r(76449),o=r(49165);let ReadonlyRequestCookiesError=class ReadonlyRequestCookiesError extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new ReadonlyRequestCookiesError}};let RequestCookiesAdapter=class RequestCookiesAdapter{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return ReadonlyRequestCookiesError.callable;default:return o.ReflectAdapter.get(e,t,r)}}})}};let i=Symbol.for("next.mutated.cookies");function getModifiedCookieValues(e){let t=e[i];return t&&Array.isArray(t)&&0!==t.length?t:[]}function appendMutableCookies(e,t){let r=getModifiedCookieValues(t);if(0===r.length)return!1;let o=new n.ResponseCookies(e),i=o.getAll();for(let e of r)o.set(e);for(let e of i)o.set(e);return!0}let MutableRequestCookiesAdapter=class MutableRequestCookiesAdapter{static wrap(e,t){let r=new n.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let u=[],h=new Set,updateResponseCookies=()=>{var e;let o=null==fetch.__nextGetStaticStore?void 0:null==(e=fetch.__nextGetStaticStore.call(fetch))?void 0:e.getStore();o&&(o.pathWasRevalidated=!0);let i=r.getAll();if(u=i.filter(e=>h.has(e.name)),t){let e=[];for(let t of u){let r=new n.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}};return new Proxy(r,{get(e,t,r){switch(t){case i:return u;case"delete":return function(...t){h.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{updateResponseCookies()}};case"set":return function(...t){h.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{updateResponseCookies()}};default:return o.ReflectAdapter.get(e,t,r)}}})}}},76449:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RequestCookies:function(){return n.RequestCookies},ResponseCookies:function(){return n.ResponseCookies}});let n=r(30989)},63172:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NextResponse",{enumerable:!0,get:function(){return NextResponse}});let n=r(56863),o=r(66729),i=r(76449),u=Symbol("internal response"),h=new Set([301,302,303,307,308]);function handleMiddlewareField(e,t){var r;if(null==e?void 0:null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let r=[];for(let[n,o]of e.request.headers)t.set("x-middleware-request-"+n,o),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}let NextResponse=class NextResponse extends Response{constructor(e,t={}){super(e,t),this[u]={cookies:new i.ResponseCookies(this.headers),url:t.url?new n.NextURL(t.url,{headers:(0,o.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[u].cookies}static json(e,t){let r=Response.json(e,t);return new NextResponse(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!h.has(r))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",(0,o.validateURL)(e)),new NextResponse(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,o.validateURL)(e)),handleMiddlewareField(t,r),new NextResponse(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),handleMiddlewareField(e,t),new NextResponse(null,{...e,headers:t})}}},66729:(e,t)=>{"use strict";function fromNodeOutgoingHttpHeaders(e){let t=new Headers;for(let[r,n]of Object.entries(e)){let e=Array.isArray(n)?n:[n];for(let n of e)void 0!==n&&("number"==typeof n&&(n=n.toString()),t.append(r,n))}return t}function splitCookiesString(e){var t,r,n,o,i,u=[],h=0;function skipWhitespace(){for(;h<e.length&&/\s/.test(e.charAt(h));)h+=1;return h<e.length}function notSpecialChar(){return"="!==(r=e.charAt(h))&&";"!==r&&","!==r}for(;h<e.length;){for(t=h,i=!1;skipWhitespace();)if(","===(r=e.charAt(h))){for(n=h,h+=1,skipWhitespace(),o=h;h<e.length&&notSpecialChar();)h+=1;h<e.length&&"="===e.charAt(h)?(i=!0,h=o,u.push(e.substring(t,n)),t=h):h=n+1}else h+=1;(!i||h>=e.length)&&u.push(e.substring(t,e.length))}return u}function toNodeOutgoingHttpHeaders(e){let t={},r=[];if(e)for(let[n,o]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...splitCookiesString(o)),t[n]=1===r.length?r[0]:r):t[n]=o;return t}function validateURL(e){try{return String(new URL(String(e)))}catch(t){throw Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t})}}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{fromNodeOutgoingHttpHeaders:function(){return fromNodeOutgoingHttpHeaders},splitCookiesString:function(){return splitCookiesString},toNodeOutgoingHttpHeaders:function(){return toNodeOutgoingHttpHeaders},validateURL:function(){return validateURL}})},53490:(e,t)=>{"use strict";function getHostname(e,t){let r;if((null==t?void 0:t.host)&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getHostname",{enumerable:!0,get:function(){return getHostname}})},95331:(e,t)=>{"use strict";function detectDomainLocale(e,t,r){if(e)for(let i of(r&&(r=r.toLowerCase()),e)){var n,o;let e=null==(n=i.domain)?void 0:n.split(":",1)[0].toLowerCase();if(t===e||r===i.defaultLocale.toLowerCase()||(null==(o=i.locales)?void 0:o.some(e=>e.toLowerCase()===r)))return i}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"detectDomainLocale",{enumerable:!0,get:function(){return detectDomainLocale}})},15259:(e,t)=>{"use strict";function normalizeLocalePath(e,t){let r;let n=e.split("/");return(t||[]).some(t=>!!n[1]&&n[1].toLowerCase()===t.toLowerCase()&&(r=t,n.splice(1,1),e=n.join("/")||"/",!0)),{pathname:e,detectedLocale:r}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizeLocalePath",{enumerable:!0,get:function(){return normalizeLocalePath}})},21334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{NEXT_DYNAMIC_NO_SSR_CODE:function(){return r},throwWithNoSSR:function(){return throwWithNoSSR}});let r="NEXT_DYNAMIC_NO_SSR_CODE";function throwWithNoSSR(){let e=Error(r);throw e.digest=r,e}},45477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return addLocale}});let n=r(72721),o=r(69203);function addLocale(e,t,r,i){if(!t||t===r)return e;let u=e.toLowerCase();return!i&&((0,o.pathHasPrefix)(u,"/api")||(0,o.pathHasPrefix)(u,"/"+t.toLowerCase()))?e:(0,n.addPathPrefix)(e,"/"+t)}},72721:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addPathPrefix",{enumerable:!0,get:function(){return addPathPrefix}});let n=r(11193);function addPathPrefix(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:o,hash:i}=(0,n.parsePath)(e);return""+t+r+o+i}},99428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addPathSuffix",{enumerable:!0,get:function(){return addPathSuffix}});let n=r(11193);function addPathSuffix(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:o,hash:i}=(0,n.parsePath)(e);return""+r+t+o+i}},29387:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"formatNextPathnameInfo",{enumerable:!0,get:function(){return formatNextPathnameInfo}});let n=r(4419),o=r(72721),i=r(99428),u=r(45477);function formatNextPathnameInfo(e){let t=(0,u.addLocale)(e.pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix);return(e.buildId||!e.trailingSlash)&&(t=(0,n.removeTrailingSlash)(t)),e.buildId&&(t=(0,i.addPathSuffix)((0,o.addPathPrefix)(t,"/_next/data/"+e.buildId),"/"===e.pathname?"index.json":".json")),t=(0,o.addPathPrefix)(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:(0,i.addPathSuffix)(t,"/"):(0,n.removeTrailingSlash)(t)}},50470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getNextPathnameInfo",{enumerable:!0,get:function(){return getNextPathnameInfo}});let n=r(15259),o=r(18200),i=r(69203);function getNextPathnameInfo(e,t){var r,u;let{basePath:h,i18n:y,trailingSlash:S}=null!=(r=t.nextConfig)?r:{},E={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):S};h&&(0,i.pathHasPrefix)(E.pathname,h)&&(E.pathname=(0,o.removePathPrefix)(E.pathname,h),E.basePath=h);let R=E.pathname;if(E.pathname.startsWith("/_next/data/")&&E.pathname.endsWith(".json")){let e=E.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),r=e[0];E.buildId=r,R="index"!==e[1]?"/"+e.slice(1).join("/"):"/",!0===t.parseData&&(E.pathname=R)}if(y){let e=t.i18nProvider?t.i18nProvider.analyze(E.pathname):(0,n.normalizeLocalePath)(E.pathname,y.locales);E.locale=e.detectedLocale,E.pathname=null!=(u=e.pathname)?u:E.pathname,!e.detectedLocale&&E.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(R):(0,n.normalizeLocalePath)(R,y.locales)).detectedLocale&&(E.locale=e.detectedLocale)}return E}},11193:(e,t)=>{"use strict";function parsePath(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return parsePath}})},69203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"pathHasPrefix",{enumerable:!0,get:function(){return pathHasPrefix}});let n=r(11193);function pathHasPrefix(e,t){if("string"!=typeof e)return!1;let{pathname:r}=(0,n.parsePath)(e);return r===t||r.startsWith(t+"/")}},18200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removePathPrefix",{enumerable:!0,get:function(){return removePathPrefix}});let n=r(69203);function removePathPrefix(e,t){if(!(0,n.pathHasPrefix)(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:"/"+r}},4419:(e,t)=>{"use strict";function removeTrailingSlash(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeTrailingSlash",{enumerable:!0,get:function(){return removeTrailingSlash}})},24596:(e,t,r)=>{"use strict";e.exports=r(92491)},41412:(e,t,r)=>{"use strict";e.exports=r(33859)},70851:(e,t,r)=>{"use strict";function Credentials(e){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:e}}r.d(t,{Z:()=>Credentials})},95918:(e,t,r)=>{"use strict";let n,o,i,u,h;r.d(t,{Z:()=>NextAuth});var __classPrivateFieldSet=function(e,t,r,n,o){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},__classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};function defaultCookies(e){let t=e?"__Secure-":"";return{sessionToken:{name:`${t}next-auth.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},callbackUrl:{name:`${t}next-auth.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},csrfToken:{name:`${e?"__Host-":""}next-auth.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},pkceCodeVerifier:{name:`${t}next-auth.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},state:{name:`${t}next-auth.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},nonce:{name:`${t}next-auth.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}}}}let cookie_SessionStore=class cookie_SessionStore{constructor(e,t,r){eH.add(this),e$.set(this,{}),eJ.set(this,void 0),eW.set(this,void 0),__classPrivateFieldSet(this,eW,r,"f"),__classPrivateFieldSet(this,eJ,e,"f");let{cookies:n}=t,{name:o}=e;if("function"==typeof n?.getAll)for(let{name:e,value:t}of n.getAll())e.startsWith(o)&&(__classPrivateFieldGet(this,e$,"f")[e]=t);else if(n instanceof Map)for(let e of n.keys())e.startsWith(o)&&(__classPrivateFieldGet(this,e$,"f")[e]=n.get(e));else for(let e in n)e.startsWith(o)&&(__classPrivateFieldGet(this,e$,"f")[e]=n[e])}get value(){let e=Object.keys(__classPrivateFieldGet(this,e$,"f")).sort((e,t)=>{let r=parseInt(e.split(".").pop()||"0"),n=parseInt(t.split(".").pop()||"0");return r-n});return e.map(e=>__classPrivateFieldGet(this,e$,"f")[e]).join("")}chunk(e,t){let r=__classPrivateFieldGet(this,eH,"m",eB).call(this),n=__classPrivateFieldGet(this,eH,"m",eK).call(this,{name:__classPrivateFieldGet(this,eJ,"f").name,value:e,options:{...__classPrivateFieldGet(this,eJ,"f").options,...t}});for(let e of n)r[e.name]=e;return Object.values(r)}clean(){return Object.values(__classPrivateFieldGet(this,eH,"m",eB).call(this))}};e$=new WeakMap,eJ=new WeakMap,eW=new WeakMap,eH=new WeakSet,eK=function(e){let t=Math.ceil(e.value.length/3933);if(1===t)return __classPrivateFieldGet(this,e$,"f")[e.name]=e.value,[e];let r=[];for(let n=0;n<t;n++){let t=`${e.name}.${n}`,o=e.value.substr(3933*n,3933);r.push({...e,name:t,value:o}),__classPrivateFieldGet(this,e$,"f")[t]=o}return __classPrivateFieldGet(this,eW,"f").debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:163,valueSize:e.value.length,chunks:r.map(e=>e.value.length+163)}),r},eB=function(){let e={};for(let t in __classPrivateFieldGet(this,e$,"f"))delete __classPrivateFieldGet(this,e$,"f")?.[t],e[t]={name:t,value:"",options:{...__classPrivateFieldGet(this,eJ,"f").options,maxAge:0}};return e};let AuthError=class AuthError extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),Error.captureStackTrace?.(this,this.constructor),this.name=e instanceof AuthError?e.name:this.constructor.name}};let AdapterError=class AdapterError extends AuthError{};let AuthorizedCallbackError=class AuthorizedCallbackError extends AuthError{};let CallbackRouteError=class CallbackRouteError extends AuthError{};let ErrorPageLoop=class ErrorPageLoop extends AuthError{};let EventError=class EventError extends AuthError{};let InvalidCallbackUrl=class InvalidCallbackUrl extends AuthError{};let InvalidEndpoints=class InvalidEndpoints extends AuthError{};let InvalidCheck=class InvalidCheck extends AuthError{};let JWTSessionError=class JWTSessionError extends AuthError{};let MissingAdapter=class MissingAdapter extends AuthError{};let MissingAdapterMethods=class MissingAdapterMethods extends AuthError{};let MissingAuthorize=class MissingAuthorize extends AuthError{};let errors_MissingSecret=class errors_MissingSecret extends AuthError{};let OAuthAccountNotLinked=class OAuthAccountNotLinked extends AuthError{};let OAuthCallbackError=class OAuthCallbackError extends AuthError{};let OAuthProfileParseError=class OAuthProfileParseError extends AuthError{};let SessionTokenError=class SessionTokenError extends AuthError{};let SignInError=class SignInError extends AuthError{};let SignOutError=class SignOutError extends AuthError{};let UnknownAction=class UnknownAction extends AuthError{};let UnsupportedStrategy=class UnsupportedStrategy extends AuthError{};let UntrustedHost=class UntrustedHost extends AuthError{};let Verification=class Verification extends AuthError{};let y=!1;function isValidHttpUrl(e,t){try{return/^https?:/.test(new URL(e,e.startsWith("/")?t:void 0).protocol)}catch{return!1}}let S=!1,E=!1,R=["createVerificationToken","useVerificationToken","getUserByEmail"],D=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"];function assertConfig(e,t){let{url:r}=e,n=[];if(!y&&t.debug&&n.push("debug-enabled"),!t.trustHost)return new UntrustedHost(`Host must be trusted. URL was: ${e.url}`);if(!t.secret)return new errors_MissingSecret("Please define a `secret`.");let o=e.query?.callbackUrl;if(o&&!isValidHttpUrl(o,r.origin))return new InvalidCallbackUrl(`Invalid callback URL. Received: ${o}`);let{callbackUrl:i}=defaultCookies(t.useSecureCookies??"https:"===r.protocol),u=e.cookies?.[t.cookies?.callbackUrl?.name??i.name];if(u&&!isValidHttpUrl(u,r.origin))return new InvalidCallbackUrl(`Invalid callback URL. Received: ${u}`);for(let e of t.providers){let t="function"==typeof e?e():e;if(("oauth"===t.type||"oidc"===t.type)&&!(t.issuer??t.options?.issuer)){let e;let{authorization:r,token:n,userinfo:o}=t;if("string"==typeof r||r?.url?"string"==typeof n||n?.url?"string"==typeof o||o?.url||(e="userinfo"):e="token":e="authorization",e)return new InvalidEndpoints(`Provider "${t.id}" is missing both \`issuer\` and \`${e}\` endpoint config. At least one of them is required.`)}"credentials"===t.type?S=!0:"email"===t.type&&(E=!0)}if(S){let e=t.session?.strategy==="database",r=!t.providers.some(e=>"credentials"!==("function"==typeof e?e():e).type);if(e&&r)return new UnsupportedStrategy("Signin in with credentials only supported if JWT strategy is enabled");let n=t.providers.some(e=>{let t="function"==typeof e?e():e;return"credentials"===t.type&&!t.authorize});if(n)return new MissingAuthorize("Must define an authorize() handler to use credentials authentication provider")}let{adapter:h,session:K}=t;if(E||K?.strategy==="database"||!K?.strategy&&h){let e;if(E){if(!h)return new MissingAdapter("Email login requires an adapter.");e=R}else{if(!h)return new MissingAdapter("Database session requires an adapter.");e=D}let t=e.filter(e=>!h[e]);if(t.length)return new MissingAdapterMethods(`Required adapter methods were missing: ${t.join(", ")}`)}return y||(y=!0),n}var K=r(6113);let fallback=(e,t,r,n,o)=>{let i=parseInt(e.substr(3),10)>>3||20,u=(0,K.createHmac)(e,r.byteLength?r:new Uint8Array(i)).update(t).digest(),h=Math.ceil(o/i),y=new Uint8Array(i*h+n.byteLength+1),S=0,E=0;for(let t=1;t<=h;t++)y.set(n,E),y[E+n.byteLength]=t,y.set((0,K.createHmac)(e,u).update(y.subarray(S,E+n.byteLength+1)).digest(),E),S=E,E+=i;return y.slice(0,o)};"function"!=typeof K.hkdf||process.versions.electron||(n=async(...e)=>new Promise((t,r)=>{K.hkdf(...e,(e,n)=>{e?r(e):t(new Uint8Array(n))})}));let runtime_hkdf=async(e,t,r,o,i)=>(n||fallback)(e,t,r,o,i);function normalizeDigest(e){switch(e){case"sha256":case"sha384":case"sha512":case"sha1":return e;default:throw TypeError('unsupported "digest" value')}}function normalizeUint8Array(e,t){if("string"==typeof e)return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}function normalizeIkm(e){let t=normalizeUint8Array(e,"ikm");if(!t.byteLength)throw TypeError('"ikm" must be at least one byte in length');return t}function normalizeInfo(e){let t=normalizeUint8Array(e,"info");if(t.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return t}function normalizeKeylen(e,t){if("number"!=typeof e||!Number.isInteger(e)||e<1)throw TypeError('"keylen" must be a positive integer');let r=parseInt(t.substr(3),10)>>3||20;if(e>255*r)throw TypeError('"keylen" too large');return e}async function esm_hkdf(e,t,r,n,o){return runtime_hkdf(normalizeDigest(e),normalizeIkm(t),normalizeUint8Array(r,"salt"),normalizeInfo(n),normalizeKeylen(o,e))}var B=r(14300);let runtime_digest=(e,t)=>(0,K.createHash)(e).update(t).digest(),V=new TextEncoder,q=new TextDecoder;function buffer_utils_concat(...e){let t=e.reduce((e,{length:t})=>e+t,0),r=new Uint8Array(t),n=0;return e.forEach(e=>{r.set(e,n),n+=e.length}),r}function buffer_utils_p2s(e,t){return buffer_utils_concat(V.encode(e),new Uint8Array([0]),t)}function writeUInt32BE(e,t,r){if(t<0||t>=4294967296)throw RangeError(`value must be >= 0 and <= ${4294967296-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function uint64be(e){let t=new Uint8Array(8);return writeUInt32BE(t,Math.floor(e/4294967296),0),writeUInt32BE(t,e%4294967296,4),t}function uint32be(e){let t=new Uint8Array(4);return writeUInt32BE(t,e),t}function lengthAndInput(e){return buffer_utils_concat(uint32be(e.length),e)}async function concatKdf(e,t,r){let n=Math.ceil((t>>3)/32),o=new Uint8Array(32*n);for(let t=0;t<n;t++){let n=new Uint8Array(4+e.length+r.length);n.set(uint32be(t+1)),n.set(e,4),n.set(r,4+e.length),o.set(await runtime_digest("sha256",n),32*t)}return o.slice(0,t>>3)}function normalize(e){let t=e;return t instanceof Uint8Array&&(t=q.decode(t)),t}o=B.Buffer.isEncoding("base64url")?e=>B.Buffer.from(e).toString("base64url"):e=>B.Buffer.from(e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");let decode=e=>B.Buffer.from(normalize(e),"base64");let errors_JOSEError=class errors_JOSEError extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}};let JWTClaimValidationFailed=class JWTClaimValidationFailed extends errors_JOSEError{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=r}};let JWTExpired=class JWTExpired extends errors_JOSEError{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=r}};let errors_JOSEAlgNotAllowed=class errors_JOSEAlgNotAllowed extends errors_JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}};let errors_JOSENotSupported=class errors_JOSENotSupported extends errors_JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}};let errors_JWEDecryptionFailed=class errors_JWEDecryptionFailed extends errors_JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}};let errors_JWEInvalid=class errors_JWEInvalid extends errors_JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}};let errors_JWTInvalid=class errors_JWTInvalid extends errors_JOSEError{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}};function bitLength(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new errors_JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}Symbol.asyncIterator;let lib_iv=e=>(0,K.randomFillSync)(new Uint8Array(bitLength(e)>>3)),check_iv_length=(e,t)=>{if(t.length<<3!==bitLength(e))throw new errors_JWEInvalid("Invalid Initialization Vector length")};var G=r(73837);let ee=G.types.isKeyObject?e=>G.types.isKeyObject(e):e=>null!=e&&e instanceof K.KeyObject,check_cek_length=(e,t)=>{let r;switch(e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new errors_JOSENotSupported(`Content Encryption Algorithm ${e} is not supported either by JOSE or your javascript runtime`)}if(t instanceof Uint8Array){let e=t.byteLength<<3;if(e!==r)throw new errors_JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}if(ee(t)&&"secret"===t.type){let e=t.symmetricKeySize<<3;if(e!==r)throw new errors_JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}throw TypeError("Invalid Content Encryption Key type")},et=K.timingSafeEqual;function cbcTag(e,t,r,n,o,i){let u=buffer_utils_concat(e,t,r,uint64be(e.length<<3)),h=(0,K.createHmac)(`sha${n}`,o);return h.update(u),h.digest().slice(0,i>>3)}let er=K.webcrypto,en=G.types.isCryptoKey?e=>G.types.isCryptoKey(e):e=>!1;function unusable(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function isAlgorithm(e,t){return e.name===t}function getHashLength(e){return parseInt(e.name.slice(4),10)}function checkUsage(e,t){if(t.length&&!t.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw TypeError(e)}}function checkEncCryptoKey(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!isAlgorithm(e.algorithm,"AES-GCM"))throw unusable("AES-GCM");let r=parseInt(t.slice(1,4),10),n=e.algorithm.length;if(n!==r)throw unusable(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!isAlgorithm(e.algorithm,"AES-KW"))throw unusable("AES-KW");let r=parseInt(t.slice(1,4),10),n=e.algorithm.length;if(n!==r)throw unusable(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw unusable("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!isAlgorithm(e.algorithm,"PBKDF2"))throw unusable("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!isAlgorithm(e.algorithm,"RSA-OAEP"))throw unusable("RSA-OAEP");let r=parseInt(t.slice(9),10)||1,n=getHashLength(e.algorithm.hash);if(n!==r)throw unusable(`SHA-${r}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}checkUsage(e,r)}function message(e,t,...r){if(r.length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let invalid_key_input=(e,...t)=>message("Key must be ",e,...t);function withAlg(e,t,...r){return message(`Key for the ${e} algorithm must be `,t,...r)}let runtime_ciphers=e=>(i||(i=new Set((0,K.getCiphers)())),i.has(e)),is_key_like=e=>ee(e)||en(e),eo=["KeyObject"];function cbcDecrypt(e,t,r,n,o,i){let u,h;let y=parseInt(e.slice(1,4),10);ee(t)&&(t=t.export());let S=t.subarray(y>>3),E=t.subarray(0,y>>3),R=parseInt(e.slice(-3),10),D=`aes-${y}-cbc`;if(!runtime_ciphers(D))throw new errors_JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let B=cbcTag(i,n,r,R,E,y);try{u=et(o,B)}catch{}if(!u)throw new errors_JWEDecryptionFailed;try{let e=(0,K.createDecipheriv)(D,S,n);h=buffer_utils_concat(e.update(r),e.final())}catch{}if(!h)throw new errors_JWEDecryptionFailed;return h}function gcmDecrypt(e,t,r,n,o,i){let u=parseInt(e.slice(1,4),10),h=`aes-${u}-gcm`;if(!runtime_ciphers(h))throw new errors_JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);try{let e=(0,K.createDecipheriv)(h,t,n,{authTagLength:16});e.setAuthTag(o),i.byteLength&&e.setAAD(i,{plaintextLength:r.length});let u=e.update(r);return e.final(),u}catch{throw new errors_JWEDecryptionFailed}}(globalThis.CryptoKey||(null==er?void 0:er.CryptoKey))&&eo.push("CryptoKey");let runtime_decrypt=(e,t,r,n,o,i)=>{let u;if(en(t))checkEncCryptoKey(t,e,"decrypt"),u=K.KeyObject.from(t);else if(t instanceof Uint8Array||ee(t))u=t;else throw TypeError(invalid_key_input(t,...eo,"Uint8Array"));switch(check_cek_length(e,u),check_iv_length(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return cbcDecrypt(e,u,r,n,o,i);case"A128GCM":case"A192GCM":case"A256GCM":return gcmDecrypt(e,u,r,n,o,i);default:throw new errors_JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};var ei=r(59796);let ea=(0,G.promisify)(ei.inflateRaw),es=(0,G.promisify)(ei.deflateRaw),inflate=e=>ea(e),deflate=e=>es(e),is_disjoint=(...e)=>{let t;let r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0};function isObjectLike(e){return"object"==typeof e&&null!==e}function is_object_isObject(e){if(!isObjectLike(e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function checkKeySize(e,t){if(e.symmetricKeySize<<3!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function ensureKeyObject(e,t,r){if(ee(e))return e;if(e instanceof Uint8Array)return(0,K.createSecretKey)(e);if(en(e))return checkEncCryptoKey(e,t,r),K.KeyObject.from(e);throw TypeError(invalid_key_input(e,...eo,"Uint8Array"))}let wrap=(e,t,r)=>{let n=parseInt(e.slice(1,4),10),o=`aes${n}-wrap`;if(!runtime_ciphers(o))throw new errors_JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let i=ensureKeyObject(t,e,"wrapKey");checkKeySize(i,e);let u=(0,K.createCipheriv)(o,i,B.Buffer.alloc(8,166));return buffer_utils_concat(u.update(r),u.final())},unwrap=(e,t,r)=>{let n=parseInt(e.slice(1,4),10),o=`aes${n}-wrap`;if(!runtime_ciphers(o))throw new errors_JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let i=ensureKeyObject(t,e,"unwrapKey");checkKeySize(i,e);let u=(0,K.createDecipheriv)(o,i,B.Buffer.alloc(8,166));return buffer_utils_concat(u.update(r),u.final())},ec=B.Buffer.from([42,134,72,206,61,3,1,7]),el=B.Buffer.from([43,129,4,0,34]),eu=B.Buffer.from([43,129,4,0,35]),ed=B.Buffer.from([43,129,4,0,10]),ep=new WeakMap,namedCurveToJOSE=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new errors_JOSENotSupported("Unsupported key curve for this operation")}},get_named_curve_getNamedCurve=(e,t)=>{var r;let n;if(en(e))n=K.KeyObject.from(e);else if(ee(e))n=e;else throw TypeError(invalid_key_input(e,...eo));if("secret"===n.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(n.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${n.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${n.asymmetricKeyType.slice(1)}`;case"ec":{if(ep.has(n))return ep.get(n);let e=null===(r=n.asymmetricKeyDetails)||void 0===r?void 0:r.namedCurve;if(e||"private"!==n.type){if(!e){let t=n.export({format:"der",type:"spki"}),r=t[1]<128?14:15,o=t[r],i=t.slice(r+1,r+1+o);if(i.equals(ec))e="prime256v1";else if(i.equals(el))e="secp384r1";else if(i.equals(eu))e="secp521r1";else if(i.equals(ed))e="secp256k1";else throw new errors_JOSENotSupported("Unsupported key curve for this operation")}}else e=get_named_curve_getNamedCurve((0,K.createPublicKey)(n),!0);if(t)return e;let o=namedCurveToJOSE(e);return ep.set(n,o),o}default:throw TypeError("Invalid asymmetric key type for this operation")}},ef=(0,G.promisify)(K.generateKeyPair);async function deriveKey(e,t,r,n,o=new Uint8Array(0),i=new Uint8Array(0)){let u,h;if(en(e))checkEncCryptoKey(e,"ECDH"),u=K.KeyObject.from(e);else if(ee(e))u=e;else throw TypeError(invalid_key_input(e,...eo));if(en(t))checkEncCryptoKey(t,"ECDH","deriveBits"),h=K.KeyObject.from(t);else if(ee(t))h=t;else throw TypeError(invalid_key_input(t,...eo));let y=buffer_utils_concat(lengthAndInput(V.encode(r)),lengthAndInput(o),lengthAndInput(i),uint32be(n)),S=(0,K.diffieHellman)({privateKey:h,publicKey:u});return concatKdf(S,n,y)}async function generateEpk(e){let t;if(en(e))t=K.KeyObject.from(e);else if(ee(e))t=e;else throw TypeError(invalid_key_input(e,...eo));switch(t.asymmetricKeyType){case"x25519":return ef("x25519");case"x448":return ef("x448");case"ec":{let e=get_named_curve_getNamedCurve(t);return ef("ec",{namedCurve:e})}default:throw new errors_JOSENotSupported("Invalid or unsupported EPK")}}let ecdhAllowed=e=>["P-256","P-384","P-521","X25519","X448"].includes(get_named_curve_getNamedCurve(e));function checkP2s(e){if(!(e instanceof Uint8Array)||e.length<8)throw new errors_JWEInvalid("PBES2 Salt Input must be 8 or more octets")}let eh=(0,G.promisify)(K.pbkdf2);function getPassword(e,t){if(ee(e))return e.export();if(e instanceof Uint8Array)return e;if(en(e))return checkEncCryptoKey(e,t,"deriveBits","deriveKey"),K.KeyObject.from(e).export();throw TypeError(invalid_key_input(e,...eo,"Uint8Array"))}let encrypt=async(e,t,r,n=2048,i=(0,K.randomFillSync)(new Uint8Array(16)))=>{checkP2s(i);let u=buffer_utils_p2s(e,i),h=parseInt(e.slice(13,16),10)>>3,y=getPassword(t,e),S=await eh(y,u,n,h,`sha${e.slice(8,11)}`),E=await wrap(e.slice(-6),S,r);return{encryptedKey:E,p2c:n,p2s:o(i)}},pbes2kw_decrypt=async(e,t,r,n,o)=>{checkP2s(o);let i=buffer_utils_p2s(e,o),u=parseInt(e.slice(13,16),10)>>3,h=getPassword(t,e),y=await eh(h,i,n,u,`sha${e.slice(8,11)}`);return unwrap(e.slice(-6),y,r)},eg=new WeakMap,getLength=(e,t)=>{let r=e.readUInt8(1);if((128&r)==0)return 0===t?r:getLength(e.subarray(2+r),t-1);let n=127&r;r=0;for(let t=0;t<n;t++){r<<=8;let n=e.readUInt8(2+t);r|=n}return 0===t?r:getLength(e.subarray(2+r),t-1)},getLengthOfSeqIndex=(e,t)=>{let r=e.readUInt8(1);return(128&r)==0?getLength(e.subarray(2),t):getLength(e.subarray(2+(127&r)),t)},getModulusLength=e=>{var t,r;if(eg.has(e))return eg.get(e);let n=null!==(r=null===(t=e.asymmetricKeyDetails)||void 0===t?void 0:t.modulusLength)&&void 0!==r?r:getLengthOfSeqIndex(e.export({format:"der",type:"pkcs1"}),"private"===e.type?1:0)-1<<3;return eg.set(e,n),n},check_modulus_length_setModulusLength=(e,t)=>{eg.set(e,t)},check_modulus_length=(e,t)=>{if(2048>getModulusLength(e))throw TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)},checkKey=(e,t)=>{if("rsa"!==e.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");check_modulus_length(e,t)},resolvePadding=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return K.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return K.constants.RSA_PKCS1_PADDING;default:return}},resolveOaepHash=e=>{switch(e){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function rsaes_ensureKeyObject(e,t,...r){if(ee(e))return e;if(en(e))return checkEncCryptoKey(e,t,...r),K.KeyObject.from(e);throw TypeError(invalid_key_input(e,...eo))}let rsaes_encrypt=(e,t,r)=>{let n=resolvePadding(e),o=resolveOaepHash(e),i=rsaes_ensureKeyObject(t,e,"wrapKey","encrypt");return checkKey(i,e),(0,K.publicEncrypt)({key:i,oaepHash:o,padding:n},r)},rsaes_decrypt=(e,t,r)=>{let n=resolvePadding(e),o=resolveOaepHash(e),i=rsaes_ensureKeyObject(t,e,"unwrapKey","decrypt");return checkKey(i,e),(0,K.privateDecrypt)({key:i,oaepHash:o,padding:n},r)};function cek_bitLength(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new errors_JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}let lib_cek=e=>(0,K.randomFillSync)(new Uint8Array(cek_bitLength(e)>>3)),em=B.Buffer.from([0]),ey=B.Buffer.from([2]),e_=B.Buffer.from([3]),ev=B.Buffer.from([48]),eb=B.Buffer.from([4]),encodeLength=e=>{if(e<128)return B.Buffer.from([e]);let t=B.Buffer.alloc(5);t.writeUInt32BE(e,1);let r=1;for(;0===t[r];)r++;return t[r-1]=128|5-r,t.slice(r-1)},ew=new Map([["P-256",B.Buffer.from("06 08 2A 86 48 CE 3D 03 01 07".replace(/ /g,""),"hex")],["secp256k1",B.Buffer.from("06 05 2B 81 04 00 0A".replace(/ /g,""),"hex")],["P-384",B.Buffer.from("06 05 2B 81 04 00 22".replace(/ /g,""),"hex")],["P-521",B.Buffer.from("06 05 2B 81 04 00 23".replace(/ /g,""),"hex")],["ecPublicKey",B.Buffer.from("06 07 2A 86 48 CE 3D 02 01".replace(/ /g,""),"hex")],["X25519",B.Buffer.from("06 03 2B 65 6E".replace(/ /g,""),"hex")],["X448",B.Buffer.from("06 03 2B 65 6F".replace(/ /g,""),"hex")],["Ed25519",B.Buffer.from("06 03 2B 65 70".replace(/ /g,""),"hex")],["Ed448",B.Buffer.from("06 03 2B 65 71".replace(/ /g,""),"hex")]]);let DumbAsn1Encoder=class DumbAsn1Encoder{constructor(){this.length=0,this.elements=[]}oidFor(e){let t=ew.get(e);if(!t)throw new errors_JOSENotSupported("Invalid or unsupported OID");this.elements.push(t),this.length+=t.length}zero(){this.elements.push(ey,B.Buffer.from([1]),em),this.length+=3}one(){this.elements.push(ey,B.Buffer.from([1]),B.Buffer.from([1])),this.length+=3}unsignedInteger(e){if(128&e[0]){let t=encodeLength(e.length+1);this.elements.push(ey,t,em,e),this.length+=2+t.length+e.length}else{let t=0;for(;0===e[t]&&(128&e[t+1])==0;)t++;let r=encodeLength(e.length-t);this.elements.push(ey,encodeLength(e.length-t),e.slice(t)),this.length+=1+r.length+e.length-t}}octStr(e){let t=encodeLength(e.length);this.elements.push(eb,encodeLength(e.length),e),this.length+=1+t.length+e.length}bitStr(e){let t=encodeLength(e.length+1);this.elements.push(e_,encodeLength(e.length+1),em,e),this.length+=1+t.length+e.length+1}add(e){this.elements.push(e),this.length+=e.length}end(e=ev){let t=encodeLength(this.length);return B.Buffer.concat([e,t,...this.elements],1+t.length+this.length)}};let[eS,eE]=process.versions.node.split(".").map(e=>parseInt(e,10));process.versions;let ek=eS>=16||15===eS&&eE>=9,eP=eS>=16||15===eS&&eE>=12,jwk_to_key=e=>{if(eP&&"oct"!==e.kty)return e.d?(0,K.createPrivateKey)({format:"jwk",key:e}):(0,K.createPublicKey)({format:"jwk",key:e});switch(e.kty){case"oct":return(0,K.createSecretKey)(decode(e.k));case"RSA":{let t=new DumbAsn1Encoder,r=void 0!==e.d,n=B.Buffer.from(e.n,"base64"),o=B.Buffer.from(e.e,"base64");r?(t.zero(),t.unsignedInteger(n),t.unsignedInteger(o),t.unsignedInteger(B.Buffer.from(e.d,"base64")),t.unsignedInteger(B.Buffer.from(e.p,"base64")),t.unsignedInteger(B.Buffer.from(e.q,"base64")),t.unsignedInteger(B.Buffer.from(e.dp,"base64")),t.unsignedInteger(B.Buffer.from(e.dq,"base64")),t.unsignedInteger(B.Buffer.from(e.qi,"base64"))):(t.unsignedInteger(n),t.unsignedInteger(o));let i=t.end(),u={key:i,format:"der",type:"pkcs1"},h=r?(0,K.createPrivateKey)(u):(0,K.createPublicKey)(u);return check_modulus_length_setModulusLength(h,n.length<<3),h}case"EC":{var t,r;let n=new DumbAsn1Encoder,o=void 0!==e.d,i=B.Buffer.concat([B.Buffer.alloc(1,4),B.Buffer.from(e.x,"base64"),B.Buffer.from(e.y,"base64")]);if(o){n.zero();let r=new DumbAsn1Encoder;r.oidFor("ecPublicKey"),r.oidFor(e.crv),n.add(r.end());let o=new DumbAsn1Encoder;o.one(),o.octStr(B.Buffer.from(e.d,"base64"));let u=new DumbAsn1Encoder;u.bitStr(i);let h=u.end(B.Buffer.from([161]));o.add(h);let y=o.end(),S=new DumbAsn1Encoder;S.add(y);let E=S.end(B.Buffer.from([4]));n.add(E);let R=n.end(),D=(0,K.createPrivateKey)({key:R,format:"der",type:"pkcs8"});return t=e.crv,ep.set(D,t),D}let u=new DumbAsn1Encoder;u.oidFor("ecPublicKey"),u.oidFor(e.crv),n.add(u.end()),n.bitStr(i);let h=n.end(),y=(0,K.createPublicKey)({key:h,format:"der",type:"spki"});return r=e.crv,ep.set(y,r),y}case"OKP":{let t=new DumbAsn1Encoder,r=void 0!==e.d;if(r){t.zero();let r=new DumbAsn1Encoder;r.oidFor(e.crv),t.add(r.end());let n=new DumbAsn1Encoder;n.octStr(B.Buffer.from(e.d,"base64"));let o=n.end(B.Buffer.from([4]));t.add(o);let i=t.end();return(0,K.createPrivateKey)({key:i,format:"der",type:"pkcs8"})}let n=new DumbAsn1Encoder;n.oidFor(e.crv),t.add(n.end()),t.bitStr(B.Buffer.from(e.x,"base64"));let o=t.end();return(0,K.createPublicKey)({key:o,format:"der",type:"spki"})}default:throw new errors_JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}};async function import_importJWK(e,t,r){var n;if(!is_object_isObject(e))throw TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');if(null!=r||(r=!0!==e.ext),r)return jwk_to_key({...e,alg:t,ext:null!==(n=e.ext)&&void 0!==n&&n});return decode(e.k);case"RSA":if(void 0!==e.oth)throw new errors_JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return jwk_to_key({...e,alg:t});default:throw new errors_JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}let symmetricTypeCheck=(e,t)=>{if(!(t instanceof Uint8Array)){if(!is_key_like(t))throw TypeError(withAlg(e,t,...eo,"Uint8Array"));if("secret"!==t.type)throw TypeError(`${eo.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},asymmetricTypeCheck=(e,t,r)=>{if(!is_key_like(t))throw TypeError(withAlg(e,t,...eo));if("secret"===t.type)throw TypeError(`${eo.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${eo.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${eo.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${eo.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${eo.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},check_key_type=(e,t,r)=>{let n=e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e);n?symmetricTypeCheck(e,t):asymmetricTypeCheck(e,t,r)};function cbcEncrypt(e,t,r,n,o){let i=parseInt(e.slice(1,4),10);ee(r)&&(r=r.export());let u=r.subarray(i>>3),h=r.subarray(0,i>>3),y=`aes-${i}-cbc`;if(!runtime_ciphers(y))throw new errors_JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let S=(0,K.createCipheriv)(y,u,n),E=buffer_utils_concat(S.update(t),S.final()),R=parseInt(e.slice(-3),10),D=cbcTag(o,n,E,R,h,i);return{ciphertext:E,tag:D}}function gcmEncrypt(e,t,r,n,o){let i=parseInt(e.slice(1,4),10),u=`aes-${i}-gcm`;if(!runtime_ciphers(u))throw new errors_JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let h=(0,K.createCipheriv)(u,r,n,{authTagLength:16});o.byteLength&&h.setAAD(o,{plaintextLength:t.length});let y=h.update(t);h.final();let S=h.getAuthTag();return{ciphertext:y,tag:S}}let runtime_encrypt=(e,t,r,n,o)=>{let i;if(en(r))checkEncCryptoKey(r,e,"encrypt"),i=K.KeyObject.from(r);else if(r instanceof Uint8Array||ee(r))i=r;else throw TypeError(invalid_key_input(r,...eo,"Uint8Array"));switch(check_cek_length(e,i),check_iv_length(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return cbcEncrypt(e,t,i,n,o);case"A128GCM":case"A192GCM":case"A256GCM":return gcmEncrypt(e,t,i,n,o);default:throw new errors_JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};async function aesgcmkw_wrap(e,t,r,n){let i=e.slice(0,7);n||(n=lib_iv(i));let{ciphertext:u,tag:h}=await runtime_encrypt(i,r,t,n,new Uint8Array(0));return{encryptedKey:u,iv:o(n),tag:o(h)}}async function aesgcmkw_unwrap(e,t,r,n,o){let i=e.slice(0,7);return runtime_decrypt(i,t,r,n,o,new Uint8Array(0))}async function decryptKeyManagement(e,t,r,n,o){switch(check_key_type(e,t,"decrypt"),e){case"dir":if(void 0!==r)throw new errors_JWEInvalid("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new errors_JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let o,i;if(!is_object_isObject(n.epk))throw new errors_JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!ecdhAllowed(t))throw new errors_JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let u=await import_importJWK(n.epk,e);if(void 0!==n.apu){if("string"!=typeof n.apu)throw new errors_JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=decode(n.apu)}catch{throw new errors_JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==n.apv){if("string"!=typeof n.apv)throw new errors_JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{i=decode(n.apv)}catch{throw new errors_JWEInvalid("Failed to base64url decode the apv")}}let h=await deriveKey(u,t,"ECDH-ES"===e?n.enc:e,"ECDH-ES"===e?cek_bitLength(n.enc):parseInt(e.slice(-5,-2),10),o,i);if("ECDH-ES"===e)return h;if(void 0===r)throw new errors_JWEInvalid("JWE Encrypted Key missing");return unwrap(e.slice(-6),h,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new errors_JWEInvalid("JWE Encrypted Key missing");return rsaes_decrypt(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let i;if(void 0===r)throw new errors_JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof n.p2c)throw new errors_JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let u=(null==o?void 0:o.maxPBES2Count)||1e4;if(n.p2c>u)throw new errors_JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof n.p2s)throw new errors_JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{i=decode(n.p2s)}catch{throw new errors_JWEInvalid("Failed to base64url decode the p2s")}return pbes2kw_decrypt(e,t,r,n.p2c,i)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new errors_JWEInvalid("JWE Encrypted Key missing");return unwrap(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let o,i;if(void 0===r)throw new errors_JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof n.iv)throw new errors_JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof n.tag)throw new errors_JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{o=decode(n.iv)}catch{throw new errors_JWEInvalid("Failed to base64url decode the iv")}try{i=decode(n.tag)}catch{throw new errors_JWEInvalid("Failed to base64url decode the tag")}return aesgcmkw_unwrap(e,t,r,o,i)}default:throw new errors_JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}let eA=decryptKeyManagement;function validate_crit_validateCrit(e,t,r,n,o){let i;if(void 0!==o.crit&&void 0===n.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let u of(i=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!i.has(u))throw new errors_JOSENotSupported(`Extension Header Parameter "${u}" is not recognized`);if(void 0===o[u])throw new e(`Extension Header Parameter "${u}" is missing`);if(i.get(u)&&void 0===n[u])throw new e(`Extension Header Parameter "${u}" MUST be integrity protected`)}return new Set(n.crit)}let ex=validate_crit_validateCrit,validate_algorithms=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function decrypt_flattenedDecrypt(e,t,r){var n;let o,i,u,h,y,S,E;if(!is_object_isObject(e))throw new errors_JWEInvalid("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new errors_JWEInvalid("JOSE Header missing");if("string"!=typeof e.iv)throw new errors_JWEInvalid("JWE Initialization Vector missing or incorrect type");if("string"!=typeof e.ciphertext)throw new errors_JWEInvalid("JWE Ciphertext missing or incorrect type");if("string"!=typeof e.tag)throw new errors_JWEInvalid("JWE Authentication Tag missing or incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new errors_JWEInvalid("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new errors_JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new errors_JWEInvalid("JWE AAD incorrect type");if(void 0!==e.header&&!is_object_isObject(e.header))throw new errors_JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!is_object_isObject(e.unprotected))throw new errors_JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=decode(e.protected);o=JSON.parse(q.decode(t))}catch{throw new errors_JWEInvalid("JWE Protected Header is invalid")}if(!is_disjoint(o,e.header,e.unprotected))throw new errors_JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let R={...o,...e.header,...e.unprotected};if(ex(errors_JWEInvalid,new Map,null==r?void 0:r.crit,o,R),void 0!==R.zip){if(!o||!o.zip)throw new errors_JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==R.zip)throw new errors_JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:D,enc:K}=R;if("string"!=typeof D||!D)throw new errors_JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof K||!K)throw new errors_JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let B=r&&validate_algorithms("keyManagementAlgorithms",r.keyManagementAlgorithms),G=r&&validate_algorithms("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(B&&!B.has(D))throw new errors_JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(G&&!G.has(K))throw new errors_JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');if(void 0!==e.encrypted_key)try{i=decode(e.encrypted_key)}catch{throw new errors_JWEInvalid("Failed to base64url decode the encrypted_key")}let ee=!1;"function"==typeof t&&(t=await t(o,e),ee=!0);try{u=await eA(D,t,i,R,r)}catch(e){if(e instanceof TypeError||e instanceof errors_JWEInvalid||e instanceof errors_JOSENotSupported)throw e;u=lib_cek(K)}try{h=decode(e.iv)}catch{throw new errors_JWEInvalid("Failed to base64url decode the iv")}try{y=decode(e.tag)}catch{throw new errors_JWEInvalid("Failed to base64url decode the tag")}let et=V.encode(null!==(n=e.protected)&&void 0!==n?n:"");S=void 0!==e.aad?buffer_utils_concat(et,V.encode("."),V.encode(e.aad)):et;try{E=decode(e.ciphertext)}catch{throw new errors_JWEInvalid("Failed to base64url decode the ciphertext")}let er=await runtime_decrypt(K,u,E,h,y,S);"DEF"===R.zip&&(er=await ((null==r?void 0:r.inflateRaw)||inflate)(er));let en={plaintext:er};if(void 0!==e.protected&&(en.protectedHeader=o),void 0!==e.aad)try{en.additionalAuthenticatedData=decode(e.aad)}catch{throw new errors_JWEInvalid("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(en.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(en.unprotectedHeader=e.header),ee)?{...en,key:t}:en}async function compactDecrypt(e,t,r){if(e instanceof Uint8Array&&(e=q.decode(e)),"string"!=typeof e)throw new errors_JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:n,1:o,2:i,3:u,4:h,length:y}=e.split(".");if(5!==y)throw new errors_JWEInvalid("Invalid Compact JWE");let S=await decrypt_flattenedDecrypt({ciphertext:u,iv:i||void 0,protected:n||void 0,tag:h||void 0,encrypted_key:o||void 0},t,r),E={plaintext:S.plaintext,protectedHeader:S.protectedHeader};return"function"==typeof t?{...E,key:S.key}:E}let Asn1SequenceDecoder=class Asn1SequenceDecoder{constructor(e){if(48!==e[0])throw TypeError();this.buffer=e,this.offset=1;let t=this.decodeLength();if(t!==e.length-this.offset)throw TypeError()}decodeLength(){let e=this.buffer[this.offset++];if(128&e){let t=-129&e;e=0;for(let r=0;r<t;r++)e=e<<8|this.buffer[this.offset+r];this.offset+=t}return e}unsignedInteger(){if(2!==this.buffer[this.offset++])throw TypeError();let e=this.decodeLength();0===this.buffer[this.offset]&&(this.offset++,e--);let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}end(){if(this.offset!==this.buffer.length)throw TypeError()}};let keyToJWK=e=>{let t;if(en(e)){if(!e.extractable)throw TypeError("CryptoKey is not extractable");t=K.KeyObject.from(e)}else if(ee(e))t=e;else if(e instanceof Uint8Array)return{kty:"oct",k:o(e)};else throw TypeError(invalid_key_input(e,...eo,"Uint8Array"));if(ek){if("secret"!==t.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(t.asymmetricKeyType))throw new errors_JOSENotSupported("Unsupported key asymmetricKeyType");return t.export({format:"jwk"})}switch(t.type){case"secret":return{kty:"oct",k:o(t.export())};case"private":case"public":switch(t.asymmetricKeyType){case"rsa":{let e;let r=t.export({format:"der",type:"pkcs1"}),n=new Asn1SequenceDecoder(r);"private"===t.type&&n.unsignedInteger();let i=o(n.unsignedInteger()),u=o(n.unsignedInteger());return"private"===t.type&&(e={d:o(n.unsignedInteger()),p:o(n.unsignedInteger()),q:o(n.unsignedInteger()),dp:o(n.unsignedInteger()),dq:o(n.unsignedInteger()),qi:o(n.unsignedInteger())}),n.end(),{kty:"RSA",n:i,e:u,...e}}case"ec":{let e,r,n;let i=get_named_curve_getNamedCurve(t);switch(i){case"secp256k1":e=64,r=33,n=-1;break;case"P-256":e=64,r=36,n=-1;break;case"P-384":e=96,r=35,n=-3;break;case"P-521":e=132,r=35,n=-3;break;default:throw new errors_JOSENotSupported("Unsupported curve")}if("public"===t.type){let r=t.export({type:"spki",format:"der"});return{kty:"EC",crv:i,x:o(r.subarray(-e,-e/2)),y:o(r.subarray(-e/2))}}let u=t.export({type:"pkcs8",format:"der"});return u.length<100&&(r+=n),{...keyToJWK((0,K.createPublicKey)(t)),d:o(u.subarray(r,r+e/2))}}case"ed25519":case"x25519":{let e=get_named_curve_getNamedCurve(t);if("public"===t.type){let r=t.export({type:"spki",format:"der"});return{kty:"OKP",crv:e,x:o(r.subarray(-32))}}let r=t.export({type:"pkcs8",format:"der"});return{...keyToJWK((0,K.createPublicKey)(t)),d:o(r.subarray(-32))}}case"ed448":case"x448":{let e=get_named_curve_getNamedCurve(t);if("public"===t.type){let r=t.export({type:"spki",format:"der"});return{kty:"OKP",crv:e,x:o(r.subarray("Ed448"===e?-57:-56))}}let r=t.export({type:"pkcs8",format:"der"});return{...keyToJWK((0,K.createPublicKey)(t)),d:o(r.subarray("Ed448"===e?-57:-56))}}default:throw new errors_JOSENotSupported("Unsupported key asymmetricKeyType")}default:throw new errors_JOSENotSupported("Unsupported key type")}};async function exportJWK(e){return keyToJWK(e)}async function encrypt_key_management_encryptKeyManagement(e,t,r,n,i={}){let u,h,y;switch(check_key_type(e,r,"encrypt"),e){case"dir":y=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ecdhAllowed(r))throw new errors_JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:S,apv:E}=i,{epk:R}=i;R||(R=(await generateEpk(r)).privateKey);let{x:D,y:K,crv:B,kty:V}=await exportJWK(R),q=await deriveKey(r,R,"ECDH-ES"===e?t:e,"ECDH-ES"===e?cek_bitLength(t):parseInt(e.slice(-5,-2),10),S,E);if(h={epk:{x:D,crv:B,kty:V}},"EC"===V&&(h.epk.y=K),S&&(h.apu=o(S)),E&&(h.apv=o(E)),"ECDH-ES"===e){y=q;break}y=n||lib_cek(t);let G=e.slice(-6);u=await wrap(G,q,y);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":y=n||lib_cek(t),u=await rsaes_encrypt(e,r,y);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{y=n||lib_cek(t);let{p2c:o,p2s:S}=i;({encryptedKey:u,...h}=await encrypt(e,r,y,o,S));break}case"A128KW":case"A192KW":case"A256KW":y=n||lib_cek(t),u=await wrap(e,r,y);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{y=n||lib_cek(t);let{iv:o}=i;({encryptedKey:u,...h}=await aesgcmkw_wrap(e,r,y,o));break}default:throw new errors_JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:y,encryptedKey:u,parameters:h}}let eO=encrypt_key_management_encryptKeyManagement,eT=Symbol();let encrypt_FlattenedEncrypt=class encrypt_FlattenedEncrypt{constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){let r,n,i,u,h,y,S;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new errors_JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!is_disjoint(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new errors_JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let E={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(ex(errors_JWEInvalid,new Map,null==t?void 0:t.crit,this._protectedHeader,E),void 0!==E.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new errors_JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==E.zip)throw new errors_JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:R,enc:D}=E;if("string"!=typeof R||!R)throw new errors_JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof D||!D)throw new errors_JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if("dir"===R){if(this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===R&&this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let o;({cek:n,encryptedKey:r,parameters:o}=await eO(R,D,e,this._cek,this._keyManagementParameters)),o&&(t&&eT in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...o}:this.setUnprotectedHeader(o):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...o}:this.setProtectedHeader(o))}if(this._iv||(this._iv=lib_iv(D)),u=this._protectedHeader?V.encode(o(JSON.stringify(this._protectedHeader))):V.encode(""),this._aad?(h=o(this._aad),i=buffer_utils_concat(u,V.encode("."),V.encode(h))):i=u,"DEF"===E.zip){let e=await ((null==t?void 0:t.deflateRaw)||deflate)(this._plaintext);({ciphertext:y,tag:S}=await runtime_encrypt(D,e,n,this._iv,i))}else({ciphertext:y,tag:S}=await runtime_encrypt(D,this._plaintext,n,this._iv,i));let K={ciphertext:o(y),iv:o(this._iv),tag:o(S)};return r&&(K.encrypted_key=o(r)),h&&(K.aad=h),this._protectedHeader&&(K.protected=q.decode(u)),this._sharedUnprotectedHeader&&(K.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(K.header=this._unprotectedHeader),K}};K.constants.RSA_PKCS1_PSS_PADDING,K.constants.RSA_PSS_SALTLEN_DIGEST,K.sign.length>3?(0,G.promisify)(K.sign):K.sign,K.verify.length>4&&(eS>=16||15===eS&&eE>=13)?(0,G.promisify)(K.verify):K.verify;let epoch=e=>Math.floor(e.getTime()/1e3),eC=604800,eR=31557600,eI=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,secs=e=>{let t=eI.exec(e);if(!t)throw TypeError("Invalid time period format");let r=parseFloat(t[1]),n=t[2].toLowerCase();switch(n){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*r);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*r);case"day":case"days":case"d":return Math.round(86400*r);case"week":case"weeks":case"w":return Math.round(r*eC);default:return Math.round(r*eR)}},normalizeTyp=e=>e.toLowerCase().replace(/^application\//,""),checkAudiencePresence=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e))),jwt_claims_set=(e,t,r={})=>{let n,o;let{typ:i}=r;if(i&&("string"!=typeof e.typ||normalizeTyp(e.typ)!==normalizeTyp(i)))throw new JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");try{n=JSON.parse(q.decode(t))}catch{}if(!is_object_isObject(n))throw new errors_JWTInvalid("JWT Claims Set must be a top-level JSON object");let{requiredClaims:u=[],issuer:h,subject:y,audience:S,maxTokenAge:E}=r;for(let e of(void 0!==E&&u.push("iat"),void 0!==S&&u.push("aud"),void 0!==y&&u.push("sub"),void 0!==h&&u.push("iss"),new Set(u.reverse())))if(!(e in n))throw new JWTClaimValidationFailed(`missing required "${e}" claim`,e,"missing");if(h&&!(Array.isArray(h)?h:[h]).includes(n.iss))throw new JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(y&&n.sub!==y)throw new JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(S&&!checkAudiencePresence(n.aud,"string"==typeof S?[S]:S))throw new JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");switch(typeof r.clockTolerance){case"string":o=secs(r.clockTolerance);break;case"number":o=r.clockTolerance;break;case"undefined":o=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:R}=r,D=epoch(R||new Date);if((void 0!==n.iat||E)&&"number"!=typeof n.iat)throw new JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(void 0!==n.nbf){if("number"!=typeof n.nbf)throw new JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(n.nbf>D+o)throw new JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==n.exp){if("number"!=typeof n.exp)throw new JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(n.exp<=D-o)throw new JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(E){let e=D-n.iat,t="number"==typeof E?E:secs(E);if(e-o>t)throw new JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(e<0-o)throw new JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return n};async function jwtDecrypt(e,t,r){let n=await compactDecrypt(e,t,r),o=jwt_claims_set(n.protectedHeader,n.plaintext,r),{protectedHeader:i}=n;if(void 0!==i.iss&&i.iss!==o.iss)throw new JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==i.sub&&i.sub!==o.sub)throw new JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==i.aud&&JSON.stringify(i.aud)!==JSON.stringify(o.aud))throw new JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");let u={payload:o,protectedHeader:i};return"function"==typeof t?{...u,key:n.key}:u}let CompactEncrypt=class CompactEncrypt{constructor(e){this._flattened=new encrypt_FlattenedEncrypt(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}};let produce_ProduceJWT=class produce_ProduceJWT{constructor(e){if(!is_object_isObject(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:e}:this._payload={...this._payload,nbf:epoch(new Date)+secs(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:e}:this._payload={...this._payload,exp:epoch(new Date)+secs(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:epoch(new Date)}:this._payload={...this._payload,iat:e},this}};let EncryptJWT=class EncryptJWT extends produce_ProduceJWT{setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){let r=new CompactEncrypt(V.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,t)}};function isJWKLike(e){return isObject(e)}r(13685),r(95687),r(82361),(0,G.promisify)(K.generateKeyPair);let now=()=>Date.now()/1e3|0;async function jwt_encode(e){let{token:t={},secret:r,maxAge:n=2592e3}=e,o=await getDerivedEncryptionKey(r);return await new EncryptJWT(t).setProtectedHeader({alg:"dir",enc:"A256GCM"}).setIssuedAt().setExpirationTime(now()+n).setJti(crypto.randomUUID()).encrypt(o)}async function jwt_decode(e){let{token:t,secret:r}=e;if(!t)return null;let n=await getDerivedEncryptionKey(r),{payload:o}=await jwtDecrypt(t,n,{clockTolerance:15});return o}async function getDerivedEncryptionKey(e){return await esm_hkdf("sha256",e,"","Auth.js Generated Encryption Key",32)}async function createCallbackUrl({options:e,paramValue:t,cookieValue:r}){let{url:n,callbacks:o}=e,i=n.origin;return t?i=await o.redirect({url:t,baseUrl:n.origin}):r&&(i=await o.redirect({url:r,baseUrl:n.origin})),{callbackUrl:i,callbackUrlCookie:i!==r?i:void 0}}var ej=r(95011);async function getBody(e){if(!("body"in e)||!e.body||"POST"!==e.method)return;let t=e.headers.get("content-type");if(t?.includes("application/json"))return await e.json();if(t?.includes("application/x-www-form-urlencoded")){let t=new URLSearchParams(await e.text());return Object.fromEntries(t)}}let eN=["providers","session","csrf","signin","signout","callback","verify-request","error"];async function toInternalRequest(e){try{let t;let r=new URL(e.url.replace(/\/$/,""));r.searchParams.delete("nextauth");let n=r.pathname.replace(/\/$/,""),o=eN.find(e=>n.includes(e));if(!o)throw new UnknownAction(`Cannot detect action in pathname (${n}).`);if("GET"!==e.method&&"POST"!==e.method)throw new UnknownAction("Only GET and POST requests are supported.");let i=n.split("/").pop();return i&&!o.includes(i)&&["signin","callback"].includes(o)&&(t=i),{url:r,action:o,providerId:t,method:e.method,headers:Object.fromEntries(e.headers),body:e.body?await getBody(e):void 0,cookies:(0,ej.Q)(e.headers.get("cookie")??"")??{},error:r.searchParams.get("error")??void 0,query:Object.fromEntries(r.searchParams)}}catch(e){return e}}function toRequest(e){return new Request(e.url,{headers:e.headers,method:e.method,body:"POST"===e.method?JSON.stringify(e.body??{}):void 0})}function toResponse(e){let t=new Headers(e.headers);e.cookies?.forEach(e=>{let{name:r,value:n,options:o}=e,i=ej.q(r,n,o);t.has("Set-Cookie")?t.append("Set-Cookie",i):t.set("Set-Cookie",i)});let r=e.body;"application/json"===t.get("content-type")?r=JSON.stringify(e.body):"application/x-www-form-urlencoded"===t.get("content-type")&&(r=new URLSearchParams(e.body).toString());let n=e.redirect?302:e.status??200,o=new Response(r,{headers:t,status:n});return e.redirect&&o.headers.set("Location",e.redirect),o}async function createHash(e){let t=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,"0")).join("").toString()}function randomString(e){let i2hex=e=>("0"+e.toString(16)).slice(-2),t=crypto.getRandomValues(new Uint8Array(e));return Array.from(t).reduce((e,t)=>e+i2hex(t),"")}async function createCSRFToken({options:e,cookieValue:t,isPost:r,bodyValue:n}){if(t){let[o,i]=t.split("|"),u=await createHash(`${o}${e.secret}`);if(i===u){let e=r&&o===n;return{csrfTokenVerified:e,csrfToken:o}}}let o=randomString(32),i=await createHash(`${o}${e.secret}`),u=`${o}|${i}`;return{cookie:u,csrfToken:o}}let eM={signIn:()=>!0,redirect:({url:e,baseUrl:t})=>e.startsWith("/")?`${t}${e}`:new URL(e).origin===t?e:t,session:({session:e})=>e,jwt:({token:e})=>e};function merge_isObject(e){return e&&"object"==typeof e&&!Array.isArray(e)}function merge(e,...t){if(!t.length)return e;let r=t.shift();if(merge_isObject(e)&&merge_isObject(r))for(let t in r)merge_isObject(r[t])?(e[t]||Object.assign(e,{[t]:{}}),merge(e[t],r[t])):Object.assign(e,{[t]:r[t]});return merge(e,...t)}function parseProviders(e){let{url:t,providerId:r,options:n}=e,o=e.providers.map(e=>{let r="function"==typeof e?e():e,{options:o,...i}=r,u=o?.id??i.id,h=merge(i,o,{signinUrl:`${t}/signin/${u}`,callbackUrl:`${t}/callback/${u}`});return"oauth"===r.type||"oidc"===r.type?(h.redirectProxyUrl??(h.redirectProxyUrl=n.redirectProxyUrl),normalizeOAuth(h)):h});return{providers:o,provider:o.find(({id:e})=>e===r)}}function normalizeOAuth(e){e.issuer&&(e.wellKnown??(e.wellKnown=`${e.issuer}/.well-known/openid-configuration`));let t=normalizeEndpoint(e.authorization,e.issuer);t&&!t.url?.searchParams.has("scope")&&t.url.searchParams.set("scope","openid profile email");let r=normalizeEndpoint(e.token,e.issuer),n=normalizeEndpoint(e.userinfo,e.issuer),o=e.checks??["pkce"];return e.redirectProxyUrl&&(o.includes("state")||o.push("state"),e.redirectProxyUrl=`${e.redirectProxyUrl}/callback/${e.id}`),{...e,authorization:t,token:r,checks:o,userinfo:n,profile:e.profile??defaultProfile,account:e.account??defaultAccount}}let defaultProfile=e=>{let t=e.sub??e.id;if(!t)throw new OAuthProfileParseError("Missing user id");return stripUndefined({id:t.toString(),name:e.name??e.nickname??e.preferred_username,email:e.email,image:e.picture})},defaultAccount=e=>stripUndefined({access_token:e.access_token,id_token:e.id_token,refresh_token:e.refresh_token,expires_at:e.expires_at,scope:e.scope,token_type:e.token_type,session_state:e.session_state});function stripUndefined(e){let t={};for(let[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}function normalizeEndpoint(e,t){if(!e&&t)return;if("string"==typeof e)return{url:new URL(e)};let r=new URL(e?.url??"https://authjs.dev");if(e?.params!=null)for(let[t,n]of Object.entries(e.params))"claims"===t&&(n=JSON.stringify(n)),r.searchParams.set(t,String(n));return{url:r,request:e?.request,conform:e?.conform}}let eL="\x1b[31m",eU="\x1b[0m",eD={error(e){let t=`https://errors.authjs.dev#${e.name.toLowerCase()}`;if(console.error(`${eL}[auth][error][${e.name}]${eU}:${e.message?` ${e.message}.`:""} Read more at ${t}`),e.cause){let{err:t,...r}=e.cause;console.error(`${eL}[auth][cause]${eU}:`,t.stack),console.error(`${eL}[auth][details]${eU}:`,JSON.stringify(r,null,2))}else e.stack&&console.error(e.stack.replace(/.*/,"").substring(1))},warn(e){let t=`https://warnings.authjs.dev#${e}`;console.warn(`[33m[auth][warn][${e}]${eU}`,`Read more: ${t}`)},debug(e,t){console.log(`[90m[auth][debug]:${eU} ${e}`,JSON.stringify(t,null,2))}};function setLogger(e={},t){t||(eD.debug=()=>{}),e.error&&(eD.error=e.error),e.warn&&(eD.warn=e.warn),e.debug&&(eD.debug=e.debug)}function parseUrl(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.toString().startsWith("http")&&(e=`https://${e}`);let r=new URL(e??t),n=("/"===r.pathname?t.pathname:r.pathname).replace(/\/$/,""),o=`${r.origin}${n}`;return{origin:r.origin,host:r.host,path:n,base:o,toString:()=>o}}async function init({authOptions:e,providerId:t,action:r,url:n,cookies:o,callbackUrl:i,csrfToken:u,csrfDisabled:h,isPost:y}){let S=parseUrl(n.origin+n.pathname.replace(`/${r}`,"").replace(`/${t}`,"")),E=new URL(S.toString()),{providers:R,provider:D}=parseProviders({providers:e.providers,url:E,providerId:t,options:e}),K=!1;if((D?.type==="oauth"||D?.type==="oidc")&&D.redirectProxyUrl)try{K=new URL(D.redirectProxyUrl).origin===E.origin}catch{throw TypeError(`redirectProxyUrl must be a valid URL. Received: ${D.redirectProxyUrl}`)}let B={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...e,url:E,action:r,provider:D,cookies:{...defaultCookies(e.useSecureCookies??"https:"===E.protocol),...e.cookies},providers:R,session:{strategy:e.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...e.session},jwt:{secret:e.secret,maxAge:e.session?.maxAge??2592e3,encode:jwt_encode,decode:jwt_decode,...e.jwt},events:eventsErrorHandler(e.events??{},eD),adapter:adapterErrorHandler(e.adapter,eD),callbacks:{...eM,...e.callbacks},logger:eD,callbackUrl:E.origin,isOnRedirectProxy:K},V=[];if(!h){let{csrfToken:e,cookie:t,csrfTokenVerified:r}=await createCSRFToken({options:B,cookieValue:o?.[B.cookies.csrfToken.name],isPost:y,bodyValue:u});B.csrfToken=e,B.csrfTokenVerified=r,t&&V.push({name:B.cookies.csrfToken.name,value:t,options:B.cookies.csrfToken.options})}let{callbackUrl:q,callbackUrlCookie:G}=await createCallbackUrl({options:B,cookieValue:o?.[B.cookies.callbackUrl.name],paramValue:i});return B.callbackUrl=q,G&&V.push({name:B.cookies.callbackUrl.name,value:G,options:B.cookies.callbackUrl.options}),{options:B,cookies:V}}function eventsErrorHandler(e,t){return Object.keys(e).reduce((r,n)=>(r[n]=async(...r)=>{try{let t=e[n];return await t(...r)}catch(e){t.error(new EventError(e))}},r),{})}function adapterErrorHandler(e,t){if(e)return Object.keys(e).reduce((r,n)=>(r[n]=async(...r)=>{try{t.debug(`adapter_${n}`,{args:r});let o=e[n];return await o(...r)}catch(r){let e=new AdapterError(r);throw t.error(e),e}},r),{})}var eH,e$,eJ,eW,eK,eB,eF,eV,eq,ez,eG,eX={},eY=[],eZ=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(e,t){for(var r in t)e[r]=t[r];return e}function a(e){var t=e.parentNode;t&&t.removeChild(e)}function v(e,t,r,n,o){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++eq:o};return null==o&&null!=eV.vnode&&eV.vnode(i),i}function preact_p(e){return e.children}function d(e,t){this.props=e,this.context=t}function _(e,t){if(null==t)return e.__?_(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?_(e):null}function k(e){var t,r;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e){e.__e=e.__c.base=r.__e;break}return k(e)}}function b(e){(!e.__d&&(e.__d=!0)&&ez.push(e)&&!g.__r++||eG!==eV.debounceRendering)&&((eG=eV.debounceRendering)||setTimeout)(g)}function g(){for(var e;g.__r=ez.length;)e=ez.sort(function(e,t){return e.__v.__b-t.__v.__b}),ez=[],e.some(function(e){var t,r,n,o,i;e.__d&&(o=(n=e.__v).__e,(i=e.__P)&&(t=[],(r=s({},n)).__v=n.__v+1,j(i,n,r,e.__n,void 0!==i.ownerSVGElement,null!=n.__h?[o]:null,t,null==o?_(n):o,n.__h),z(t,n),n.__e!=o&&k(n)))})}function w(e,t,r,n,o,i,u,h,y,S){var E,R,D,K,B,V,q,G=n&&n.__k||eY,ee=G.length;for(r.__k=[],E=0;E<t.length;E++)if(null!=(K=r.__k[E]=null==(K=t[E])||"boolean"==typeof K?null:"string"==typeof K||"number"==typeof K||"bigint"==typeof K?v(null,K,null,null,K):Array.isArray(K)?v(preact_p,{children:K},null,null,null):K.__b>0?v(K.type,K.props,K.key,K.ref?K.ref:null,K.__v):K)){if(K.__=r,K.__b=r.__b+1,null===(D=G[E])||D&&K.key==D.key&&K.type===D.type)G[E]=void 0;else for(R=0;R<ee;R++){if((D=G[R])&&K.key==D.key&&K.type===D.type){G[R]=void 0;break}D=null}j(e,K,D=D||eX,o,i,u,h,y,S),B=K.__e,(R=K.ref)&&D.ref!=R&&(q||(q=[]),D.ref&&q.push(D.ref,null,K),q.push(R,K.__c||B,K)),null!=B?(null==V&&(V=B),"function"==typeof K.type&&K.__k===D.__k?K.__d=y=m(K,y,e):y=A(e,K,D,G,B,y),"function"==typeof r.type&&(r.__d=y)):y&&D.__e==y&&y.parentNode!=e&&(y=_(D))}for(r.__e=V,E=ee;E--;)null!=G[E]&&N(G[E],G[E]);if(q)for(E=0;E<q.length;E++)M(q[E],q[++E],q[++E])}function m(e,t,r){for(var n,o=e.__k,i=0;o&&i<o.length;i++)(n=o[i])&&(n.__=e,t="function"==typeof n.type?m(n,t,r):A(r,n,n,o,n.__e,t));return t}function A(e,t,r,n,o,i){var u,h,y;if(void 0!==t.__d)u=t.__d,t.__d=void 0;else if(null==r||o!=i||null==o.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(o),u=null;else{for(h=i,y=0;(h=h.nextSibling)&&y<n.length;y+=1)if(h==o)break e;e.insertBefore(o,i),u=i}return void 0!==u?u:o.nextSibling}function C(e,t,r,n,o){var i;for(i in r)"children"===i||"key"===i||i in t||H(e,i,null,r[i],n);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||r[i]===t[i]||H(e,i,t[i],r[i],n)}function $(e,t,r){"-"===t[0]?e.setProperty(t,r):e[t]=null==r?"":"number"!=typeof r||eZ.test(t)?r:r+"px"}function H(e,t,r,n,o){var i;e:if("style"===t){if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||$(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||$(e.style,t,r[t])}}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase() in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n||e.addEventListener(t,i?T:I,i):e.removeEventListener(t,i?T:I,i);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,r))}}function I(e){this.l[e.type+!1](eV.event?eV.event(e):e)}function T(e){this.l[e.type+!0](eV.event?eV.event(e):e)}function j(e,t,r,n,o,i,u,h,y){var S,E,R,D,K,B,V,q,G,ee,et,er,en,eo,ei,ea=t.type;if(void 0!==t.constructor)return null;null!=r.__h&&(y=r.__h,h=t.__e=r.__e,t.__h=null,i=[h]),(S=eV.__b)&&S(t);try{e:if("function"==typeof ea){if(q=t.props,G=(S=ea.contextType)&&n[S.__c],ee=S?G?G.props.value:S.__:n,r.__c?V=(E=t.__c=r.__c).__=E.__E:("prototype"in ea&&ea.prototype.render?t.__c=E=new ea(q,ee):(t.__c=E=new d(q,ee),E.constructor=ea,E.render=O),G&&G.sub(E),E.props=q,E.state||(E.state={}),E.context=ee,E.__n=n,R=E.__d=!0,E.__h=[],E._sb=[]),null==E.__s&&(E.__s=E.state),null!=ea.getDerivedStateFromProps&&(E.__s==E.state&&(E.__s=s({},E.__s)),s(E.__s,ea.getDerivedStateFromProps(q,E.__s))),D=E.props,K=E.state,R)null==ea.getDerivedStateFromProps&&null!=E.componentWillMount&&E.componentWillMount(),null!=E.componentDidMount&&E.__h.push(E.componentDidMount);else{if(null==ea.getDerivedStateFromProps&&q!==D&&null!=E.componentWillReceiveProps&&E.componentWillReceiveProps(q,ee),!E.__e&&null!=E.shouldComponentUpdate&&!1===E.shouldComponentUpdate(q,E.__s,ee)||t.__v===r.__v){for(E.props=q,E.state=E.__s,t.__v!==r.__v&&(E.__d=!1),E.__v=t,t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(e){e&&(e.__=t)}),et=0;et<E._sb.length;et++)E.__h.push(E._sb[et]);E._sb=[],E.__h.length&&u.push(E);break e}null!=E.componentWillUpdate&&E.componentWillUpdate(q,E.__s,ee),null!=E.componentDidUpdate&&E.__h.push(function(){E.componentDidUpdate(D,K,B)})}if(E.context=ee,E.props=q,E.__v=t,E.__P=e,er=eV.__r,en=0,"prototype"in ea&&ea.prototype.render){for(E.state=E.__s,E.__d=!1,er&&er(t),S=E.render(E.props,E.state,E.context),eo=0;eo<E._sb.length;eo++)E.__h.push(E._sb[eo]);E._sb=[]}else do E.__d=!1,er&&er(t),S=E.render(E.props,E.state,E.context),E.state=E.__s;while(E.__d&&++en<25);E.state=E.__s,null!=E.getChildContext&&(n=s(s({},n),E.getChildContext())),R||null==E.getSnapshotBeforeUpdate||(B=E.getSnapshotBeforeUpdate(D,K)),ei=null!=S&&S.type===preact_p&&null==S.key?S.props.children:S,w(e,Array.isArray(ei)?ei:[ei],t,r,n,o,i,u,h,y),E.base=t.__e,t.__h=null,E.__h.length&&u.push(E),V&&(E.__E=E.__=null),E.__e=!1}else null==i&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=L(r.__e,t,r,n,o,i,u,y);(S=eV.diffed)&&S(t)}catch(e){t.__v=null,(y||null!=i)&&(t.__e=h,t.__h=!!y,i[i.indexOf(h)]=null),eV.__e(e,t,r)}}function z(e,t){eV.__c&&eV.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){eV.__e(e,t.__v)}})}function L(e,t,r,n,o,i,u,h){var y,S,E,R=r.props,D=t.props,K=t.type,B=0;if("svg"===K&&(o=!0),null!=i){for(;B<i.length;B++)if((y=i[B])&&"setAttribute"in y==!!K&&(K?y.localName===K:3===y.nodeType)){e=y,i[B]=null;break}}if(null==e){if(null===K)return document.createTextNode(D);e=o?document.createElementNS("http://www.w3.org/2000/svg",K):document.createElement(K,D.is&&D),i=null,h=!1}if(null===K)R===D||h&&e.data===D||(e.data=D);else{if(i=i&&eF.call(e.childNodes),S=(R=r.props||eX).dangerouslySetInnerHTML,E=D.dangerouslySetInnerHTML,!h){if(null!=i)for(R={},B=0;B<e.attributes.length;B++)R[e.attributes[B].name]=e.attributes[B].value;(E||S)&&(E&&(S&&E.__html==S.__html||E.__html===e.innerHTML)||(e.innerHTML=E&&E.__html||""))}if(C(e,D,R,o,h),E)t.__k=[];else if(w(e,Array.isArray(B=t.props.children)?B:[B],t,r,n,o&&"foreignObject"!==K,i,u,i?i[0]:r.__k&&_(r,0),h),null!=i)for(B=i.length;B--;)null!=i[B]&&a(i[B]);h||("value"in D&&void 0!==(B=D.value)&&(B!==e.value||"progress"===K&&!B||"option"===K&&B!==R.value)&&H(e,"value",B,R.value,!1),"checked"in D&&void 0!==(B=D.checked)&&B!==e.checked&&H(e,"checked",B,R.checked,!1))}return e}function M(e,t,r){try{"function"==typeof e?e(t):e.current=t}catch(e){eV.__e(e,r)}}function N(e,t,r){var n,o;if(eV.unmount&&eV.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||M(n,null,t)),null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){eV.__e(e,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&N(n[o],t,r||"function"!=typeof e.type);r||null==e.__e||a(e.__e),e.__=e.__e=e.__d=void 0}function O(e,t,r){return this.constructor(e,r)}eF=eY.slice,eV={__e:function(e,t,r,n){for(var o,i,u;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),u=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,n||{}),u=o.__d),u)return o.__E=o}catch(t){e=t}throw e}},eq=0,d.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=s({},this.state),"function"==typeof e&&(e=e(s({},r),this.props)),e&&s(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),b(this))},d.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),b(this))},d.prototype.render=preact_p,ez=[],g.__r=0;var eQ=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,e0=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,e1=/[\s\n\\/='"\0<>]/,e2=/^xlink:?./,e4=/["&<]/;function l(e){if(!1===e4.test(e+=""))return e;for(var t=0,r=0,n="",o="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=o,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var dist_s=function(e,t){return String(e).replace(/(\n+)/g,"$1"+(t||"	"))},dist_f=function(e,t,r){return String(e).length>(t||40)||!r&&-1!==String(e).indexOf("\n")||-1!==String(e).indexOf("<")},e5={},e3=/([A-Z])/g;function p(e){var t="";for(var r in e){var n=e[r];null!=n&&""!==n&&(t&&(t+=" "),t+="-"==r[0]?r:e5[r]||(e5[r]=r.replace(e3,"-$1").toLowerCase()),t="number"==typeof n&&!1===eQ.test(r)?t+": "+n+"px;":t+": "+n+";")}return t||void 0}function dist_(e,t){return Array.isArray(t)?t.reduce(dist_,e):null!=t&&!1!==t&&e.push(t),e}function dist_d(){this.__d=!0}function dist_v(e,t){return{__v:e,context:t,props:e.props,setState:dist_d,forceUpdate:dist_d,__d:!0,__h:[]}}function dist_h(e,t){var r=e.contextType,n=r&&t[r.__c];return null!=r?n?n.props.value:r.__:t}var e6=[];function dist_y(e,t,r,n,o,i){if(null==e||"boolean"==typeof e)return"";if("object"!=typeof e)return l(e);var u=r.pretty,h=u&&"string"==typeof u?u:"	";if(Array.isArray(e)){for(var y="",S=0;S<e.length;S++)u&&S>0&&(y+="\n"),y+=dist_y(e[S],t,r,n,o,i);return y}var E,R=e.type,D=e.props,K=!1;if("function"==typeof R){if(K=!0,!r.shallow||!n&&!1!==r.renderRootComponent){if(R===preact_p){var B=[];return dist_(B,e.props.children),dist_y(B,t,r,!1!==r.shallowHighOrder,o,i)}var V,q=e.__c=dist_v(e,t);eV.__b&&eV.__b(e);var G=eV.__r;if(R.prototype&&"function"==typeof R.prototype.render){var ee=dist_h(R,t);(q=e.__c=new R(D,ee)).__v=e,q._dirty=q.__d=!0,q.props=D,null==q.state&&(q.state={}),null==q._nextState&&null==q.__s&&(q._nextState=q.__s=q.state),q.context=ee,R.getDerivedStateFromProps?q.state=Object.assign({},q.state,R.getDerivedStateFromProps(q.props,q.state)):q.componentWillMount&&(q.componentWillMount(),q.state=q._nextState!==q.state?q._nextState:q.__s!==q.state?q.__s:q.state),G&&G(e),V=q.render(q.props,q.state,q.context)}else for(var et=dist_h(R,t),er=0;q.__d&&er++<25;)q.__d=!1,G&&G(e),V=R.call(e.__c,D,et);return q.getChildContext&&(t=Object.assign({},t,q.getChildContext())),eV.diffed&&eV.diffed(e),dist_y(V,t,r,!1!==r.shallowHighOrder,o,i)}R=(E=R).displayName||E!==Function&&E.name||function(e){var t=(Function.prototype.toString.call(e).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!t){for(var r=-1,n=e6.length;n--;)if(e6[n]===e){r=n;break}r<0&&(r=e6.push(e)-1),t="UnnamedComponent"+r}return t}(E)}var en,eo,ei="<"+R;if(D){var ea=Object.keys(D);r&&!0===r.sortAttributes&&ea.sort();for(var es=0;es<ea.length;es++){var ec=ea[es],el=D[ec];if("children"!==ec){if(!e1.test(ec)&&(r&&r.allAttributes||"key"!==ec&&"ref"!==ec&&"__self"!==ec&&"__source"!==ec)){if("defaultValue"===ec)ec="value";else if("defaultChecked"===ec)ec="checked";else if("defaultSelected"===ec)ec="selected";else if("className"===ec){if(void 0!==D.class)continue;ec="class"}else o&&e2.test(ec)&&(ec=ec.toLowerCase().replace(/^xlink:?/,"xlink:"));if("htmlFor"===ec){if(D.for)continue;ec="for"}"style"===ec&&el&&"object"==typeof el&&(el=p(el)),"a"===ec[0]&&"r"===ec[1]&&"boolean"==typeof el&&(el=String(el));var eu=r.attributeHook&&r.attributeHook(ec,el,t,r,K);if(eu||""===eu)ei+=eu;else if("dangerouslySetInnerHTML"===ec)eo=el&&el.__html;else if("textarea"===R&&"value"===ec)en=el;else if((el||0===el||""===el)&&"function"!=typeof el){if(!(!0!==el&&""!==el||(el=ec,r&&r.xml))){ei=ei+" "+ec;continue}if("value"===ec){if("select"===R){i=el;continue}"option"===R&&i==el&&void 0===D.selected&&(ei+=" selected")}ei=ei+" "+ec+'="'+l(el)+'"'}}}else en=el}}if(u){var ed=ei.replace(/\n\s*/," ");ed===ei||~ed.indexOf("\n")?u&&~ei.indexOf("\n")&&(ei+="\n"):ei=ed}if(ei+=">",e1.test(R))throw Error(R+" is not a valid HTML tag name in "+ei);var ep,ef=e0.test(R)||r.voidElements&&r.voidElements.test(R),eh=[];if(eo)u&&dist_f(eo)&&(eo="\n"+h+dist_s(eo,h)),ei+=eo;else if(null!=en&&dist_(ep=[],en).length){for(var eg=u&&~ei.indexOf("\n"),em=!1,ey=0;ey<ep.length;ey++){var e_=ep[ey];if(null!=e_&&!1!==e_){var ev=dist_y(e_,t,r,!0,"svg"===R||"foreignObject"!==R&&o,i);if(u&&!eg&&dist_f(ev)&&(eg=!0),ev){if(u){var eb=ev.length>0&&"<"!=ev[0];em&&eb?eh[eh.length-1]+=ev:eh.push(ev),em=eb}else eh.push(ev)}}}if(u&&eg)for(var ew=eh.length;ew--;)eh[ew]="\n"+h+dist_s(eh[ew],h)}if(eh.length||eo)ei+=eh.join("");else if(r&&r.xml)return ei.substring(0,ei.length-1)+" />";return!ef||ep||eo?(u&&~ei.indexOf("\n")&&(ei+="\n"),ei=ei+"</"+R+">"):ei=ei.replace(/>$/," />"),ei}var e8={shallow:!0};dist_k.render=dist_k;var e9=[];function dist_k(e,t,r){t=t||{};var n,o=eV.__s;return eV.__s=!0,n=r&&(r.pretty||r.voidElements||r.sortAttributes||r.shallow||r.allAttributes||r.xml||r.attributeHook)?dist_y(e,t,r):dist_j(e,t,!1,void 0),eV.__c&&eV.__c(e,e9),eV.__s=o,e9.length=0,n}function dist_S(e,t){return"className"===e?"class":"htmlFor"===e?"for":"defaultValue"===e?"value":"defaultChecked"===e?"checked":"defaultSelected"===e?"selected":t&&e2.test(e)?e.toLowerCase().replace(/^xlink:?/,"xlink:"):e}function dist_w(e,t){return"style"===e&&null!=t&&"object"==typeof t?p(t):"a"===e[0]&&"r"===e[1]&&"boolean"==typeof t?String(t):t}var e7=Array.isArray,te=Object.assign;function dist_j(e,t,r,n){if(null==e||!0===e||!1===e||""===e)return"";if("object"!=typeof e)return l(e);if(e7(e)){for(var o="",i=0;i<e.length;i++)o+=dist_j(e[i],t,r,n);return o}eV.__b&&eV.__b(e);var u=e.type,h=e.props;if("function"==typeof u){if(u===preact_p)return dist_j(e.props.children,t,r,n);K=u.prototype&&"function"==typeof u.prototype.render?(y=t,E=dist_h(S=e.type,y),R=new S(e.props,E),e.__c=R,R.__v=e,R.__d=!0,R.props=e.props,null==R.state&&(R.state={}),null==R.__s&&(R.__s=R.state),R.context=E,S.getDerivedStateFromProps?R.state=te({},R.state,S.getDerivedStateFromProps(R.props,R.state)):R.componentWillMount&&(R.componentWillMount(),R.state=R.__s!==R.state?R.__s:R.state),(D=eV.__r)&&D(e),R.render(R.props,R.state,R.context)):function(e,t){var r,n=dist_v(e,t),o=dist_h(e.type,t);e.__c=n;for(var i=eV.__r,u=0;n.__d&&u++<25;)n.__d=!1,i&&i(e),r=e.type.call(n,e.props,o);return r}(e,t);var y,S,E,R,D,K,B=e.__c;B.getChildContext&&(t=te({},t,B.getChildContext()));var V=dist_j(K,t,r,n);return eV.diffed&&eV.diffed(e),V}var q,G,ee="<";if(ee+=u,h)for(var et in q=h.children,h){var er=h[et];if(!("key"===et||"ref"===et||"__self"===et||"__source"===et||"children"===et||"className"===et&&"class"in h||"htmlFor"===et&&"for"in h||e1.test(et))){if(er=dist_w(et=dist_S(et,r),er),"dangerouslySetInnerHTML"===et)G=er&&er.__html;else if("textarea"===u&&"value"===et)q=er;else if((er||0===er||""===er)&&"function"!=typeof er){if(!0===er||""===er){er=et,ee=ee+" "+et;continue}if("value"===et){if("select"===u){n=er;continue}"option"!==u||n!=er||"selected"in h||(ee+=" selected")}ee=ee+" "+et+'="'+l(er)+'"'}}}var en=ee;if(ee+=">",e1.test(u))throw Error(u+" is not a valid HTML tag name in "+ee);var eo="",ei=!1;if(G)eo+=G,ei=!0;else if("string"==typeof q)eo+=l(q),ei=!0;else if(e7(q))for(var ea=0;ea<q.length;ea++){var es=q[ea];if(null!=es&&!1!==es){var ec=dist_j(es,t,"svg"===u||"foreignObject"!==u&&r,n);ec&&(eo+=ec,ei=!0)}}else if(null!=q&&!1!==q&&!0!==q){var el=dist_j(q,t,"svg"===u||"foreignObject"!==u&&r,n);el&&(eo+=el,ei=!0)}if(eV.diffed&&eV.diffed(e),ei)ee+=eo;else if(e0.test(u))return en+" />";return ee+"</"+u+">"}dist_k.shallowRender=function(e,t){return dist_k(e,t,e8)};var tt=0;function jsxRuntime_o(e,t,r,n,o){var i,u,h={};for(u in t)"ref"==u?i=t[u]:h[u]=t[u];var y={type:e,props:h,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--tt,__source:o,__self:n};if("function"==typeof e&&(i=e.defaultProps))for(u in i)void 0===h[u]&&(h[u]=i[u]);return eV.vnode&&eV.vnode(y),y}function ErrorPage(e){let{url:t,error:r="default",theme:n}=e,o=`${t}/signin`,i={default:{status:200,heading:"Error",message:jsxRuntime_o("p",{children:jsxRuntime_o("a",{className:"site",href:t?.origin,children:t?.host})})},configuration:{status:500,heading:"Server error",message:jsxRuntime_o("div",{children:[jsxRuntime_o("p",{children:"There is a problem with the server configuration."}),jsxRuntime_o("p",{children:"Check the server logs for more information."})]})},accessdenied:{status:403,heading:"Access Denied",message:jsxRuntime_o("div",{children:[jsxRuntime_o("p",{children:"You do not have permission to sign in."}),jsxRuntime_o("p",{children:jsxRuntime_o("a",{className:"button",href:o,children:"Sign in"})})]})},verification:{status:403,heading:"Unable to sign in",message:jsxRuntime_o("div",{children:[jsxRuntime_o("p",{children:"The sign in link is no longer valid."}),jsxRuntime_o("p",{children:"It may have been used already or it may have expired."})]}),signin:jsxRuntime_o("p",{children:jsxRuntime_o("a",{className:"button",href:o,children:"Sign in"})})}},{status:u,heading:h,message:y,signin:S}=i[r.toLowerCase()]??i.default;return{status:u,html:jsxRuntime_o("div",{className:"error",children:[n?.brandColor&&jsxRuntime_o("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n?.brandColor}
        }
      `}}),jsxRuntime_o("div",{className:"card",children:[n?.logo&&jsxRuntime_o("img",{src:n?.logo,alt:"Logo",className:"logo"}),jsxRuntime_o("h1",{children:h}),jsxRuntime_o("div",{className:"message",children:y}),S]})]})}}let tr={default:"Unable to sign in.",signin:"Try signing in with a different account.",oauthsignin:"Try signing in with a different account.",oauthcallbackerror:"Try signing in with a different account.",oauthcreateaccount:"Try signing in with a different account.",emailcreateaccount:"Try signing in with a different account.",callback:"Try signing in with a different account.",oauthaccountnotlinked:"To confirm your identity, sign in with the same account you used originally.",emailsignin:"The e-mail could not be sent.",credentialssignin:"Sign in failed. Check the details you provided are correct.",sessionrequired:"Please sign in to access this page."};function SigninPage(e){let{csrfToken:t,providers:r=[],callbackUrl:n,theme:o,email:i,error:u}=e;"undefined"!=typeof document&&o.brandColor&&document.documentElement.style.setProperty("--brand-color",o.brandColor),"undefined"!=typeof document&&o.buttonText&&document.documentElement.style.setProperty("--button-text-color",o.buttonText);let h=u&&(tr[u.toLowerCase()]??tr.default),y="https://authjs.dev/img/providers";return jsxRuntime_o("div",{className:"signin",children:[o.brandColor&&jsxRuntime_o("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${o.brandColor}}`}}),o.buttonText&&jsxRuntime_o("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${o.buttonText}
        }
      `}}),jsxRuntime_o("div",{className:"card",children:[h&&jsxRuntime_o("div",{className:"error",children:jsxRuntime_o("p",{children:h})}),r.map((e,o)=>jsxRuntime_o("div",{className:"provider",children:["oauth"===e.type||"oidc"===e.type?jsxRuntime_o("form",{action:e.signinUrl,method:"POST",children:[jsxRuntime_o("input",{type:"hidden",name:"csrfToken",value:t}),n&&jsxRuntime_o("input",{type:"hidden",name:"callbackUrl",value:n}),jsxRuntime_o("button",{type:"submit",className:"button",style:{"--provider-bg":e.style?.bg??"","--provider-dark-bg":e.style?.bgDark??"","--provider-color":e.style?.text??"","--provider-dark-color":e.style?.textDark??"",gap:8},children:[e.style?.logo&&jsxRuntime_o("img",{loading:"lazy",height:24,width:24,id:"provider-logo",src:`${e.style.logo.startsWith("/")?y:""}${e.style.logo}`}),e.style?.logoDark&&jsxRuntime_o("img",{loading:"lazy",height:24,width:24,id:"provider-logo-dark",src:`${e.style.logo.startsWith("/")?y:""}${e.style.logoDark}`}),jsxRuntime_o("span",{children:["Sign in with ",e.name]})]})]}):null,("email"===e.type||"credentials"===e.type)&&o>0&&"email"!==r[o-1].type&&"credentials"!==r[o-1].type&&jsxRuntime_o("hr",{}),"email"===e.type&&jsxRuntime_o("form",{action:e.signinUrl,method:"POST",children:[jsxRuntime_o("input",{type:"hidden",name:"csrfToken",value:t}),jsxRuntime_o("label",{className:"section-header",htmlFor:`input-email-for-${e.id}-provider`,children:"Email"}),jsxRuntime_o("input",{id:`input-email-for-${e.id}-provider`,autoFocus:!0,type:"email",name:"email",value:i,placeholder:"email@example.com",required:!0}),jsxRuntime_o("button",{type:"submit",children:["Sign in with ",e.name]})]}),"credentials"===e.type&&jsxRuntime_o("form",{action:e.callbackUrl,method:"POST",children:[jsxRuntime_o("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.credentials).map(t=>jsxRuntime_o("div",{children:[jsxRuntime_o("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.credentials[t].label??t}),jsxRuntime_o("input",{name:t,id:`input-${t}-for-${e.id}-provider`,type:e.credentials[t].type??"text",placeholder:e.credentials[t].placeholder??"",...e.credentials[t]})]},`input-group-${e.id}`)),jsxRuntime_o("button",{id:"submitButton",type:"submit",children:["Sign in with ",e.name]})]}),("email"===e.type||"credentials"===e.type)&&o+1<r.length&&jsxRuntime_o("hr",{})]},e.id))]})]})}function SignoutPage(e){let{url:t,csrfToken:r,theme:n}=e;return jsxRuntime_o("div",{className:"signout",children:[n.brandColor&&jsxRuntime_o("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n.brandColor}
        }
      `}}),n.buttonText&&jsxRuntime_o("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${n.buttonText}
        }
      `}}),jsxRuntime_o("div",{className:"card",children:[n.logo&&jsxRuntime_o("img",{src:n.logo,alt:"Logo",className:"logo"}),jsxRuntime_o("h1",{children:"Signout"}),jsxRuntime_o("p",{children:"Are you sure you want to sign out?"}),jsxRuntime_o("form",{action:`${t}/signout`,method:"POST",children:[jsxRuntime_o("input",{type:"hidden",name:"csrfToken",value:r}),jsxRuntime_o("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}let tn=`:root {
  --border-width: 1px;
  --border-radius: 0.5rem;
  --color-error: #c94b4b;
  --color-info: #157efb;
  --color-info-text: #fff;
}

.__next-auth-theme-auto,
.__next-auth-theme-light {
  --color-background: #ececec;
  --color-background-card: #fff;
  --color-text: #000;
  --color-primary: #444;
  --color-control-border: #bbb;
  --color-button-active-background: #f9f9f9;
  --color-button-active-border: #aaa;
  --color-separator: #ccc;
}

.__next-auth-theme-dark {
  --color-background: #161b22;
  --color-background-card: #0d1117;
  --color-text: #fff;
  --color-primary: #ccc;
  --color-control-border: #555;
  --color-button-active-background: #060606;
  --color-button-active-border: #666;
  --color-separator: #444;
}

@media (prefers-color-scheme: dark) {
  .__next-auth-theme-auto {
    --color-background: #161b22;
    --color-background-card: #0d1117;
    --color-text: #fff;
    --color-primary: #ccc;
    --color-control-border: #555;
    --color-button-active-background: #060606;
    --color-button-active-border: #666;
    --color-separator: #444;
  }
}

body {
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
    "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif,
    "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
}

h1 {
  font-weight: 400;
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  color: var(--color-text);
}

p {
  color: var(--color-text);
}

form {
  margin: 0;
  padding: 0;
}

label {
  font-weight: 500;
  text-align: left;
  margin-bottom: 0.25rem;
  display: block;
  color: var(--color-text);
}

input[type] {
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: 0.5rem 1rem;
  border: var(--border-width) solid var(--color-control-border);
  background: var(--color-background-card);
  font-size: 1rem;
  border-radius: var(--border-radius);
  color: var(--color-text);
}

input[type]:focus {
    box-shadow: none;
  }

p {
  margin: 0 0 1.5rem 0;
  padding: 0 1rem;
  font-size: 1.1rem;
  line-height: 2rem;
}

a.button {
  text-decoration: none;
  line-height: 1rem;
}

a.button:link,
  a.button:visited {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

button span {
  flex-grow: 1;
}

button,
a.button {
  margin: 0 0 0.75rem 0;
  padding: 0.75rem 1rem;
  color: var(--provider-color, var(--color-primary));
  background-color: var(--provider-bg, var(--color-background-card));
  font-size: 1.1rem;
  min-height: 62px;
  border-color: rgba(0, 0, 0, 0.1);
  border-radius: var(--border-radius);
  transition: all 0.1s ease-in-out;
  font-weight: 500;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

@media (max-width: 450px) {

button,
a.button {
    font-size: 0.9rem
}
  }

button:hover, a.button:hover {
    cursor: pointer;
  }

button:active, a.button:active {
    cursor: pointer;
  }

button #provider-logo, a.button #provider-logo {
    width: 25px;
    display: block;
  }

button #provider-logo-dark, a.button #provider-logo-dark {
    display: none;
  }

#submitButton {
  color: var(--button-text-color, var(--color-info-text));
  background-color: var(--brand-color, var(--color-info));
  width: 100%;
}

@media (prefers-color-scheme: dark) {
  button,
  a.button {
    color: var(--provider-dark-color, var(--color-primary));
    background-color: var(--provider-dark-bg, var(--color-background));
  }
  #provider-logo {
    display: none !important;
  }
  #provider-logo-dark {
    width: 25px;
    display: block !important;
  }
}

a.site {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 1rem;
  line-height: 2rem;
}

a.site:hover {
    text-decoration: underline;
  }

.page {
  position: absolute;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
}

.page > div {
    text-align: center;
  }

.error a.button {
    display: inline-block;
    padding-left: 2rem;
    padding-right: 2rem;
    margin-top: 0.5rem;
  }

.error .message {
    margin-bottom: 1.5rem;
  }

.signin input[type="text"] {
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

.signin hr {
    display: block;
    border: 0;
    border-top: 1px solid var(--color-separator);
    margin: 2rem auto 1rem auto;
    overflow: visible;
  }

.signin hr::before {
      content: "or";
      background: var(--color-background-card);
      color: #888;
      padding: 0 0.4rem;
      position: relative;
      top: -0.7rem;
    }

.signin .error {
    background: #f5f5f5;
    font-weight: 500;
    border-radius: 0.3rem;
    background: var(--color-error);
  }

.signin .error p {
      text-align: left;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      line-height: 1.2rem;
      color: var(--color-info-text);
    }

.signin > div,
  .signin form {
    display: block;
  }

.signin > div input[type], .signin form input[type] {
      margin-bottom: 0.5rem;
    }

.signin > div button, .signin form button {
      width: 100%;
    }

.signin > div,
  .signin form {

    max-width: 300px;
}

.logo {
  display: inline-block;
  max-width: 150px;
  margin-top: 20px;
  margin-bottom: 25px;
  max-height: 70px;
}

@media screen and (min-width: 450px) {

.card {
    width: 350px
}
  }

@media screen and (max-width: 450px) {

.card {
    width: 200px
}
  }

.card {
  margin: 20px 0 20px 0;
  background-color: var(--color-background-card);
  border-radius: 30px;
  padding: 20px 50px;
}

.card .header {
    color: var(--color-primary);
  }

.section-header {
  color: var(--color-text);
}
`;function VerifyRequestPage(e){let{url:t,theme:r}=e;return jsxRuntime_o("div",{className:"verify-request",children:[r.brandColor&&jsxRuntime_o("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${r.brandColor}
        }
      `}}),jsxRuntime_o("div",{className:"card",children:[r.logo&&jsxRuntime_o("img",{src:r.logo,alt:"Logo",className:"logo"}),jsxRuntime_o("h1",{children:"Check your email"}),jsxRuntime_o("p",{children:"A sign in link has been sent to your email address."}),jsxRuntime_o("p",{children:jsxRuntime_o("a",{className:"site",href:t.origin,children:t.host})})]})]})}function send({html:e,title:t,status:r,cookies:n,theme:o}){return{cookies:n,status:r,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${tn}</style><title>${t}</title></head><body class="__next-auth-theme-${o?.colorScheme??"auto"}"><div class="page">${dist_k(e)}</div></body></html>`}}function renderPage(e){let{url:t,theme:r,query:n,cookies:o}=e;return{signin:t=>send({cookies:o,theme:r,html:SigninPage({csrfToken:e.csrfToken,providers:e.providers?.filter(e=>["email","oauth","oidc"].includes(e.type)||"credentials"===e.type&&e.credentials||!1),callbackUrl:e.callbackUrl,theme:r,...n,...t}),title:"Sign In"}),signout:n=>send({cookies:o,theme:r,html:SignoutPage({csrfToken:e.csrfToken,url:t,theme:r,...n}),title:"Sign Out"}),verifyRequest:e=>send({cookies:o,theme:r,html:VerifyRequestPage({url:t,theme:r,...e}),title:"Verify Request"}),error:e=>send({cookies:o,theme:r,...ErrorPage({url:t,theme:r,...e}),title:"Error"})}}function fromDate(e,t=Date.now()){return new Date(t+1e3*e)}async function handleLogin(e,t,r,n){if(!r?.providerAccountId||!r.type)throw Error("Missing or invalid provider account");if(!["email","oauth","oidc"].includes(r.type))throw Error("Provider not supported");let{adapter:o,jwt:i,events:u,session:{strategy:h,generateSessionToken:y}}=n;if(!o)return{user:t,account:r};let S=r,{createUser:E,updateUser:R,getUser:D,getUserByAccount:K,getUserByEmail:B,linkAccount:V,createSession:q,getSessionAndUser:G,deleteSession:ee}=o,et=null,er=null,en=!1,eo="jwt"===h;if(e){if(eo)try{(et=await i.decode({...i,token:e}))&&"sub"in et&&et.sub&&(er=await D(et.sub))}catch{}else{let t=await G(e);t&&(et=t.session,er=t.user)}}if("email"===S.type){let r=await B(t.email);if(r)er?.id!==r.id&&!eo&&e&&await ee(e),er=await R({id:r.id,emailVerified:new Date}),await u.updateUser?.({user:er});else{let{id:e,...r}={...t,emailVerified:new Date};er=await E(r),await u.createUser?.({user:er}),en=!0}return{session:et=eo?{}:await q({sessionToken:y(),userId:er.id,expires:fromDate(n.session.maxAge)}),user:er,isNewUser:en}}let ei=await K({providerAccountId:S.providerAccountId,provider:S.provider});if(ei){if(er){if(ei.id===er.id)return{session:et,user:er,isNewUser:en};throw new OAuthAccountNotLinked("The account is already associated with another user",{provider:S.provider})}return{session:et=eo?{}:await q({sessionToken:y(),userId:ei.id,expires:fromDate(n.session.maxAge)}),user:ei,isNewUser:en}}{let{provider:e}=n,{type:r,provider:o,providerAccountId:i,userId:h,...R}=S;if(S=Object.assign(e.account(R)??{},{providerAccountId:i,provider:o,type:r,userId:h}),er)return await V({...S,userId:er.id}),await u.linkAccount?.({user:er,account:S,profile:t}),{session:et,user:er,isNewUser:en};let D=t.email?await B(t.email):null;if(D){let e=n.provider;if(e?.allowDangerousEmailAccountLinking)er=D;else throw new OAuthAccountNotLinked("Another account already exists with the same e-mail address",{provider:S.provider})}else{let{id:e,...r}={...t,emailVerified:null};er=await E(r)}return await u.createUser?.({user:er}),await V({...S,userId:er.id}),await u.linkAccount?.({user:er,account:S,profile:t}),{session:et=eo?{}:await q({sessionToken:y(),userId:er.id,expires:fromDate(n.session.maxAge)}),user:er,isNewUser:!0}}}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(u="oauth4webapi/v2.3.0");let to=Symbol(),ti=Symbol(),ts=new TextEncoder,tc=new TextDecoder;function buf(e){return"string"==typeof e?ts.encode(e):tc.decode(e)}function encodeBase64Url(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t=[];for(let r=0;r<e.byteLength;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function decodeBase64Url(e){try{let t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function b64u(e){return"string"==typeof e?decodeBase64Url(e):encodeBase64Url(e)}let LRU=class LRU{constructor(e){this.cache=new Map,this._cache=new Map,this.maxSize=e}get(e){let t=this.cache.get(e);return t||((t=this._cache.get(e))?(this.update(e,t),t):void 0)}has(e){return this.cache.has(e)||this._cache.has(e)}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this.update(e,t),this}delete(e){return this.cache.has(e)?this.cache.delete(e):!!this._cache.has(e)&&this._cache.delete(e)}update(e,t){this.cache.set(e,t),this.cache.size>=this.maxSize&&(this._cache=this.cache,this.cache=new Map)}};let UnsupportedOperationError=class UnsupportedOperationError extends Error{constructor(e){super(e??"operation not supported"),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}};let OperationProcessingError=class OperationProcessingError extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}};let tl=new LRU(100);function build_isCryptoKey(e){return e instanceof CryptoKey}function isPrivateKey(e){return build_isCryptoKey(e)&&"private"===e.type}function isPublicKey(e){return build_isCryptoKey(e)&&"public"===e.type}function processDpopNonce(e){let t=new URL(e.url);return e.headers.has("dpop-nonce")&&tl.set(t.origin,e.headers.get("dpop-nonce")),e}function isJsonObject(e){return!(null===e||"object"!=typeof e||Array.isArray(e))}function prepareHeaders(e){if(void 0!==e&&!(e instanceof Headers))throw TypeError('"options.headers" must be an instance of Headers');let t=new Headers(e);if(u&&!t.has("user-agent")&&t.set("user-agent",u),t.has("authorization"))throw TypeError('"options.headers" must not include the "authorization" header name');if(t.has("dpop"))throw TypeError('"options.headers" must not include the "dpop" header name');return t}function signal(e){if("function"==typeof e&&(e=e()),!(e instanceof AbortSignal))throw TypeError('"options.signal" must return or be an instance of AbortSignal');return e}async function discoveryRequest(e,t){if(!(e instanceof URL))throw TypeError('"issuerIdentifier" must be an instance of URL');if("https:"!==e.protocol&&"http:"!==e.protocol)throw TypeError('"issuer.protocol" must be "https:" or "http:"');let r=new URL(e.href);switch(t?.algorithm){case void 0:case"oidc":r.pathname=`${r.pathname}/.well-known/openid-configuration`.replace("//","/");break;case"oauth2":"/"===r.pathname?r.pathname=".well-known/oauth-authorization-server":r.pathname=`.well-known/oauth-authorization-server/${r.pathname}`.replace("//","/");break;default:throw TypeError('"options.algorithm" must be "oidc" (default), or "oauth2"')}let n=prepareHeaders(t?.headers);return n.set("accept","application/json"),fetch(r.href,{headers:n,method:"GET",redirect:"manual",signal:t?.signal?signal(t.signal):null}).then(processDpopNonce)}function validateString(e){return"string"==typeof e&&0!==e.length}async function processDiscoveryResponse(e,t){let r;if(!(e instanceof URL))throw TypeError('"expectedIssuer" must be an instance of URL');if(!(t instanceof Response))throw TypeError('"response" must be an instance of Response');if(200!==t.status)throw new OperationProcessingError('"response" is not a conform Authorization Server Metadata response');assertReadableResponse(t);try{r=await t.json()}catch{throw new OperationProcessingError('failed to parse "response" body as JSON')}if(!isJsonObject(r))throw new OperationProcessingError('"response" body must be a top level object');if(!validateString(r.issuer))throw new OperationProcessingError('"response" body "issuer" property must be a non-empty string');if(new URL(r.issuer).href!==e.href)throw new OperationProcessingError('"response" body "issuer" does not match "expectedIssuer"');return r}function randomBytes(){return b64u(crypto.getRandomValues(new Uint8Array(32)))}function generateRandomCodeVerifier(){return randomBytes()}function generateRandomState(){return randomBytes()}function generateRandomNonce(){return randomBytes()}async function calculatePKCECodeChallenge(e){if(!validateString(e))throw TypeError('"codeVerifier" must be a non-empty string');return b64u(await crypto.subtle.digest({name:"SHA-256"},buf(e)))}function getKeyAndKid(e){if(e instanceof CryptoKey)return{key:e};if(!(e?.key instanceof CryptoKey))return{};if(void 0!==e.kid&&!validateString(e.kid))throw TypeError('"kid" must be a non-empty string');return{key:e.key,kid:e.kid}}function formUrlEncode(e){return encodeURIComponent(e).replace(/%20/g,"+")}function clientSecretBasic(e,t){let r=formUrlEncode(e),n=formUrlEncode(t),o=btoa(`${r}:${n}`);return`Basic ${o}`}function psAlg(e){switch(e.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new UnsupportedOperationError("unsupported RsaHashedKeyAlgorithm hash name")}}function rsAlg(e){switch(e.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new UnsupportedOperationError("unsupported RsaHashedKeyAlgorithm hash name")}}function esAlg(e){switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new UnsupportedOperationError("unsupported EcKeyAlgorithm namedCurve")}}function keyToJws(e){switch(e.algorithm.name){case"RSA-PSS":return psAlg(e);case"RSASSA-PKCS1-v1_5":return rsAlg(e);case"ECDSA":return esAlg(e);case"Ed25519":case"Ed448":return"EdDSA";default:throw new UnsupportedOperationError("unsupported CryptoKey algorithm name")}}function getClockSkew(e){return Number.isFinite(e[to])?e[to]:0}function getClockTolerance(e){let t=e[ti];return Number.isFinite(t)&&-1!==Math.sign(t)?t:30}function epochTime(){return Math.floor(Date.now()/1e3)}function clientAssertion(e,t){let r=epochTime()+getClockSkew(t);return{jti:randomBytes(),aud:[e.issuer,e.token_endpoint],exp:r+60,iat:r,nbf:r,iss:t.client_id,sub:t.client_id}}async function privateKeyJwt(e,t,r,n){return jwt({alg:keyToJws(r),kid:n},clientAssertion(e,t),r)}function assertAs(e){if("object"!=typeof e||null===e)throw TypeError('"as" must be an object');if(!validateString(e.issuer))throw TypeError('"as.issuer" property must be a non-empty string');return!0}function assertClient(e){if("object"!=typeof e||null===e)throw TypeError('"client" must be an object');if(!validateString(e.client_id))throw TypeError('"client.client_id" property must be a non-empty string');return!0}function assertClientSecret(e){if(!validateString(e))throw TypeError('"client.client_secret" property must be a non-empty string');return e}function assertNoClientPrivateKey(e,t){if(void 0!==t)throw TypeError(`"options.clientPrivateKey" property must not be provided when ${e} client authentication method is used.`)}function assertNoClientSecret(e,t){if(void 0!==t)throw TypeError(`"client.client_secret" property must not be provided when ${e} client authentication method is used.`)}async function clientAuthentication(e,t,r,n,o){switch(r.delete("client_secret"),r.delete("client_assertion_type"),r.delete("client_assertion"),t.token_endpoint_auth_method){case void 0:case"client_secret_basic":assertNoClientPrivateKey("client_secret_basic",o),n.set("authorization",clientSecretBasic(t.client_id,assertClientSecret(t.client_secret)));break;case"client_secret_post":assertNoClientPrivateKey("client_secret_post",o),r.set("client_id",t.client_id),r.set("client_secret",assertClientSecret(t.client_secret));break;case"private_key_jwt":{if(assertNoClientSecret("private_key_jwt",t.client_secret),void 0===o)throw TypeError('"options.clientPrivateKey" must be provided when "client.token_endpoint_auth_method" is "private_key_jwt"');let{key:n,kid:i}=getKeyAndKid(o);if(!isPrivateKey(n))throw TypeError('"options.clientPrivateKey.key" must be a private CryptoKey');r.set("client_id",t.client_id),r.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),r.set("client_assertion",await privateKeyJwt(e,t,n,i));break}case"none":assertNoClientSecret("none",t.client_secret),assertNoClientPrivateKey("none",o),r.set("client_id",t.client_id);break;default:throw new UnsupportedOperationError("unsupported client token_endpoint_auth_method")}}async function jwt(e,t,r){if(!r.usages.includes("sign"))throw TypeError('CryptoKey instances used for signing assertions must include "sign" in their "usages"');let n=`${b64u(buf(JSON.stringify(e)))}.${b64u(buf(JSON.stringify(t)))}`,o=b64u(await crypto.subtle.sign(keyToSubtle(r),r,buf(n)));return`${n}.${o}`}async function dpopProofJwt(e,t,r,n,o,i){let{privateKey:u,publicKey:h,nonce:y=tl.get(r.origin)}=t;if(!isPrivateKey(u))throw TypeError('"DPoP.privateKey" must be a private CryptoKey');if(!isPublicKey(h))throw TypeError('"DPoP.publicKey" must be a public CryptoKey');if(void 0!==y&&!validateString(y))throw TypeError('"DPoP.nonce" must be a non-empty string or undefined');if(!h.extractable)throw TypeError('"DPoP.publicKey.extractable" must be true');let S=epochTime()+o,E=await jwt({alg:keyToJws(u),typ:"dpop+jwt",jwk:await publicJwk(h)},{iat:S,jti:randomBytes(),htm:n,nonce:y,htu:`${r.origin}${r.pathname}`,ath:i?b64u(await crypto.subtle.digest({name:"SHA-256"},buf(i))):void 0},u);e.set("dpop",E)}async function publicJwk(e){if(h||(h=new WeakMap),h.has(e))return h.get(e);let{kty:t,e:r,n,x:o,y:i,crv:u}=await crypto.subtle.exportKey("jwk",e),y={kty:t,e:r,n,x:o,y:i,crv:u};return h.set(e,y),y}function isOAuth2Error(e){return!("object"!=typeof e||Array.isArray(e))&&null!==e&&void 0!==e.error}function unquote(e){return e.length>=2&&'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}let tu=/((?:,|, )?[0-9a-zA-Z!#$%&'*+-.^_`|~]+=)/,td=/(?:^|, ?)([0-9a-zA-Z!#$%&'*+\-.^_`|~]+)(?=$|[ ,])/g;function wwwAuth(e,t){let r=t.split(tu).slice(1);if(!r.length)return{scheme:e.toLowerCase(),parameters:{}};r[r.length-1]=r[r.length-1].replace(/,$/,"");let n={};for(let e=1;e<r.length;e+=2){let t=e;if('"'===r[t][0])for(;'"'!==r[t].slice(-1)&&++e<r.length;)r[t]+=r[e];let o=r[t-1].replace(/^(?:, ?)|=$/g,"").toLowerCase();n[o]=unquote(r[t])}return{scheme:e.toLowerCase(),parameters:n}}function parseWwwAuthenticateChallenges(e){if(!(e instanceof Response))throw TypeError('"response" must be an instance of Response');if(!e.headers.has("www-authenticate"))return;let t=e.headers.get("www-authenticate"),r=[];for(let{1:e,index:n}of t.matchAll(td))r.push([e,n]);if(!r.length)return;let n=r.map(([e,r],n,o)=>{let i=o[n+1];return wwwAuth(e,i?t.slice(r,i[1]):t.slice(r))});return n}async function protectedResourceRequest(e,t,r,n,o,i){if(!validateString(e))throw TypeError('"accessToken" must be a non-empty string');if(!(r instanceof URL))throw TypeError('"url" must be an instance of URL');return n=prepareHeaders(n),i?.DPoP===void 0?n.set("authorization",`Bearer ${e}`):(await dpopProofJwt(n,i.DPoP,r,"GET",getClockSkew({[to]:i?.clockSkew}),e),n.set("authorization",`DPoP ${e}`)),fetch(r.href,{body:o,headers:n,method:t,redirect:"manual",signal:i?.signal?signal(i.signal):null}).then(processDpopNonce)}async function userInfoRequest(e,t,r,n){if(assertAs(e),assertClient(t),"string"!=typeof e.userinfo_endpoint)throw TypeError('"as.userinfo_endpoint" must be a string');let o=new URL(e.userinfo_endpoint),i=prepareHeaders(n?.headers);return t.userinfo_signed_response_alg?i.set("accept","application/jwt"):(i.set("accept","application/json"),i.append("accept","application/jwt")),protectedResourceRequest(r,"GET",o,i,null,{...n,clockSkew:getClockSkew(t)})}async function authenticatedRequest(e,t,r,n,o,i,u){return await clientAuthentication(e,t,o,i,u?.clientPrivateKey),i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),fetch(n.href,{body:o,headers:i,method:r,redirect:"manual",signal:u?.signal?signal(u.signal):null}).then(processDpopNonce)}async function tokenEndpointRequest(e,t,r,n,o){if("string"!=typeof e.token_endpoint)throw TypeError('"as.token_endpoint" must be a string');let i=new URL(e.token_endpoint);n.set("grant_type",r);let u=prepareHeaders(o?.headers);return u.set("accept","application/json"),o?.DPoP!==void 0&&await dpopProofJwt(u,o.DPoP,i,"POST",getClockSkew(t)),authenticatedRequest(e,t,"POST",i,n,u,o)}Symbol();let tp=new WeakMap;function getValidatedIdTokenClaims(e){if(!e.id_token)return;let t=tp.get(e);if(!t)throw TypeError('"ref" was already garbage collected or did not resolve from the proper sources');return t}async function processGenericAccessTokenResponse(e,t,r,n=!1,o=!1){let i;if(assertAs(e),assertClient(t),!(r instanceof Response))throw TypeError('"response" must be an instance of Response');if(200!==r.status){let e;if(e=await handleOAuthBodyError(r))return e;throw new OperationProcessingError('"response" is not a conform Token Endpoint response')}assertReadableResponse(r);try{i=await r.json()}catch{throw new OperationProcessingError('failed to parse "response" body as JSON')}if(!isJsonObject(i))throw new OperationProcessingError('"response" body must be a top level object');if(!validateString(i.access_token))throw new OperationProcessingError('"response" body "access_token" property must be a non-empty string');if(!validateString(i.token_type))throw new OperationProcessingError('"response" body "token_type" property must be a non-empty string');if(i.token_type=i.token_type.toLowerCase(),"dpop"!==i.token_type&&"bearer"!==i.token_type)throw new UnsupportedOperationError("unsupported `token_type` value");if(void 0!==i.expires_in&&("number"!=typeof i.expires_in||i.expires_in<=0))throw new OperationProcessingError('"response" body "expires_in" property must be a positive number');if(!o&&void 0!==i.refresh_token&&!validateString(i.refresh_token))throw new OperationProcessingError('"response" body "refresh_token" property must be a non-empty string');if(void 0!==i.scope&&"string"!=typeof i.scope)throw new OperationProcessingError('"response" body "scope" property must be a string');if(!n){if(void 0!==i.id_token&&!validateString(i.id_token))throw new OperationProcessingError('"response" body "id_token" property must be a non-empty string');if(i.id_token){let{claims:r}=await validateJwt(i.id_token,checkSigningAlgorithm.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported),ty,getClockSkew(t),getClockTolerance(t)).then(validatePresence.bind(void 0,["aud","exp","iat","iss","sub"])).then(validateIssuer.bind(void 0,e.issuer)).then(validateAudience.bind(void 0,t.client_id));if(Array.isArray(r.aud)&&1!==r.aud.length&&r.azp!==t.client_id)throw new OperationProcessingError('unexpected ID Token "azp" (authorized party) claim value');if(t.require_auth_time&&"number"!=typeof r.auth_time)throw new OperationProcessingError('unexpected ID Token "auth_time" (authentication time) claim value');tp.set(i,r)}}return i}function validateAudience(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw new OperationProcessingError('unexpected JWT "aud" (audience) claim value')}else if(t.claims.aud!==e)throw new OperationProcessingError('unexpected JWT "aud" (audience) claim value');return t}function validateIssuer(e,t){if(t.claims.iss!==e)throw new OperationProcessingError('unexpected JWT "iss" (issuer) claim value');return t}let tf=new WeakSet;function brand(e){return tf.add(e),e}async function authorizationCodeGrantRequest(e,t,r,n,o,i){if(assertAs(e),assertClient(t),!tf.has(r))throw TypeError('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()');if(!validateString(n))throw TypeError('"redirectUri" must be a non-empty string');if(!validateString(o))throw TypeError('"codeVerifier" must be a non-empty string');let u=getURLSearchParameter(r,"code");if(!u)throw new OperationProcessingError('no authorization code in "callbackParameters"');let h=new URLSearchParams(i?.additionalParameters);return h.set("redirect_uri",n),h.set("code_verifier",o),h.set("code",u),tokenEndpointRequest(e,t,"authorization_code",h,i)}let th={aud:"audience",exp:"expiration time",iat:"issued at",iss:"issuer",sub:"subject"};function validatePresence(e,t){for(let r of e)if(void 0===t.claims[r])throw new OperationProcessingError(`JWT "${r}" (${th[r]}) claim missing`);return t}let tg=Symbol(),tm=Symbol();async function processAuthorizationCodeOpenIDResponse(e,t,r,n,o){let i=await processGenericAccessTokenResponse(e,t,r);if(isOAuth2Error(i))return i;if(!validateString(i.id_token))throw new OperationProcessingError('"response" body "id_token" property must be a non-empty string');o??(o=t.default_max_age??tm);let u=getValidatedIdTokenClaims(i);if((t.require_auth_time||o!==tm)&&void 0===u.auth_time)throw new OperationProcessingError('ID Token "auth_time" (authentication time) claim missing');if(o!==tm){if("number"!=typeof o||o<0)throw TypeError('"options.max_age" must be a non-negative number');let e=epochTime()+getClockSkew(t),r=getClockTolerance(t);if(u.auth_time+o<e-r)throw new OperationProcessingError("too much time has elapsed since the last End-User authentication")}switch(n){case void 0:case tg:if(void 0!==u.nonce)throw new OperationProcessingError('unexpected ID Token "nonce" claim value');break;default:if(!validateString(n))throw TypeError('"expectedNonce" must be a non-empty string');if(void 0===u.nonce)throw new OperationProcessingError('ID Token "nonce" claim missing');if(u.nonce!==n)throw new OperationProcessingError('unexpected ID Token "nonce" claim value')}return i}async function processAuthorizationCodeOAuth2Response(e,t,r){let n=await processGenericAccessTokenResponse(e,t,r,!0);if(isOAuth2Error(n))return n;if(void 0!==n.id_token){if("string"==typeof n.id_token&&n.id_token.length)throw new OperationProcessingError("Unexpected ID Token returned, use processAuthorizationCodeOpenIDResponse() for OpenID Connect callback processing");delete n.id_token}return n}function assertReadableResponse(e){if(e.bodyUsed)throw TypeError('"response" body has been used already')}async function handleOAuthBodyError(e){if(e.status>399&&e.status<500){assertReadableResponse(e);try{let t=await e.json();if(isJsonObject(t)&&"string"==typeof t.error&&t.error.length)return void 0!==t.error_description&&"string"!=typeof t.error_description&&delete t.error_description,void 0!==t.error_uri&&"string"!=typeof t.error_uri&&delete t.error_uri,void 0!==t.algs&&"string"!=typeof t.algs&&delete t.algs,void 0!==t.scope&&"string"!=typeof t.scope&&delete t.scope,t}catch{}}}function checkRsaKeyAlgorithm(e){if("number"!=typeof e.modulusLength||e.modulusLength<2048)throw new OperationProcessingError(`${e.name} modulusLength must be at least 2048 bits`)}function ecdsaHashName(e){switch(e){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new UnsupportedOperationError}}function keyToSubtle(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:{name:ecdsaHashName(e.algorithm.namedCurve)}};case"RSA-PSS":switch(checkRsaKeyAlgorithm(e.algorithm),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new UnsupportedOperationError}case"RSASSA-PKCS1-v1_5":return checkRsaKeyAlgorithm(e.algorithm),{name:e.algorithm.name};case"Ed448":case"Ed25519":return{name:e.algorithm.name}}throw new UnsupportedOperationError}let ty=Symbol();async function validateJwt(e,t,r,n,o){let i,u;let{0:h,1:y,2:S,length:E}=e.split(".");if(5===E)throw new UnsupportedOperationError("JWE structure JWTs are not supported");if(3!==E)throw new OperationProcessingError("Invalid JWT");try{i=JSON.parse(buf(b64u(h)))}catch{throw new OperationProcessingError("failed to parse JWT Header body as base64url encoded JSON")}if(!isJsonObject(i))throw new OperationProcessingError("JWT Header must be a top level object");if(t(i),void 0!==i.crit)throw new OperationProcessingError('unexpected JWT "crit" header parameter');let R=b64u(S);if(r!==ty){let e=await r(i),t=`${h}.${y}`,n=await crypto.subtle.verify(keyToSubtle(e),e,R,buf(t));if(!n)throw new OperationProcessingError("JWT signature verification failed")}try{u=JSON.parse(buf(b64u(y)))}catch{throw new OperationProcessingError("failed to parse JWT Payload body as base64url encoded JSON")}if(!isJsonObject(u))throw new OperationProcessingError("JWT Payload must be a top level object");let D=epochTime()+n;if(void 0!==u.exp){if("number"!=typeof u.exp)throw new OperationProcessingError('unexpected JWT "exp" (expiration time) claim type');if(u.exp<=D-o)throw new OperationProcessingError('unexpected JWT "exp" (expiration time) claim value, timestamp is <= now()')}if(void 0!==u.iat&&"number"!=typeof u.iat)throw new OperationProcessingError('unexpected JWT "iat" (issued at) claim type');if(void 0!==u.iss&&"string"!=typeof u.iss)throw new OperationProcessingError('unexpected JWT "iss" (issuer) claim type');if(void 0!==u.nbf){if("number"!=typeof u.nbf)throw new OperationProcessingError('unexpected JWT "nbf" (not before) claim type');if(u.nbf>D+o)throw new OperationProcessingError('unexpected JWT "nbf" (not before) claim value, timestamp is > now()')}if(void 0!==u.aud&&"string"!=typeof u.aud&&!Array.isArray(u.aud))throw new OperationProcessingError('unexpected JWT "aud" (audience) claim type');return{header:i,claims:u,signature:R}}function checkSigningAlgorithm(e,t,r){if(void 0!==e){if(r.alg!==e)throw new OperationProcessingError('unexpected JWT "alg" header parameter');return}if(Array.isArray(t)){if(!t.includes(r.alg))throw new OperationProcessingError('unexpected JWT "alg" header parameter');return}if("RS256"!==r.alg)throw new OperationProcessingError('unexpected JWT "alg" header parameter')}function getURLSearchParameter(e,t){let{0:r,length:n}=e.getAll(t);if(n>1)throw new OperationProcessingError(`"${t}" parameter must be provided only once`);return r}let t_=Symbol(),tv=Symbol();function validateAuthResponse(e,t,r,n){if(assertAs(e),assertClient(t),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw TypeError('"parameters" must be an instance of URLSearchParams, or URL');if(getURLSearchParameter(r,"response"))throw new OperationProcessingError('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()');let o=getURLSearchParameter(r,"iss"),i=getURLSearchParameter(r,"state");if(!o&&e.authorization_response_iss_parameter_supported)throw new OperationProcessingError('response parameter "iss" (issuer) missing');if(o&&o!==e.issuer)throw new OperationProcessingError('unexpected "iss" (issuer) response parameter value');switch(n){case void 0:case tv:if(void 0!==i)throw new OperationProcessingError('unexpected "state" response parameter encountered');break;case t_:break;default:if(!validateString(n))throw new OperationProcessingError('"expectedState" must be a non-empty string');if(void 0===i)throw new OperationProcessingError('response parameter "state" missing');if(i!==n)throw new OperationProcessingError('unexpected "state" response parameter value')}let u=getURLSearchParameter(r,"error");if(u)return{error:u,error_description:getURLSearchParameter(r,"error_description"),error_uri:getURLSearchParameter(r,"error_uri")};let h=getURLSearchParameter(r,"id_token"),y=getURLSearchParameter(r,"token");if(void 0!==h||void 0!==y)throw new UnsupportedOperationError("implicit and hybrid flows are not supported");return brand(new URLSearchParams(r))}function algToSubtle(e,t){switch(e){case"PS256":case"PS384":case"PS512":return{name:"RSA-PSS",hash:{name:`SHA-${e.slice(-3)}`}};case"RS256":case"RS384":case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:{name:`SHA-${e.slice(-3)}`}};case"ES256":case"ES384":return{name:"ECDSA",namedCurve:`P-${e.slice(-3)}`};case"ES512":return{name:"ECDSA",namedCurve:"P-521"};case"EdDSA":switch(t){case"Ed25519":return{name:"Ed25519"};case"Ed448":return{name:"Ed448"};default:throw new UnsupportedOperationError}default:throw new UnsupportedOperationError}}async function signCookie(e,t,r,n,o){let{cookies:i,logger:u}=n;u.debug(`CREATE_${e.toUpperCase()}`,{value:t,maxAge:r});let h=new Date;h.setTime(h.getTime()+1e3*r);let y={value:t};return"state"===e&&o&&(y.data=o),{name:i[e].name,value:await jwt_encode({...n.jwt,maxAge:r,token:y}),options:{...i[e].options,expires:h}}}let tb={async create(e){let t=generateRandomCodeVerifier(),r=await calculatePKCECodeChallenge(t),n=await signCookie("pkceCodeVerifier",t,900,e);return{cookie:n,value:r}},async use(e,t,r){let{provider:n}=r;if(!n?.checks?.includes("pkce"))return;let o=e?.[r.cookies.pkceCodeVerifier.name];if(!o)throw new InvalidCheck("PKCE code_verifier cookie was missing.");let i=await jwt_decode({...r.jwt,token:o});if(!i?.value)throw new InvalidCheck("PKCE code_verifier value could not be parsed.");return t.push({name:r.cookies.pkceCodeVerifier.name,value:"",options:{...r.cookies.pkceCodeVerifier.options,maxAge:0}}),i.value}};function decodeState(e){try{let t=new TextDecoder;return JSON.parse(t.decode(decode(e)))}catch{}}let tw={async create(e,t){let{provider:r}=e;if(!r.checks.includes("state")){if(t)throw new InvalidCheck("State data was provided but the provider is not configured to use state.");return}let n=o(JSON.stringify({...t,random:generateRandomState()})),i=await signCookie("state",n,900,e,t);return{cookie:i,value:n}},async use(e,t,r,n){let{provider:o}=r;if(!o.checks.includes("state"))return;let i=e?.[r.cookies.state.name];if(!i)throw new InvalidCheck("State cookie was missing.");let u=await jwt_decode({...r.jwt,token:i});if(!u?.value)throw new InvalidCheck("State (cookie) value could not be parsed.");let h=decodeState(u.value);if(!h)throw new InvalidCheck("State (encoded) value could not be parsed.");if(h.random!==n)throw new InvalidCheck(`Random state values did not match. Expected: ${h.random}. Got: ${n}`);return t.push({name:r.cookies.state.name,value:"",options:{...r.cookies.state.options,maxAge:0}}),u.value}},tS={async create(e){if(!e.provider.checks.includes("nonce"))return;let t=generateRandomNonce(),r=await signCookie("nonce",t,900,e);return{cookie:r,value:t}},async use(e,t,r){let{provider:n}=r;if(!n?.checks?.includes("nonce"))return;let o=e?.[r.cookies.nonce.name];if(!o)throw new InvalidCheck("Nonce cookie was missing.");let i=await jwt_decode({...r.jwt,token:o});if(!i?.value)throw new InvalidCheck("Nonce value could not be parsed.");return t.push({name:r.cookies.nonce.name,value:"",options:{...r.cookies.nonce.options,maxAge:0}}),i.value}};async function handleOAuth(e,t,r,n){let o,i,u;let{logger:h,provider:y}=r,{token:S,userinfo:E}=y;if(S?.url&&"authjs.dev"!==S.url.host||E?.url&&"authjs.dev"!==E.url.host)o={issuer:y.issuer??"https://authjs.dev",token_endpoint:S?.url.toString(),userinfo_endpoint:E?.url.toString()};else{let e=new URL(y.issuer),t=await discoveryRequest(e),r=await processDiscoveryResponse(e,t);if(!r.token_endpoint)throw TypeError("TODO: Authorization server did not provide a token endpoint.");if(!r.userinfo_endpoint)throw TypeError("TODO: Authorization server did not provide a userinfo endpoint.");o=r}let R={client_id:y.clientId,client_secret:y.clientSecret,...y.client},D=[],K=await tw.use(t,D,r,n),B=validateAuthResponse(o,R,new URLSearchParams(e),y.checks.includes("state")?K:t_);if(isOAuth2Error(B)){let e={providerId:y.id,...B};throw h.debug("OAuthCallbackError",e),new OAuthCallbackError("OAuth Provider returned an error",e)}let V=await tb.use(t,D,r),q=y.callbackUrl;!r.isOnRedirectProxy&&y.redirectProxyUrl&&(q=y.redirectProxyUrl);let G=await authorizationCodeGrantRequest(o,R,B,q,V??"auth");if(y.token?.conform&&(G=await y.token.conform(G.clone())??G),i=parseWwwAuthenticateChallenges(G)){for(let e of i)console.log("challenge",e);throw Error("TODO: Handle www-authenticate challenges as needed")}let ee={};if("oidc"===y.type){let e=await tS.use(t,D,r),n=await processAuthorizationCodeOpenIDResponse(o,R,G,e??tg);if(isOAuth2Error(n))throw console.log("error",n),Error("TODO: Handle OIDC response body error");ee=getValidatedIdTokenClaims(n),u=n}else{if(isOAuth2Error(u=await processAuthorizationCodeOAuth2Response(o,R,G)))throw console.log("error",u),Error("TODO: Handle OAuth 2.0 response body error");if(E?.request){let e=await E.request({tokens:u,provider:y});e instanceof Object&&(ee=e)}else if(E?.url){let e=await userInfoRequest(o,R,u.access_token);ee=await e.json()}else throw TypeError("No userinfo endpoint configured")}u.expires_in&&(u.expires_at=Math.floor(Date.now()/1e3)+Number(u.expires_in));let et=await getUserAndAccount(ee,y,u,h);return{...et,profile:ee,cookies:D}}async function getUserAndAccount(e,t,r,n){try{let n=await t.profile(e,r);if(n.email=n.email?.toLowerCase(),!n.id)throw TypeError(`User id is missing in ${t.name} OAuth profile response`);return{user:n,account:{provider:t.id,type:t.type,providerAccountId:n.id.toString(),...r}}}catch(r){n.debug("getProfile error details",e),n.error(new OAuthProfileParseError(r,{provider:t.id}))}}function handleState(e,t,r){let n,o;if(t.redirectProxyUrl&&!e?.state)throw new InvalidCheck("Missing state in query, but required for redirect proxy");let i=decodeState(e?.state);if(n=i?.random,r){if(!i?.origin)return{randomState:n};o=`${i.origin}?${new URLSearchParams(e)}`}return{randomState:n,proxyRedirect:o}}async function handleAuthorized(e,{url:t,logger:r,callbacks:{signIn:n}}){try{let o=await n(e);if(!o)return t.pathname+="/error",r.debug("User not authorized",e),t.searchParams.set("error","AccessDenied"),{status:403,redirect:t.toString()}}catch(n){t.pathname+="/error";let e=new AuthorizedCallbackError(n);return r.error(e),t.searchParams.set("error","Configuration"),{status:500,redirect:t.toString()}}}async function callback_callback(e){let{options:t,query:r,body:n,method:o,headers:i,sessionStore:u}=e,{provider:h,adapter:y,url:S,callbackUrl:E,pages:R,jwt:D,events:K,callbacks:B,session:{strategy:V,maxAge:q},logger:G}=t,ee=[],et="jwt"===V;try{if("oauth"===h.type||"oidc"===h.type){let n;let{proxyRedirect:o,randomState:i}=handleState(r,h,t.isOnRedirectProxy);if(o)return G.debug("proxy redirect",{proxyRedirect:o,randomState:i}),{redirect:o};let V=await handleOAuth(r,e.cookies,t,i);V.cookies.length&&ee.push(...V.cookies),G.debug("authorization result",V);let{user:er,account:en,profile:eo}=V;if(!er||!en||!eo)return{redirect:`${S}/signin`,cookies:ee};if(y){let{getUserByAccount:e}=y,t=await e({providerAccountId:en.providerAccountId,provider:h.id});t&&(n=t)}let ei=await handleAuthorized({user:n,account:en,profile:eo},t);if(ei)return{...ei,cookies:ee};let{user:ea,session:es,isNewUser:ec}=await handleLogin(u.value,er,en,t);if(et){let e={name:ea.name,email:ea.email,picture:ea.image,sub:ea.id?.toString()},t=await B.jwt({token:e,user:ea,account:en,profile:eo,isNewUser:ec,trigger:ec?"signUp":"signIn"});if(null===t)ee.push(...u.clean());else{let e=await D.encode({...D,token:t}),r=new Date;r.setTime(r.getTime()+1e3*q);let n=u.chunk(e,{expires:r});ee.push(...n)}}else ee.push({name:t.cookies.sessionToken.name,value:es.sessionToken,options:{...t.cookies.sessionToken.options,expires:es.expires}});if(await K.signIn?.({user:ea,account:en,profile:eo,isNewUser:ec}),ec&&R.newUser)return{redirect:`${R.newUser}${R.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:E})}`,cookies:ee};return{redirect:E,cookies:ee}}if("email"===h.type){let e=r?.token,n=r?.email;if(!e||!n){let t=TypeError("Missing token or email. The sign-in URL was manually opened without token/identifier or the link was not sent correctly in the email.",{cause:{hasToken:!!e,hasEmail:!!n}});throw t.name="Configuration",t}let o=h.secret??t.secret,i=await y.useVerificationToken({identifier:n,token:await createHash(`${e}${o}`)}),S=!!i,V=i?i.expires.valueOf()<Date.now():void 0,G=!S||V;if(G)throw new Verification({hasInvite:S,expired:V});let er=await y.getUserByEmail(n)??{id:n,email:n,emailVerified:null},en={providerAccountId:er.email,userId:er.id,type:"email",provider:h.id},eo=await handleAuthorized({user:er,account:en},t);if(eo)return{...eo,cookies:ee};let{user:ei,session:ea,isNewUser:es}=await handleLogin(u.value,er,en,t);if(et){let e={name:ei.name,email:ei.email,picture:ei.image,sub:ei.id?.toString()},t=await B.jwt({token:e,user:ei,account:en,isNewUser:es,trigger:es?"signUp":"signIn"});if(null===t)ee.push(...u.clean());else{let e=await D.encode({...D,token:t}),r=new Date;r.setTime(r.getTime()+1e3*q);let n=u.chunk(e,{expires:r});ee.push(...n)}}else ee.push({name:t.cookies.sessionToken.name,value:ea.sessionToken,options:{...t.cookies.sessionToken.options,expires:ea.expires}});if(await K.signIn?.({user:ei,account:en,isNewUser:es}),es&&R.newUser)return{redirect:`${R.newUser}${R.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:E})}`,cookies:ee};return{redirect:E,cookies:ee}}if("credentials"===h.type&&"POST"===o){let e=n??{};Object.entries(r??{}).forEach(([e,t])=>S.searchParams.set(e,t));let y=await h.authorize(e,new Request(S,{headers:i,method:o,body:JSON.stringify(n)}));if(!y)return{status:401,redirect:`${S}/error?${new URLSearchParams({error:"CredentialsSignin",provider:h.id})}`,cookies:ee};let R={providerAccountId:y.id,type:"credentials",provider:h.id},V=await handleAuthorized({user:y,account:R,credentials:e},t);if(V)return{...V,cookies:ee};let G={name:y.name,email:y.email,picture:y.image,sub:y.id?.toString()},et=await B.jwt({token:G,user:y,account:R,isNewUser:!1,trigger:"signIn"});if(null===et)ee.push(...u.clean());else{let e=await D.encode({...D,token:et}),t=new Date;t.setTime(t.getTime()+1e3*q);let r=u.chunk(e,{expires:t});ee.push(...r)}return await K.signIn?.({user:y,account:R}),{redirect:E,cookies:ee}}return{status:500,body:`Error: Callback for provider type ${h.type} not supported`,cookies:ee}}catch(t){if(t instanceof OAuthCallbackError)return G.error(t),S.searchParams.set("error",OAuthCallbackError.name),S.pathname+="/signin",{redirect:S.toString(),cookies:ee};let e=new CallbackRouteError(t,{provider:h.id});return G.debug("callback route error details",{method:o,query:r,body:n}),G.error(e),S.searchParams.set("error",CallbackRouteError.name),S.pathname+="/error",{redirect:S.toString(),cookies:ee}}}function providers(e){return{headers:{"Content-Type":"application/json"},body:e.reduce((e,{id:t,name:r,type:n,signinUrl:o,callbackUrl:i})=>(e[t]={id:t,name:r,type:n,signinUrl:o,callbackUrl:i},e),{})}}async function session_session(e){let{options:t,sessionStore:r,newSession:n,isUpdate:o}=e,{adapter:i,jwt:u,events:h,callbacks:y,logger:S,session:{strategy:E,maxAge:R}}=t,D={body:null,headers:{"Content-Type":"application/json"},cookies:[]},K=r.value;if(!K)return D;if("jwt"===E){try{let e=await u.decode({...u,token:K});if(!e)throw Error("Invalid JWT");let t=await y.jwt({token:e,...o&&{trigger:"update"},session:n}),i=fromDate(R);if(null!==t){let e={user:{name:t.name,email:t.email,image:t.picture},expires:i.toISOString()},n=await y.session({session:e,token:t});D.body=n;let o=await u.encode({...u,token:t}),S=r.chunk(o,{expires:i});D.cookies?.push(...S),await h.session?.({session:n,token:t})}else D.cookies?.push(...r.clean())}catch(e){S.error(new JWTSessionError(e)),D.cookies?.push(...r.clean())}return D}try{let{getSessionAndUser:e,deleteSession:u,updateSession:S}=i,E=await e(K);if(E&&E.session.expires.valueOf()<Date.now()&&(await u(K),E=null),E){let{user:e,session:r}=E,i=t.session.updateAge,u=r.expires.valueOf()-1e3*R+1e3*i,B=fromDate(R);u<=Date.now()&&await S({sessionToken:K,expires:B});let V=await y.session({session:{user:{name:e.name,email:e.email,image:e.image},expires:r.expires.toISOString()},user:e,newSession:n,...o?{trigger:"update"}:{}});D.body=V,D.cookies?.push({name:t.cookies.sessionToken.name,value:K,options:{...t.cookies.sessionToken.options,expires:B}}),await h.session?.({session:V})}else K&&D.cookies?.push(...r.clean())}catch(e){S.error(new SessionTokenError(e))}return D}async function signin_email(e,t,r){let{url:n,adapter:o,provider:i,callbackUrl:u,theme:h}=t,y=await i.generateVerificationToken?.()??randomString(32),S=new Date(Date.now()+(i.maxAge??86400)*1e3),E=new URLSearchParams({callbackUrl:u,token:y,email:e}),R=`${n}/callback/${i.id}?${E}`,D=i.secret??t.secret;return await Promise.all([i.sendVerificationRequest({identifier:e,token:y,expires:S,url:R,provider:i,theme:h,request:toRequest(r)}),o.createVerificationToken?.({identifier:e,token:await createHash(`${y}${D}`),expires:S})]),`${n}/verify-request?${new URLSearchParams({provider:i.id,type:i.type})}`}async function getAuthorizationUrl(e,t){let r,n;let{logger:o,provider:i}=t,u=i.authorization?.url;if(!u||"authjs.dev"===u.host){let e=new URL(i.issuer),t=await discoveryRequest(e),r=await processDiscoveryResponse(e,t);if(!r.authorization_endpoint)throw TypeError("Authorization server did not provide an authorization endpoint.");u=new URL(r.authorization_endpoint)}let h=u.searchParams,y=i.callbackUrl;!t.isOnRedirectProxy&&i.redirectProxyUrl&&(y=i.redirectProxyUrl,n={origin:i.callbackUrl},o.debug("using redirect proxy",{redirect_uri:y,data:n}));let S=Object.assign({response_type:"code",client_id:i.clientId,redirect_uri:y,...i.authorization?.params},Object.fromEntries(i.authorization?.url.searchParams??[]),e);for(let e in S)h.set(e,S[e]);let E=[],R=await tw.create(t,n);if(R&&(h.set("state",R.value),E.push(R.cookie)),i.checks?.includes("pkce")){if(r&&!r.code_challenge_methods_supported?.includes("S256"))"oidc"===i.type&&(i.checks=["nonce"]);else{let{value:e,cookie:r}=await tb.create(t);h.set("code_challenge",e),h.set("code_challenge_method","S256"),E.push(r)}}let D=await tS.create(t);return D&&(h.set("nonce",D.value),E.push(D.cookie)),"oidc"!==i.type||u.searchParams.has("scope")||u.searchParams.set("scope","openid profile email"),o.debug("authorization url is ready",{url:u,cookies:E,provider:i}),{redirect:u.toString(),cookies:E}}async function signin_signin(e,t){let{query:r,body:n}=e,{url:o,logger:i,provider:u}=t;try{if("oauth"===u.type||"oidc"===u.type)return await getAuthorizationUrl(r,t);if("email"===u.type){let r=u.normalizeIdentifier??defaultNormalizer,o=r(n?.email),i=await t.adapter.getUserByEmail(o)??{id:o,email:o,emailVerified:null},h={providerAccountId:o,userId:i.id,type:"email",provider:u.id},y=await handleAuthorized({user:i,account:h,email:{verificationRequest:!0}},t);if(y)return y;let S=await signin_email(o,t,e);return{redirect:S}}return{redirect:`${o}/signin`}}catch(r){let e=new SignInError(r,{provider:u.id});i.error(e);let t="email"===u.type?"EmailSignin":"OAuthSignin";return o.searchParams.set("error",t),o.pathname+="/signin",{redirect:o.toString()}}}function defaultNormalizer(e){if(!e)throw Error("Missing email from request body.");let[t,r]=e.toLowerCase().trim().split("@");return r=r.split(",")[0],`${t}@${r}`}async function signout_signout(e,t){let{jwt:r,events:n,callbackUrl:o,logger:i,session:u}=t,h=e.value;if(!h)return{redirect:o};try{if("jwt"===u.strategy){let e=await r.decode({...r,token:h});await n.signOut?.({token:e})}else{let e=await t.adapter?.deleteSession(h);await n.signOut?.({session:e})}}catch(e){i.error(new SignOutError(e))}return{redirect:o,cookies:e.clean()}}async function AuthInternal(e,t){let{action:r,providerId:n,error:o,method:i}=e,u=t.skipCSRFCheck===tE,{options:h,cookies:y}=await init({authOptions:t,action:r,providerId:n,url:e.url,callbackUrl:e.body?.callbackUrl??e.query?.callbackUrl,csrfToken:e.body?.csrfToken,cookies:e.cookies,isPost:"POST"===i,csrfDisabled:u}),S=new cookie_SessionStore(h.cookies.sessionToken,e,h.logger);if("GET"===i){let t=renderPage({...h,query:e.query,cookies:y}),{pages:n}=h;switch(r){case"providers":return await providers(h.providers);case"session":{let e=await session_session({sessionStore:S,options:h});return e.cookies&&y.push(...e.cookies),{...e,cookies:y}}case"csrf":if(u)return h.logger.warn("csrf-disabled"),y.push({name:h.cookies.csrfToken.name,value:"",options:{...h.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies:y};return{headers:{"Content-Type":"application/json"},body:{csrfToken:h.csrfToken},cookies:y};case"signin":if(n.signIn){let e=`${n.signIn}${n.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:h.callbackUrl})}`;return o&&(e=`${e}&${new URLSearchParams({error:o})}`),{redirect:e,cookies:y}}return t.signin();case"signout":if(n.signOut)return{redirect:n.signOut,cookies:y};return t.signout();case"callback":if(h.provider){let t=await callback_callback({body:e.body,query:e.query,headers:e.headers,cookies:e.cookies,method:i,options:h,sessionStore:S});return t.cookies&&y.push(...t.cookies),{...t,cookies:y}}break;case"verify-request":if(n.verifyRequest)return{redirect:n.verifyRequest,cookies:y};return t.verifyRequest();case"error":if(["Signin","OAuthCreateAccount","EmailCreateAccount","Callback","OAuthAccountNotLinked","SessionRequired"].includes(o))return{redirect:`${h.url}/signin?error=${o}`,cookies:y};if(n.error)return{redirect:`${n.error}${n.error.includes("?")?"&":"?"}error=${o}`,cookies:y};return t.error({error:o})}}else switch(r){case"signin":if((u||h.csrfTokenVerified)&&h.provider){let t=await signin_signin(e,h);return t.cookies&&y.push(...t.cookies),{...t,cookies:y}}return{redirect:`${h.url}/signin?csrf=true`,cookies:y};case"signout":if(u||h.csrfTokenVerified){let e=await signout_signout(S,h);return e.cookies&&y.push(...e.cookies),{...e,cookies:y}}return{redirect:`${h.url}/signout?csrf=true`,cookies:y};case"callback":if(h.provider){if("credentials"===h.provider.type&&!u&&!h.csrfTokenVerified)return{redirect:`${h.url}/signin?csrf=true`,cookies:y};let t=await callback_callback({body:e.body,query:e.query,headers:e.headers,cookies:e.cookies,method:i,options:h,sessionStore:S});return t.cookies&&y.push(...t.cookies),{...t,cookies:y}}break;case"session":if(h.csrfTokenVerified){let t=await session_session({options:h,sessionStore:S,newSession:e.body?.data,isUpdate:!0});return t.cookies&&y.push(...t.cookies),{...t,cookies:y}}return{status:400,cookies:y}}throw new UnknownAction(`Cannot handle action: ${r}`)}let tE=Symbol("skip-csrf-check"),tk=Symbol("return-type-raw");async function Auth(e,t){setLogger(t.logger,t.debug);let r=await toInternalRequest(e);if(r instanceof Error)return eD.error(r),new Response(`Error: This action with HTTP ${e.method} is not supported.`,{status:400});let n=assertConfig(r,t);if(Array.isArray(n))n.forEach(eD.warn);else if(n instanceof Error){if(eD.error(n),!["signin","signout","error","verify-request"].includes(r.action)||"GET"!==r.method)return new Response(JSON.stringify({message:"There was a problem with the server configuration. Check the server logs for more information.",code:n.name}),{status:500,headers:{"Content-Type":"application/json"}});let{pages:e,theme:o}=t,i=e?.error&&r.url.searchParams.get("callbackUrl")?.startsWith(e.error);if(!e?.error||i){i&&eD.error(new ErrorPageLoop(`The error page ${e?.error} should not require authentication`));let t=renderPage({theme:o}),r=t.error({error:"Configuration"});return toResponse(r)}return Response.redirect(`${e.error}?error=Configuration`)}let o=await AuthInternal(r,t);if(t.raw===tk)return o;let i=await toResponse(o),u=i.headers.get("Location");return e.headers.has("X-Auth-Return-Redirect")&&u?(i.headers.delete("Location"),i.headers.set("Content-Type","application/json"),new Response(JSON.stringify({url:u}),{headers:i.headers})):i}function setEnvDefaults(e){e.secret??(e.secret=process.env.NEXTAUTH_SECRET??process.env.AUTH_SECRET),e.trustHost??(e.trustHost=!!(process.env.AUTH_URL??process.env.NEXTAUTH_URL??process.env.AUTH_TRUST_HOST??process.env.VERCEL)),e.redirectProxyUrl??(e.redirectProxyUrl=process.env.AUTH_REDIRECT_PROXY_URL),e.providers=e.providers.map(e=>{let t="function"==typeof e?e():e;if("oauth"===t.type||"oidc"===t.type){let e=t.id.toUpperCase();t.clientId??(t.clientId=process.env[`AUTH_${e}_ID`]),t.clientSecret??(t.clientSecret=process.env[`AUTH_${e}_SECRET`]),"oidc"===t.type&&(t.issuer??(t.issuer=process.env[`AUTH_${e}_ISSUER`]))}return t})}function detectOrigin(e){let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(t)return new URL(t);let r=e.get("x-forwarded-host")??e.get("host"),n="http"===e.get("x-forwarded-proto")?"http":"https";return new URL(`${n}://${r}`)}function reqWithEnvUrl(e){let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return e;let r=e.nextUrl.href.replace(e.nextUrl.origin,""),n=new URL(t).origin,o=new URL(r,n),i=new Request(o,e);return i.nextUrl=o,i}var tP=r(24596),tA=r(95798);async function getSession(e,t){let r=detectOrigin(e),n=new Request(`${r}/session`,{headers:{cookie:e.get("cookie")??""}});return Auth(n,{...t,callbacks:{...t.callbacks,async session(...e){let r=await t.callbacks?.session?.(...e)??e[0].session,n=e[0].user??e[0].token;return{user:n,...r}}}})}function isReqWrapper(e){return"function"==typeof e}function initAuth(e){return(...t)=>{if(!t.length)return getSession((0,tP.headers)(),e).then(e=>e.json());if(t[0]instanceof Request){let r=t[0],n=t[1];return handleAuth([r,n],e)}if(isReqWrapper(t[0])){let r=t[0];return async(...t)=>handleAuth(t,e,r)}let r="req"in t[0]?t[0].req:t[0],n="res"in t[0]?t[0].res:t[1];return getSession(new Headers(r.headers),e).then(async e=>{let t=await e.json();return cloneSetCookie(e,n),t})}}async function handleAuth(e,t,r){let n=reqWithEnvUrl(e[0]),o=await getSession(n.headers,t),i=await o.json(),u=!0;t.callbacks?.authorized&&(u=await t.callbacks.authorized({request:n,auth:i}));let h=tA.next?.();if(u instanceof Response){h=u;let e=u.headers.get("Location"),{pathname:r}=n.nextUrl;e&&isSameAuthAction(r,new URL(e).pathname,t)&&(u=!0)}else if(r)n.auth=i,h=await r(n,e[1])??tA.next();else if(!u){let e=t.pages?.signIn??`${n.nextUrl.basePath}}/signin`;n.nextUrl.pathname!==e&&(n.nextUrl.pathname=e,n.nextUrl.searchParams.set("callbackUrl",n.nextUrl.href),h=tA.redirect(n.nextUrl))}let y=new Response(h?.body,h);return cloneSetCookie(o,y),y}function cloneSetCookie(e,t){let r=e.headers.getSetCookie?.()??e.headers.get("set-cookie");r?.length&&(Array.isArray(r)?r.forEach(e=>t.headers.append("set-cookie",e)):t.headers.set("set-cookie",r))}function isSameAuthAction(e,t,r){let n=t.replace(`${e}/`,""),o=Object.values(r.pages??{});return(tx.has(n)||o.includes(t))&&t===e}let tx=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);var tO=r(41412);async function signIn(e,t,r,n){let o;let i=new Headers((0,tP.headers)()),{redirect:u=!0,redirectTo:h=i.get("Referer")??"/",...y}=t??{},S=`${detectOrigin(i)}/signin`;if(!e){let e=`${S}?${new URLSearchParams({callbackUrl:h})}`;return u&&(0,tO.redirect)(e),e}let E=`${S}/${e}?${new URLSearchParams(r)}`;for(let t of n.providers){let{id:r}="function"==typeof t?t?.():t;if(r===e){o=r;break}}if(!o){let e=`${S}?${new URLSearchParams({callbackUrl:h})}`;return u&&(0,tO.redirect)(e),e}"credentials"===o&&(E=E.replace("signin","callback")),i.set("Content-Type","application/x-www-form-urlencoded");let R=new URLSearchParams({...y,callbackUrl:h}),D=new Request(E,{method:"POST",headers:i,body:R}),K=await Auth(D,{...n,raw:tk,skipCSRFCheck:tE});for(let e of K?.cookies??[])(0,tP.cookies)().set(e.name,e.value,e.options);let B=new URL(K.redirect).searchParams.get("error");if(B)throw Error(B);return u?(0,tO.redirect)(K.redirect):K.redirect}async function signOut(e,t){let r=new Headers((0,tP.headers)());r.set("Content-Type","application/x-www-form-urlencoded");let n=`${detectOrigin(r)}/signout`,o=e?.redirectTo??r.get("Referer")??"/",i=new URLSearchParams({callbackUrl:o}),u=new Request(n,{method:"POST",headers:r,body:i}),h=await Auth(u,{...t,raw:tk,skipCSRFCheck:tE});for(let e of h?.cookies??[])(0,tP.cookies)().set(e.name,e.value,e.options);return e?.redirect??!0?(0,tO.redirect)(h.redirect):h}async function update(e,t){let r=new Headers((0,tP.headers)());r.set("Content-Type","application/json");let n=`${detectOrigin(r)}session`,o=JSON.stringify({data:e}),i=new Request(n,{method:"POST",headers:r,body:o}),u=await Auth(i,{...t,raw:tk,skipCSRFCheck:tE});for(let e of u?.cookies??[])(0,tP.cookies)().set(e.name,e.value,e.options);return u.body}function NextAuth(e){setEnvDefaults(e);let httpHandler=t=>Auth(reqWithEnvUrl(t),e);return{handlers:{GET:httpHandler,POST:httpHandler},auth:initAuth(e),signIn:(t,r,n)=>signIn(t,r,n,e),signOut:t=>signOut(t,e),update:t=>update(t,e)}}}};